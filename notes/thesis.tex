\documentclass{scrartcl}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage{geometry}

\usepackage{imakeidx} % index
\usepackage{enumerate}
\usepackage{hyperref}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{tabu}

% Pakete für Titelseiten-Vorlage
%\usepackage{fixltx2e} % Schickere Ausgabe
\usepackage{lmodern} % ordentliche Schriften
\usepackage{tabularx} % für Elemente der Titelseite
\usepackage[draft=false,babel,kerning=true,spacing=true]{microtype} % optischer Randausgleich etc.
% \usepackage{setspace}


% Math 
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage{dsfont}
%\usepackage{BOONDOX-calo}
\usepackage{dutchcal}
\usepackage{stmaryrd}
\usepackage{wasysym} % for \ocircle
\usepackage{dsfont}
\usepackage{shuffle}

\usepackage[capitalize]{cleveref}


% Graphics
\usepackage{graphicx}
\usepackage{svg}
\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{trees}
\usetikzlibrary{cd}
\usetikzlibrary{decorations.markings}


\let\emph\relax
\DeclareTextFontCommand{\emph}{\bfseries}
\newcommand{\emphi}[1]{\index{#1}\emph{#1}}


\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{theorem*}{Theorem}
\newtheorem{assumption}[theorem]{Assumption}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{proposition*}[theorem*]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{definition*}[theorem*]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{examples}[theorem]{Examples}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{remarks}[theorem]{Remarks}
\newtheorem{warning}[theorem]{Warning}
\newtheorem{hypothesis}[theorem]{Hypothesis}
\newtheorem{hypothesis*}[theorem*]{Hypothesis}
\newtheorem{construction}[theorem]{Construction}


% \addto\extrasenglish{%
% \def\lemmaautorefname{Lemma}%
% \def\exampleautorefname{Example}%
% \def\examplesautorefname{Examples}%
% \def\definitionautorefname{Definition}%
% \def\remarkautorefname{Remark}%
% \def\assumptionautorefname{Assumption}%
% \def\propositionautorefname{Proposition}%
% \def\conjectureautorefname{Conjecture}%
% \def\constructionautorefname{Construction}%
% }
\newcommand{\lemmaautorefname}{Lemma}

% Algebra
\newcommand{\A}{\mathbb A}
\newcommand{\C}{\mathbb C}
\newcommand{\N}{\mathbb N}
\newcommand{\R}{\mathbb R}
\newcommand{\Q}{\mathbb Q}
\newcommand{\Z}{\mathbb Z}
\newcommand{\CA}{\mathcal A}

\DeclareMathOperator{\Ch}{Ch}
\DeclareMathOperator{\Tot}{Tot}

\newcommand{\cat}[1]{\mathbcal{#1}}

% Analysis
\renewcommand{\epsilon}{\varepsilon}
\newcommand{\abs}[1]{\left\lvert#1\right\rvert}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\DeclareMathOperator{\vol}{vol}


% Sets
\renewcommand{\emptyset}{\varnothing}
\renewcommand{\subset}{\subseteq}
\renewcommand{\supset}{\supseteq}
\newcommand{\union}{\mathbin{\cup}}
\newcommand{\isect}{\mathbin{\cap}}


% Algebraic Topology
\newcommand{\capp}{\mathbin{\frown}}
\newcommand{\cupp}{\mathbin{\smile}}
\newcommand{\slant}{\mathbin{/}}
\newcommand{\APL}{A_{PL}}
\DeclareMathOperator{\cone}{cone}
\DeclareMathOperator{\cofib}{cofib}
\DeclareMathOperator{\cocone}{cocone}
% \def\dsqcup{\sqcup\mathchoice{\mkern-7mu}{\mkern-7mu}{\mkern-3.2mu}{\mkern-3.8mu}\sqcup}
% \newcommand{\shuffle}{\mathbin{\sqcup}}


% Category Theory
\newcommand{\hteq}{\simeq}
\newcommand{\iso}{\cong}
\newcommand{\quiso}{\simeq}
\newcommand{\defeq}{\coloneqq}
\newcommand{\eqdef}{\eqqcolon}
\newcommand{\from}{\leftarrow}
\let\xto\xrightarrow
\let\xfrom\xleftarrow

\newcommand{\nto}{\Rightarrow}
\newcommand{\xnto}{\xRightarrow}
\newcommand{\nfrom}{\Leftarrow}

\newcommand{\injto}{\hookrightarrow}
\newcommand{\surjto}{\twoheadrightarrow}
\newcommand{\surjfrom}{\twoheadleftarrow}
\newcommand{\injfrom}{\hookleftarrow}
\newcommand{\emb}{\hookrightarrow}

\DeclareMathOperator{\id}{id}

\DeclareMathOperator{\Map}{Map}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Mod}{Mod}
%\DeclareMathOperator{\lim}{lim}
\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\BC}{B}
\DeclareMathOperator{\nBC}{\hat B}

\renewcommand{\coprod}{\mathbin{\amalg}}
\newcommand{\Coprod}{\amalg}
\newcommand{\Prod}{\prod}

\DeclareMathOperator{\Ran}{Ran}


% Homotopy Theory
\newcommand{\realization}[1]{\left\lvert#1\right\rvert}
\newcommand{\totalization}[1]{\left\lVert#1\right\rVert}
\DeclareMathOperator{\Ho}{Ho}
\DeclareMathOperator{\holim}{holim}
\DeclareMathOperator{\hocolim}{hocolim}


% Geometry
\DeclareMathOperator{\Conf}{Conf}
\DeclareMathOperator{\UConf}{Conf}
\DeclareMathOperator{\cConf}{\overline{Conf}}

\DeclareMathOperator{\coGra}{{}^*Gra}
\DeclareMathOperator{\Gra}{Gra}
\DeclareMathOperator{\coGraphs}{{}^*Graphs}
\DeclareMathOperator{\Graphs}{Graphs}

% Combinatorics
\DeclareMathOperator{\Sh}{Sh}
\DeclareMathOperator{\sgn}{sgn}
%\DeclareMathOperator{\shuffle}{⧢}
%\newcommand{\Coprod}{\coprod}



\newcommand{\iHom}{\underline{\operatorname{Hom}}}

\newcommand{\blank}{-}
\newcommand{\comp}{\mathbin{\circ}}

\newcommand{\grVec}{\mathrm{gr{-}Vec}}



\tikzset{
  trim node/.default=1cm,
  trim node/.style={
    overlay,
    append after command={% restore smaller bounding box
      ([xshift={+#1}]\tikzlastnode.north west)
      ([xshift={+-#1}]\tikzlastnode.south east)}},
  down and trim/.default=1cm,
  down and trim/.style={
    yshift=-(\pgfmatrixcurrentcolumn-1)*1.5\baselineskip,
    trim node={#1}},
  downup and trim/.default=1cm,
  downup and trim/.style={
    yshift=iseven(\pgfmatrixcurrentcolumn) ? -1.5\baselineskip : 0pt,
    trim node={#1}},
  -|/.style={to path={-|(\tikztotarget)\tikztonodes}},
  |-/.style={to path={|-(\tikztotarget)\tikztonodes}},
  -| sl/.style={-|, xslant=-1},
  |- sl/.style={|-, xslant= 1},
  center picture/.style={
    trim left=(current bounding box.center),
    trim right=(current bounding box.center)}}



% Bibliography
\bibliographystyle{alpha}

\makeindex




\input{vorlage_informatik}
\titel{Algebraic Models for Loop Spaces and Configuration Spaces}
\typ{Masterarbeit}
\gradd{Master of Science (M. Sc.)}
\autor{Matthias Görg}
\gebdatum{26.02.1995}
\gebort{Berlin}
\gutachter{Dr. Thibaut Mazuir}{Prof. Dr. Klaus Mohnke}
\einreichungsDatum{6.3.2024}




\begin{document}


\pagestyle{plain}
\pagenumbering{gobble}
\makeTitel

\newpage



\newgeometry{left=5cm,right=5cm}

\section*{Abstract}
String topology is the study algebraic structures on the homology of the free loop space and related spaces. We exhibit two constructions of the loop product and coproduct on a simply connected manifold $M$ that allow us to prove that the cohomology of the free loop space has the structure of a co-Batalin-Vilkovisky-algebra. The first construction uses the Fulton-MacPherson compactification of the configuration space of $n$ ordered points, which is a convenient context for the construction of the intersection product on $M$. The second construction is purely algebraic and shows that the intersection map in the definition of the loop product is algebraically a lift of the intersection product on $M$. Starting with a differential graded algebra model $A$ of $M$, we generalize the Hochschild chain complex construction to construct explicit cochain complexes which model mapping spaces from graphs into $M$, such as the path space and the figure eight space of $M$. Our main tool is a theorem known as the pullback-pushout lemma, which shows how one can compute the cohomology of a pullback of spaces using the derived tensor product. 

\restoregeometry

\newpage



\pagenumbering{roman}

%\pagestyle{useheadings}
\tableofcontents

\newpage~
\cleardoublepage


\pagenumbering{arabic}

\newpage


\section{Introduction}

\subsection{Background and Motivation}

By a result due to Quillen \cite{quillen1969rational}, the study of the homotopical properties of simply connected topological spaces is equivalent to the study of the homotopical properties of simply connected differential graded commutative algebras. Given a specific simply connected manifold $M$, one may construct other spaces from $M$, such as the free loop space $LM \defeq C^0(S^1, M)$ and the configuration spaces $\Conf_M(n)$ of $n$ ordered pairwise distinct points in $M$. Given a differential graded algebra $A$ which computes the cohomology of $M$, such as the de Rham algebra $\Omega^*(M)$ or the singular cochain algebra $C^*(M)$, we consider the problem of constructing cochain complexes which compute the cohomology of spaces such as $LM$ and $\Conf_M(n)$. This problem appears in Adams' work on the based loop space $\Omega M$ and the cobar construction \cite{adams1956cobar} and Chen's work \cite{chen1977iterated} on the bar construction and the free loop space $LM$. In \cite{jones1987cyclic}, Jones showed that there is an isomorphism between the cohomology of the loop space and the Hochschild cohomology of $C^*(M)$. In \cite{lambrechts2008remarkable}, Lambrechts and Stanley showed that one can construct a model of the configuration spaces, if one starts with a differential graded algebra $A$ which in addition has a chain level intersection coproduct, the cohomology version of the intersection product.

String Topology was initiated by Moira Chas and Dennis Sullivan in \cite{chas1999string} and it is concerned with the study of algebraic operations on the homology of the free loop space $LM$ of a closed oriented manifold $M$. They introduced the Chas-Sullivan product $$H_*(LM)\otimes H_*(LM)\to H_{*-\dim M}(LM)$$ and the so called BV operator $\Delta\colon H_*(LM)\to H_{*+1}(LM)$. In \cite{Goresky_2009}, the loop coproduct is introduced, which is a degree $n-1$ operation on $H_*(LM, M)$, where $M\subset LM$ is embedded via constant loops.



Following \cite[Sec. 1]{naef2022string}, String Topology is at the intersection of several fields of mathematics, including the following: 
\begin{itemize}
    \item String Topology has an interpretation in Symplectic Geometry: the Floer homology of the cotangent bundle $T^*M$ is isomorphic to $H_*(LM)$ and the loop product corresponds to the pair of pants product in Floer homology, cf.~\cite{abbondandolo2010floer} and for a more general picture~\cite{cieliebak2009role}. 
    \item The homology of $LM$ and string operations can be used to study closed geodesics on Riemannian manifolds via infinite dimensional Morse theory of the energy functional. Gromoll and Meyer \cite{gromoll1969periodic} showed for a closed simply connected manifold $M$, if the sequence of Betti numbers of $LM$ is unbounded, then there exist infinitely many geometrically distinct periodic geodesics in $M$. More recently, the loop product has been used to study closed geodesics as well, see for instance \cite{Goresky_2009}. 
    \item Families of higher operations can be defined on $H_*(LM)$. This leads to the study of structures which organize families of operations, such as properads and 2-dimensional field theories, cf.~\cite{godin2007higher}, \cite[I.2, I.3]{cohen2006string}.
\end{itemize}

%TODO: Image of Chas-Sullivan Product here
The Chas-Sullivan product is constructed as follows. Consider the following maps: $$LM\times LM \xfrom{i} LM\times_M LM \xto{c} LM$$
where $LM\times_M LM\subset LM\times LM$ is the space of pairs of loops with the same base point, $i$ is the inclusion map and $c$ is the composition of loops. One can construct a pullback map $$i_!^{LM}\colon H_*(LM\times LM)\to H_{*-n}(LM\times_M LM)$$
The construction of $i_!^{LM}$ is involved and there are several approaches, for example using the Thom isomorphism \cite{cohen2006string}, \cite{hingston2017product} or via transversality \cite{chataur2005bordism}. \cite{chas1999string} interpret this map as follows: if a homology class $a$ in $LM\times LM$ is represented by a manifold $A$ which is transverse to the submanifold $LM\times_M LM\subset LM\times LM$, then $$i_!^{LM}(a) = [A\isect LM\times_M LM].$$ The Chas-Sullivan product is then defined as the composition $$c_*\comp i_!^{LM}\colon H_*(LM)\otimes H_*(LM)\iso H_*(LM\times LM)\to H_{*-\dim M}(LM)$$
Chas and Sullivan exhibit another operator on $H_*(LM)$. Denote by $\rho\colon S^1\times LM\to LM$ the $S^1$-action on $LM$, given by $(t,\gamma)\mapsto \gamma(\blank+t)$. Let $[S^1]\in H_1(S^1)$ be the fundamental class of $S^1$. The so called BV operator on $H_*(LM)$ is the composition 
$$\Delta\colon H_*(LM)\xto{[S^1]\times \blank} H_{*+1}(S^{1}\to LM)\xto{\rho_*} H_{*+1}(LM)$$
Together with the loop product this forms a Batalin-Vilkovisky (BV) algebra on $H_*(LM)$. 


\subsection{Results and Outline}
The main goal of this thesis is to give a clean presentation of the construction of the loop product and BV operator in \cite{naef2019string} and to show that these operations yield a co-BV algebra on cohomology.

We work in cohomology throughout the thesis, this means that the loop product $$H_*(LM)\otimes H_*(LM)\to H_{*-\dim M}(LM)$$ on homology turns into a coproduct $$H^*(LM)\otimes H^*(LM)\from H^{*-\dim M}(LM)$$ on cohomology. Following \cite{naef2019string} we occasionally write maps on cohomology from right to left. The homological BV algebra structure is turned into the structure of a co-BV algebra on cohomology.
\begin{definition}
    Let $V$ be a graded vector space.
    \begin{enumerate}
        \item A \emph{Batalin-Vilkovisky (BV) algebra}\index{BV algebra} on $V$ is given by a degree $0$ product $V\otimes V\to V$ and a degree $-1$ operator $\Delta\colon V\to V$, such that 
        \begin{itemize}
            \item the product is unital, associative and graded commutative
            \item $\Delta^2 = 0$ and $\Delta(1) = 0$
            \item The following seven-term identity holds:
            \begin{align*}
                0 = &\Delta(abc) - \Delta(ab)c - (-1)^{\abs{a}}a\Delta(bc) - b (-1)^{(\abs{a}+1)\abs{b}} b\Delta(ac) \\ &+ \Delta(a) bc + (-1)^{\abs{a}}a\Delta(b) c + (-1)^{\abs{a}+\abs{b}}ab\Delta(c)
            \end{align*}
            Equivalently, the \emph{Gerstenhaber bracket} $$(a, b) \defeq \Delta(ab) - \Delta(a) b - (-1)^{\abs{a}} a\Delta(b)$$
            satisfies the Leibniz identity
            \begin{align*}
                (a,bc) = (a, b) c + (-1)^{\abs{b}\abs{c}} (a, c) b
            \end{align*}
        \end{itemize}
        \item A \emphi{co-BV algebra} on $V$ is given by a degree $0$ coproduct map $\theta\colon V\to V\otimes V$ and a degree $1$ operator $\Delta \colon V\to V$, such that
        \begin{itemize}
            \item the coproduct $\theta$ is counital with counit $\epsilon$, coassociative and graded cocommutative
            \item $\Delta^2 = 0$ and $\epsilon\comp \Delta = 0$
            \item The cobracket 
            \begin{align*}
                S&\colon V\to V\otimes V \\ S&\defeq \theta\comp \Delta + (\Delta\otimes \id + \sigma \otimes  \Delta) \theta
            \end{align*}
            where $\sigma \colon V\to V, a\mapsto (-1)^{\abs{a}}a$, satisfies the co-Leibniz identity
            \begin{align*}
                (\theta\otimes \id) S = (\id\otimes S)\theta + (\id\otimes \tau)(S\otimes id)\theta
            \end{align*}
            where $\tau\colon V\otimes V\to V\otimes V, v\otimes v'\mapsto (-1)^{\abs{v}\abs{v'}}v'\otimes v$.
        \end{itemize}

    \end{enumerate}
\end{definition}

The \emph{Hochschild homology} of a differential graded algebra $A$ is the homology of the complex $CH_*(A, A) = B(A, A, A)\otimes_A A$, where $BC(A, A, A)$ is the two-sided bar construction, cf.\ \cref{subsec:bar_construction}. If $A$ is a Frobenius algebra (cf.~\cref{subsec:poincare-algebra}), one can define a coproduct on $CH_*(A, A)$ by mapping 
$$a_0 \otimes \dots \otimes a_n \otimes a \mapsto \sum_{j=0}^n \sum  \pm (a_0\otimes\dots\otimes a_j) a'_k \otimes (a_{j+1}\otimes\dots\otimes a_n)_{a''_k}$$
where the coproduct of $A$ is written as $\Delta(a) = \sum_{k} a'_k \otimes a''_k$.
The Connes-Rhinehart differential on the Hochschild complex is given by 
$$B(a_0\otimes\dots a_n\otimes a) = \sum_{j=0}^n \pm (a_j\otimes \dots \otimes a_n \otimes a\otimes a_0 \otimes a_{j-1}) \otimes 1$$
One can show \cite{abbaspour2015algebraic} that these two operations induce the structure of a co-BV algebra on $H^*(A, A)$.

\begin{definition}
For a graded vector space $V$ and $k\in \Z$, we denote by $V[k]$ the \emph{shifted graded vector space} with $V[k]_n = V_{k+n}$. If $V$ is a chain complex, then we define a differential on the \emph{shifted complex} $V[k]$ by $d_{V[k]} = (-1)^k d_V$.
\end{definition}

Let $M$ be a simply connected closed oriented manifold. Using cohomology with coefficients in a field of characteristic $0$, one can choose a Frobenius algebra $A$ whose cohomology is the cohomology of $M$, such that the coproduct is the intersection coproduct $H^{*-n}(M)\to H^{*}(M)\otimes H^*(M)$. Our main goal is showing the following theorem:
\begin{theorem*}
    The loop product (cohomology coproduct) and the co-BV operator form a co-BV algebra on $H^*(LM)[n]$. There are isomorphisms $$HH_*(A, A)\iso H^*(LM)$$ for $A=C^*(M)$ and $A=\Omega^*(M)$ which preserve the co-BV operations.
\end{theorem*}


Naef and Willacher frame their results using the de Rham complex in \cite{naef2019string}, even on infinite dimensional spaces such as the path space $PM$ and loop space $LM$. In \cref{sec:diffeological} we explain the framework of diffeological spaces, which allows us to define de Rham forms on more general spaces than finite dimensional manifolds. The arguments in \cite{naef2019string} are possible because the de Rham complex $\Omega^*(X)$ of a diffeological space $X$ has the following properties: 
\begin{itemize}
    \item Its product is graded commutative on the chain level.
    \item It has umkehr maps on the chain level for projections $\Delta^n \times X\to X$, given by the fiber integral. 
    \item It is quasi-isomorphic to $C^*(X)$ for nice spaces (though not in general, see \cref{subsec:diffeological-de-rham}). 
\end{itemize}
The singular cochain complex almost satisfies these requirements as well, as the analogue of the fiber integral is the slant product, see \cref{subsec:slant_product}, but the product is only homotopy commutative. 
In the main part of this thesis, we develop the results of \cite{naef2019string} on de Rham forms, as well as analogous results using the singular cochain complex. 


Let $G$ be a finite graph and $M$ a simply connected closed manifold. Then there is a space associated to $G$ which we also denote by $G$ and we can consider the mapping space $\Map(G, M)$. Let $A$ be a differential graded algebra which models $M$, such as $C^*(M)$ or $\Omega^*(M)$. In \cref{sec:cochain-models} we construct a chain complex $A^{\otimes G}$. % whose cohomology is isomorphic to the cohomology of $\Map(G, M)$.
We will show the following in \cref{subsec:graph-models}: 
\begin{theorem}\label{thm:intro-graph-model}
    \begin{enumerate}
        \item The assignment $(A, G)\mapsto A^{\otimes G}$ extends to a contravariant functor in $A$ which preserves quasi-isomorphisms and a covariant functor in $G$ 
        \item Let $M$ be a closed simply connected manifold.
        \begin{enumerate}
            \item There is a natural quasi-isomorphism $$I\colon \Omega^*(M)^{\otimes G}\to \Omega^*(\Map(G, M))$$
            \item In coefficients in a field of characteristic $0$, there exists a natural zigzag of quasi-isomorphisms $$C^*(M)^{\otimes G}\to\dots\from C^*(C^0(G, M))$$
        \end{enumerate}
    \end{enumerate}
\end{theorem}
This construction generalizes the isomorphism between the Hochschild cohomology and the loop space cohomology $HH_*(A, A)\iso H^*(LM)$ and the bar construction $\BC(A, A, A) \quiso C^*(PM)$. The map $I$ is a generalization of the iterated integral map due to Chen~\cite{chen1977iterated}. The main tool for this construction is the left derived tensor product $M\otimes^L_A N$ of two differential graded modules over a differential graded algebra $A$, which allows us to construct a cochain complex for pullbacks of spaces. More precisely, consider the following diagram of topological spaces.
\begin{center}
    \begin{tikzcd}
        E\times_B X \arrow[d] \arrow[r] & E \arrow[d]{p} \\
        X \arrow[r] & B
    \end{tikzcd}
\end{center}
We will use the following well known result (cf.\ \cref{thm:pullback-pushout}) for cohomology with coefficients in a field of characteristic $0$:
\begin{theorem}
    Assume $p$ is a Serre fibration with fiber $F$, the space $E$ is path connected, $B$ and $X$ are simply connected, and either $B$ or $F$ is of finite rational type. Then the natural map
    $$C^*(X)\otimes_{C^*(B)}^L C^*(E) \to C^*(E\times_B X)$$
    is a quasi-isomorphism. 
\end{theorem}
The left derived tensor product can be computed by the two sided bar construction $B(M, A, N)$, which we recall in \cref{subsec:bar_construction} and \cref{subsec:bar-constr-derived}. Finally, we will show in \cref{lem:model-concatenation} that the concatenation of paths is given by the deconcatenation coproduct on $\BC(A, A, A)$.
% The main building block is the two sided bar construction $\BC(M, A, N)$ of modules $M$ and $N$ over $A$, due to two reasons: For one, the bar construction $\BC(A, A, A)$ yields a particularly nice model of the path space $PM =\Map(I, M)$. On the other hand, the two sided bar construction allows us to compute the cohomology of certain pullbacks of topological spaces. 
% Using the two sided bar construction $B(M, A, N)$ and the left derived tensor product $M\oplus_A^L N$ of modules over a differential graded algebra $A$, one  


In \cref{sec:string-ops-via-cfg-spaces} we introduce a construction of the umkehr map $i_!^{LM}\colon H_*(LM\times LM)\to H_{*-n}(LM\times_M LM)$ due to \cite{naef2019string}, and the analogous construction of the cohomological counterpart $i^!_{LM}\colon H^{*-n}(LM\times_M LM)\to H^*(LM\times LM)$. This construction relies on the compactification of the configuration spaces of two points. We justify that this construction yields the same umkehr map as the classical construction using tubular neighborhoods and the Thom isomorphism. An additional result is the following theorem, cf~\cref{thm:loop-intersection-map-product}, which shows that the umkehr map $i^!_{LM}$ can be constructed algebraically from the corresponding umkehr map $i^!\colon H^{*-n}(M)\to H^*(M\times M)$. 
\begin{theorem}
    If $M$ is simply connected, then the following diagram commutes in $D(Ch)$ and the vertical maps are quasi-isomorphisms:
    \begin{center}
    \begin{tikzcd}
        C^*(LM\times LM) & \ar[l, swap, "i^!_{LM}"] C^{*}(LM\times_M LM)[-n]  \\
        \uar[swap, "\quiso"] C^*(LM\times LM) \otimes^L_{C^*(M\times M)} C^*(M\times M) & \uar[swap, "\quiso"]\lar[swap, "\id\otimes i^!"] C^*(LM\times LM) \otimes^L_{C^*(M\times M)} C^*(M)[-n]
    \end{tikzcd}
    \end{center}
\end{theorem}
The maps $i^!$ and $i^!_{LM}$ are induced by zigzags of chain maps, in \cref{subsec:derived} we recall that in the derived category of chain complexes one can interpret such zigzags as maps instead. 



In \cref{sec:loop-models} we give models of the loop operations which only depend on a differential graded algebra $A$ which computes the cohomology of $M$. Recall that for an oriented closed manifold $M$, the intersection coproduct $H^{*-n}(M)\to H^*(M)\otimes H^*(M)$ together with the cup product, induces a Frobenius algebra structure on $H^*(M)$. In \cref{subsubsec:frobenius-algebra-models} we recall that by \cite{lambrechts2008poincare}, if $M$ is additionally simply connected, there is a Frobenius algebra $A$ which is quasi-isomorphic to $\Omega^*(M)$ and which induces the Frobenius algebra structure on $H^*(M)$. Using this chain level intersection map, we can construct chain level models for all the maps in the construction of the loop product in \cref{sec:string-ops-via-cfg-spaces}, using the results from \cref{sec:cochain-models} on the algebras $A^{\otimes G}$. This allows us to show that the isomorphism $HH_*(A, A)\iso H^*(LM)$ preserves the loop product (cohomology coproduct). A similar analysis shows that the BV operators are preserved. In particular one can conclude the co-BV relation on $H^*(LM)$ from an algebraic computation on the Hochschild complex. 


\section{Preliminaries}

\subsection{Derived Category of Chain Complexes}\label{subsec:derived}

We will use the language of derived categories throughout this work, specifically in the case of derived chain complexes. The following is a very elementary introduction, readers versed in derived categories should skip this subsection. For a pedagogical introduction we refer to \cite{thomas2001derived}. For a formal treatment, see \cite{gelfand2013methods} or \cite{weibel1994introduction}. 

The motivation for us to use derived categories is the following: We will regularly work with maps on the homology of chain complexes $\cdot\to\cdot\from\dots\to\cdot$ which are induced by zigzags of chain maps, with the reverse maps being quasi-isomorphisms. Such a zigzag induces a map in homology, but by considering only the induced map on homology, we lose the information that these maps were originally induced by chain maps. Using derived categories allows us to consider such zigzags as morphisms and thus allows us to put them into commutative diagrams, as we would on homology. At the same time we retain the information that these maps were induced by chain maps to a greater degree.

Let $Ch=Ch(R)$ be the category of chain complexes of modules over a ring $R$. 
The derived category $D(Ch)$ of $Ch$ is the localization of the category $Ch$ at the collection of quasi-isomorphisms, in other words it is the category obtained from $Ch$ by formally adjoining two-sided inverses to quasi-isomorphisms.

\begin{theorem}[Universal Property of $D(Ch)$]\label{thm:derived-universal-prop}
    There exists a category $D(Ch)$ and a functor $D\colon Ch\to D(Ch)$ which maps quasi-isomorphisms to isomorphisms, such that any functor $F\colon Ch\to C$ which maps quasi-isomorphisms to isomorphisms, factors uniquely through $D$.  
\end{theorem}
This is \cite[Thm III.2.1]{gelfand2013methods}.

Any two categories satisfying this property are equivalent and for our purposes we may use this as a definition. 

\begin{proposition}
    \begin{enumerate}[(1)]
        \item If a chain map $f\colon A\to B$ is a quasi-isomorphism and has a one-sided inverse $g$, then $D(f)D(g) = \id_{D(B)}\in D(Ch)$ and $D(g)D(f)=\id_{D(A)}\in D(Ch)$, i.e.\ the maps $D(f)$ and $D(g)$ are two-sided inverses in the derived category.
        \item If $f, g\colon A\to B$ in $Ch$ are chain homotopic, then $D(f) = D(g)$.  
    \end{enumerate}
\end{proposition}
\begin{proof}
    (1) is trivial. We show (2). Define a complex $C$, which as a graded vector space is $A\oplus A[1]\oplus A$, with differential $(a, a', a'')\mapsto (da+a', da', da''+a')$. Let $\iota_{0}, \iota_1\colon A\to C$ be the inclusions into the first resp.\ third direct summand. Then $\iota_0$ and $\iota_1$ are both quasi-isomorphisms with the same one-sided inverse, namely the chain map $C\to A$ given by $(a, a', a'')\mapsto a-a''$. Hence $D(\iota_1) = D(\iota_2)$ by (1). Let $P$ be a homotopy between $f$ and $g$, then there is a chain map $\gamma_P\colon C\to B$ given by $f + P+ g$. Now $\gamma_P\iota_1 = f$ and $\gamma_P\iota_2=g$ and we conclude $D(f) = D(g)$.
\end{proof}

\begin{remark}\label{rmk:derived-notation}
    We often omit the explicit mention of the functor $D$. If we say that a map or a diagram in $Ch$ has a certain property in $D(Ch)$, we mean that its image under the functor $D$ has said property. Any zigzag of maps with quasi-isomorphisms in the reverse direction induces a map in $D(Ch)$, hence we may arrive at diagrams of which one cannot ask to commute at the chain level, but which can commute in $D(Ch)$.
\end{remark}

\begin{remark}
    By \cref{thm:derived-universal-prop}, the cohomology functor $H^*$ factors through $D(Ch)$. Thus if two chain maps are equal in $D(Ch)$, they are also equal on cohomology and if two chain complexes are isomorphic in $D(Ch)$ then they have isomorphic cohomology. The converse is not necessarily true.
\end{remark}

\begin{example}
    Let $R=k$ be a field and $C$ a chain complex, then the tensor product functor $\blank\otimes C\colon Ch\to Ch$ preserves quasi-isomorphisms, since $C$ is degreewise free, (cf.\ the proof of \cref{thm:bar-quiso}). This means that $D(\blank\otimes C)\colon Ch\to D(Ch)$ maps quasi-isomorphisms to isomorphisms, so by \cref{thm:derived-universal-prop} it factors as $Ch \xto{D} D(Ch)\xto{\blank\otimes C} D(Ch)$ through a functor which we also denote by $\blank\otimes C$. Given morphisms $f, g\colon A\to B$ in $Ch$, which are equal in $D(Ch)$, we find that $f\otimes \id_C = g\otimes\id_C$ in $D(Ch)$.
\end{example}


\subsection{Loop Product}\label{subsec:loop-product-classical}
Let $M$ be an $n$-dimensional compact oriented manifold and denote by $LM = C^0(S^1, M)$ the free loop space of $M$. The \emphi{loop product} is a degree $-n$ product on the homology of the loop space 
\begin{align*}
    H_*(LM)\otimes H_*(LM)\to H_{*-n}(LM)
\end{align*}
Denote by $LM\times_M LM$ the subspace of $LM\times LM$ of pairs $(\gamma, \gamma')$ such that $\gamma(0) = \gamma'(0)$. Such loops can be composed to obtain a new loop. Denote by $c\colon LM\times_M LM\to LM$ the composition of loops, given by tracing out the first loop on the interval $[0, \frac 12]$ and the second loop on the interval $[\frac 12, 1]$. Denote by $i\colon LM\times_M LM\to LM$ the inclusion map. 

\begin{construction}\label{constr:loop-product-classical}
The loop product is the composition of three maps
\begin{align*}
    \bullet\colon H_*(LM)\otimes H_*(LM)\xto{\times} H_{*}(LM\times LM)\xto{i_!^{LM}} H_{*-n}(LM\times_M LM)\xto{c_*} H_{*-n}(LM)
\end{align*}
where the map $\times$ is the Künneth isomorphism (we work with coefficients in a field) and the map $i_!^{LM}$ is an intersection map that will be explained in more detail in the following. 
\end{construction}

\begin{figure}[ht]
    \centering
    \includesvg[width=0.9\textwidth]{img/loop-product}
    \caption{Depiction of the Loop Product. Two families of loops are depicted. To construct the loop product one takes the locations where the base points are equal and concatenates the loops there. }
\end{figure}

\begin{remark}
The intersection map $i_!^{LM}$ can be thought of as taking the intersection of a homology class in $LM\times LM$ with the space $LM\times_M LM$. This is how Chas and Sullivan originally define it in \cite{chas1999string}, assuming the homology class is represented by a submanifold of $LM\times LM$ which is transverse to $LM\times_M LM$. 
We will use a construction using the Thom isomorphism and tubular neighborhoods, following \cite{cohen2002homotopy}. See \cref{subsec:thom-iso} for a review of the Thom isomorphism. For our construction we will use that the Thom isomorphism of an oriented vector bundle is the umkehr map of the zero section, regarded as a map from the base space into the disk bundle. As this is an umkehr map, one can think of it as taking the intersection of a homology class with the boundary. Thus we need a vector bundle such that the inclusion of the zero section into the total space can be related to the inclusion $LM\times_M \to LM\times LM$. 
\end{remark}

To begin the construction of $i_!^{LM}$, consider the pullback diagram
\begin{center}
\begin{tikzcd}
    LM\times_M LM \dar["ev"] \rar & LM\times LM\dar["ev\times ev"]\\
    M \rar["\Delta"] & M\times M
\end{tikzcd}
\end{center}

Choose a Riemannian metric on $M$. Denote by $\nu(\Delta)$ the normal bundle of the diagonal $\Delta\colon M\to M\times M$, then there is an isomorphism $TM\iso \nu(\Delta)$. Since $M$ is compact, let $\epsilon>0$ be small enough such that the exponential map $\mathrm{exp}$ induces a diffeomorphism $D_\epsilon M\to \nu(\Delta)\to N$, where $D_\epsilon M$ is the subbundle of $TM$ consisting of vectors of length $<\epsilon$ and $N\subset M\times M$ is an open neighborhood of the diagonal $\Delta M\subset M\times M$. 

The pullback bundle $ev^*(D_\epsilon M)$ of $D_\epsilon M$ along the evaluation map $LM\times_M LM\to M$ is a rank $n$ bundle on $LM\times_M LM$. Since $M$ is oriented, the pullback bundle is oriented. Let $LM\times LM|_N = (ev\times ev)^{-1}(N)\subset LM\times LM$. By \cite[p. 8]{cohen2002homotopy} there is a homotopy equivalence between 
\begin{equation}ev^*(D_\epsilon M) \quiso LM\times LM|_N\label{eq:hteq-loop-product}\end{equation}
which maps the complement of the zero section to the complement of $LM\times_M LM\subset LM\times LM|_N$. For brevity we write $H_*(X, X\setminus A) = H_*(X | A)$. There is an isomorphism in homology 
\begin{align*}
\eta\colon H_*(LM\times LM | LM\times_M LM) \xfrom{\iso} H_*(LM\times LM |_N, LM\times LM|_{N_0}) &\\ \xto{\iso} H_*(ev^*(TM), ev^*(TM)_0)&
\end{align*}
where the first map is an excision isomorphism and the second map is induced by the homotopy equivalence \ref{eq:hteq-loop-product}, $ev^*(TM)_0$ is the total space of the bundle minus the zero section.


% \begin{lemma}
%     There is a homotopy equivalence $ev^*(D_\epsilon M) \quiso LM\times LM|_N$, which maps the zero section to $LM\times_M LM$ and the subset $ev^*(U_\epsilon M)\subset ev^*(D_\epsilon M)$ to $LM\times LM|_{\partial N}\subset LM\times LM|_N$. 
% \end{lemma}
% \begin{proof}
%     We first construct the map $ev^*(D_\epsilon M)\to LM\times LM|_N$. For $x\in M, X\in T_xM$, denote by $\lambda_X\colon I\to T_xM$ the straight line path from $0$ to $X$, and by $\lambda^{-1}_X$ the reverse path from $X$ to $0$. Then given $(X, \gamma)\in ev^*(D_\epsilon M)$ with $X\in T_{ev(\gamma)}, \gamma\in LM\times_M LM$, we obtain an element of $LM\times LM|_N$ as the threefold composition of paths  $c(J(\lambda),  \gamma, J(\lambda^{-1}))$. 
    
%     For the converse, consider the diagram
%     \[\begin{tikzcd}
%         LM\times_M LM \coprod LM\times LM|_{\partial N} \dar \ar[rr] && ev^{*}(D_\epsilon M) \dar\\
%         LM\times LM|_N \ar[dashed, urr]\rar & N \rar & D_\epsilon M
%     \end{tikzcd}\]
%     The map $ev^{*}(D_\epsilon M)\to D_\epsilon D$ is a fibration since it is a pullback of the fibration $LM\times_M LM\to M$. The map $LM\times_M LM\to LM\times LM|_N$  is the pullback of the cofibration $M\injto N\subset M\times M$ along a fibration, hence it is a cofibration, see e.g.~\cite[Lemma 66]{Strom2011ModernCH}. Similarly, the inclusion $LM\times LM|_{\partial N} \to LM\times LM|_N$ is a cofibration, thus the sum is also a cofibration. Thus there exists a lifting map $LM\times LM|_N \to ev^{*}(D_\epsilon M)$. 
    
%     The composition $ev^{*}(D_\epsilon M) \to LM\times LM|_N \to ev^{*}(D_\epsilon M)$ is a lift of the identity $D_\epsilon M\to N\to D_\epsilon M$, hence it is homotopic to the identity, similar for interchanged composition.  
% \end{proof}

Assume that $TM$ is oriented, then the bundle $ev^*(TM)$ is oriented and thus has a Thom class $u_{LM\times_M LM}\in H^*(ev^*(TM), ev^*(TM)_0)$. One checks that this is the pullback of the Thom class $u\in u\in H^n(D_\epsilon M, (D_\epsilon M)_0) \iso H^n(TM, (TM)_0)$ of $M$ along the map of pairs $(ev^*(TM), ev^*(TM)_0) \to (TM, (TM)_0)$. The Thom isomorphism $\phi$ of the bundle $ev^*(TM)$ is the map $$\phi\colon H_*(ev^*(TM), ev^*(TM)_0) \xto{\capp u_{LM\times_M LM}} H_{*-n}(ev^*(TM)) \to H_{*-n}(LM\times_M LM).$$

\begin{definition}\label{def:loop-intersection-classical}
The intersection map $i_!^{LM}$ is the following composition of maps: 
\begin{align*}
    i_!^{LM}\colon &H_*(LM\times LM) \to H_*(LM\times LM \mid LM\times_M LM) \\ &\xto{\eta} H_*(ev^*(TM), ev^*(TM)_0) \xto{\phi} H_{*-n}(LM\times_M LM) &
\end{align*}
\end{definition}

\begin{definition}
    Analogously, taking the cup product instead of the cap product for the Thom isomorphism, one constructs an intersection map $$i^!\colon H^*(LM\times LM)\from H^{*-n}(LM\times_M LM)$$
    \begin{align*}
        i^!_{LM}\colon H^*(LM\times LM) \from H^*(LM\times LM \mid LM\times_M LM) &\\ \xfrom{\eta} H^*(ev^*(TM), ev^*(TM)_0) \xfrom{\phi^*} H^{*-n}(LM\times_M LM) &
    \end{align*}

    on cohomology and this leads to a coproduct operation on cohomology
    \begin{align*}
        \Delta\colon H^*(LM)\otimes H_*(LM)\from H^{*-n}(LM)
    \end{align*}
    defined as the composition
\end{definition}

\subsection{Loop Coproduct (Cohomology Product)}\label{subsec:loop-coproduct-classical}

We now recall the definition of the loop coproduct: It is a map
\begin{align*}
    H_*(LM, M) \to H_*(LM, M)\otimes H_{*}(LM, M)[n-1]
\end{align*}
where $H_*(LM, M)$ denotes the homology relative to constant loops, via the inclusion $M\to LM$. Recall that $[n-1]$ denotes the shift of a graded vector space, where $V[k]_n = V_{k+n}$.

We denote by $\ocircle_2$ the circle with two marked points, constructed by gluing two copies of the unit interval. Let $C^0(\ocircle_2, M)$ be the space of paths $\gamma, \gamma'\in PM$ such that $\gamma(1) = \gamma'(0)$ and $\gamma(0) = \gamma'(1)$, i.e.\ the loop space with two marked points. There is an evaluation map $\Map(\ocircle_2, M)\to M\times M$.

The \emph{splitting map} $s$ is the map of spaces 
\begin{align*}
    s\colon I\times LM & \to C^0(\ocircle_2),\\
    (t, \gamma) &\mapsto s\mapsto (s\mapsto \gamma(st), s\mapsto \gamma(t + s(1-t)))
\end{align*}
which splits a loop into the two parts defined on the intervals $[0, t]$ and $[t, 1]$ respectively and reparametrizes both parts to the interval $[0, 1]$. There are two embeddings $LM\to  C^0(\ocircle_2, M)$ by mapping a loop $\gamma$ to the pair $(\gamma, x)$ where $x$ is the constant path at $x=\gamma(0)$. We denote the union of the images of these maps by $LM\coprod_M LM$. The splitting map is a map of pairs
\begin{align*}
    s\colon (I\times LM, \partial I\times LM \union I\times M) \to ( C^0(\ocircle_2, M), LM\coprod_M LM).
\end{align*} 

We obtain the following composition
\begin{align*}
    \tilde s_*\colon C_*(LM, M) \xto{\times [I]} C_{*+1}(I\times LM, \partial I\times LM\union I\times M) \xto{s_*} C_{*+1}( C^0(\ocircle), LM\coprod_M LM)
\end{align*}
where $[I]$ is a representative of the fundamental class of the pair $(I, \partial I)$.

Consider the pullback diagram:
\[\begin{tikzcd}
    LM\times_M LM \dar \rar["j"] &   C^0(\ocircle_2, M) \dar \\
    M \rar["\Delta"] \rar & M\times M
\end{tikzcd}\]
One can again construct an umkehr map $j_!$ on homology. In fact, one can construct this relative to the subspace $LM\coprod_M LM$:
$$ j_!\colon H_*( C^0(\ocircle_2, M), LM\coprod_M LM) \to H_*(LM\times_M LM, LM\coprod_M LM)$$

\begin{definition} 
    The \emph{Loop Coproduct} is the following composition on homology:
    \begin{align*}
        H_*(LM, M) &\xto{\tilde s_*} H_{*+1}( C^0(\ocircle_2, M), LM\coprod_M LM) \\ &\xto{j_!} H_{*+1-n}(LM\times_M LM, LM\coprod_M LM) \\ &\to H_{*}(LM, M)\otimes H_*(LM, M)[1-n]
    \end{align*}
    where the last map is the Künneth isomorphism.
\end{definition}

\begin{definition}
Analogously, one defines a product on homology $$H_*(LM, M) \from H_{*}(LM, M)\otimes H_*(LM, M)[1-n].$$
\end{definition}





\section{Diffeological Spaces and Cohomology}\label{sec:diffeological}

The theory of diffeological spaces is a generalization of the theory of differentiable manifolds. It is a way to define differential forms on mapping spaces such as the path and the loop space of a manifold. These forms have the same algebraic operations of pullback, wedge product and exterior derivative as in the case of smooth manifolds. There is a de Rham map, which in nice cases, though not in general, provides a quasi-isomorphism to the singular cohomology. There is also a fiber integration map on de Rham forms, e.g.\ in the case of projections $M\times X\to X$ with closed oriented manifolds $M$ and diffeological spaces $X$. In contrast to e.g.\ the singular cochain algebra, the de Rham algebra is commutative on the chain level, which allows us to apply the pushout pullback lemma \ref{thm:pullback-pushout}. 

In the theory of diffeological spaces, smoothness of a space $X$ is encoded using so called plots, which are distinguished maps from open euclidean sets of arbitrary dimension. Plots then take the role of the smooth maps from euclidean sets into $X$, so in contrast to the charts of manifolds, plots are only smooth, not diffeomorphisms in the resulting theory. Since it is easier to exhibit smooth maps than diffeomorphisms, one can equip more general spaces than manifolds with the structure of a diffeological space. Individual diffeological spaces can have bad properties compared to manifolds, for example one can consider infinite dimensional spaces or arbitrary quotients of manifolds. On the other hand, the category of diffeological spaces has good properties: it is closed under products, coproducts, quotients, subsets and there is a diffeology on the mapping space between diffeological spaces. 

There is a related notion of so called differentiable spaces, coined by Chen \cite{chen1973iterated}, where he uses convex euclidean sets instead of open euclidean sets to test smoothness. We work with diffeological spaces throughout this work. 

We begin by outlining the definition of diffeological spaces and differential forms in \cref{subsec:diffeological}. For a diffeological space with a compatible topology, we compare the smooth singular complex and the topological singular complex in \cref{subsec:diffeology-cohomology}. We then discuss how the cohomology of the de Rham complex of a diffeological space relates to the cohomology of the topological space in  \cref{subsec:diffeological-de-rham}. In \cref{subsec:diffeological-path-spaces} we apply the theory to the case of mapping spaces such as $PM$ and $LM$. In \cref{subsec:fiber-integration} we discuss the fiber integration of differential forms, which generalizes to the context of diffeological spaces in certain settings. 

The reader may skip this section on first reading to come back later when questions arise. 



\subsection{Diffeological Spaces}\label{subsec:diffeological}
We refer to \cite{iglesias2013diffeology} for the material in this subsection.

\begin{definition}
    Let $X$ be a nonempty set, a \emphi{diffeology} $\mathcal D=\mathcal D_X$ on $X$ is a set of so called \emphi{plots} $P\colon U\to X$ defined on open subsets $U\subset \R^n$, where $n$ is not fixed, such that 
    \begin{enumerate}
        \item every constant map $U\to \{x\}\subset X$ is a plot,
        \item for every map $P\colon U\to X$, if for every point $r\in U$ there exists an open neighborhood $V$ of $r$ such that $P|_V$ is a plot, then $P$ is also a plot,
        \item for every plot $P\colon U\to X$ and every smooth map $F\colon V\to U$, the pullback map $P\comp F\colon V\to X$ is a plot.
    \end{enumerate}
    A set together with a specified diffeology is called a \emphi{diffeological space}. 
\end{definition}


\begin{example}\begin{enumerate}[(i)]
    \item Any topological space can be equipped with its topological diffeology, in which the plots are all continuous maps $U\to X$.
    \item Any smooth manifold $M$ is a diffeological space, where the plots are the smooth maps $U\to M$ for every open $U\subset\R^n$ for all $n$.
    \item Given two diffeological spaces $X, Y$, the cartesian product $X\times Y$ is a diffeological space, where a map $P\colon U\to X\times Y$ is a plot if and only if the projections $\pi_X \comp P \colon U\to X$ and $\pi_Y\comp P\colon U\to Y$ are plots of $X$ resp.\ $Y$.
    \item Given a diffeological space $X$ and a subset $A$, one can define the diffeology on $A$ by taking plots of $A$ to be those plots of $X$ which map into $A$.
\end{enumerate}\end{example}
\begin{definition}
    Let $X$ and $X'$ be two diffeological spaces. A map $f\colon X\to X'$ is said to be \emph{smooth}\index{smooth map of diffeological spaces}, if for each plot $P$ of $X$, $f\comp P$ is a plot of $X'$. The set of smooth maps from $X$ to $X'$ is denoted $\mathcal D(X, X')$.
\end{definition}
\begin{proposition}\label{prop:diffeology-mapping-space}
    \begin{enumerate}
        \item There is a diffeology on $\mathcal D(X, X')$ in which a map $P\colon U\to \mathcal D(X, X')$ is a plot if and only if for every plot $Q\colon V\to X$, the parametrization $U\times V\to X', (r,s)\mapsto P(r)(Q(s))$ is a plot of $X'$. 
    
        \item With respect to this diffeology, the evaluation map $ev\colon X\times C^\infty(X, X') \to X'$ and composition map $\mathcal D(X, X')\times \mathcal D(X', X'')\to \mathcal D(X, X'')$ are smooth.
    \end{enumerate}
\end{proposition}

\begin{definition}
    A \emph{differential $k$-form} on a diffeological space $(X,\mathcal D)$ is a $\mathcal D$-indexed collection $\alpha_P$ of differential forms $\alpha_P\in \Omega^k(U_P)$ for each plot $P\colon U_P\to X$, such that for every smooth map $f\colon U\to V$ of euclidean open sets, $f^*\alpha_P = \alpha_{fP}$. The collection of all differential $k$-forms on $X$ is denoted $\Omega^*(X)$.\index{differential form!on diffeological spaces}
\end{definition}
\begin{example}
If $M$ is a smooth manifold with its smooth diffeology, the $k$-forms according to this definition are in bijection with the regular $k$-forms. 
\end{example}

One can define the usual operations on differential forms such as pullback along smooth maps, exterior derivative and wedge product. For instance, the exterior derivative is defined via $d\alpha = \{d\alpha_P\}_P$. These satisfy the usual computation rules, in particular $\Omega^*(X)$ is a differential graded commutative algebra and its cohomology is called the de Rham cohomology of $X$. 

\begin{remark}
    While the definition of differential forms of diffeological spaces is evident, there are multiple definitions of tangent spaces and bundles for diffeological spaces, which in general are not equivalent, see for instance \cite{christensen2015tangent}.
\end{remark}



\subsection{Singular and Smooth Cohomology} \label{subsec:diffeology-cohomology}

In this subsection we introduce the smooth singular cohomology, in preparation for the construction of the de Rham map in \cref{subsec:diffeological-de-rham}. We compare its cohomology with the singular cohomology. A reference is \cite{gurer2014topologie}.

\begin{definition}
    A \emphi{topological diffeological space} $X$ is a space which has both a topology and a diffeology, such that all plots of $X$ are continuous. 
\end{definition}
\begin{definition}
    For a topological diffeological space $X$, 
    \begin{enumerate}
        \item its \emph{singular simplicial set} $S_*(X)$ is the simplicial set which in degree $n$ consists of all continuous maps $\Delta^n\to X$ for all $X$, 
        \item its \emph{smooth simplicial set} $S_*^\infty(X)$ which consists of all smooth simplexes $\Delta^n\to X$ for all $n$. By a smooth simplex we mean that there is a smooth map from a neighborhood of $\Delta^n\subset\R^n$ to the diffeological space $X$. 
    \end{enumerate}
    Denote by $C_*(X)$ resp.\ $C_*^\infty(X)$ the corresponding chain complexes, and similarly $C^*(X)$ resp.\ $C^*_\infty(X)$ the associated cochain complexes. 
\end{definition}
The following lemma gives a sufficient condition for the smooth and continuous homology to be isomorphic.
\begin{lemma}\label{thm:diffeological-singular-cohomology-iso}
    Let $X$ be a topological diffeological space such that for every continuous simplex $\sigma\colon \Delta^n\to X$ with smooth $(n-1)$-faces, $n\geq 1$, there exists a continuous homotopy $h\colon \Delta^n\times I\to X$ relative to the boundary $\partial\Delta^n$ from $\sigma$ to a smooth $n$-simplex of $X$. Then the canonical maps $$C^\infty_*(X) \to C_*(X) \qquad C^*(X) \to C^*_\infty(X)$$ are chain homotopy equivalences. 
\end{lemma}
\begin{proof}[Sketch of proof]
    This theorem is stated in \cite{chen1977iterated}. To prove this one can proceed as in the case of manifolds, cf.\ \cite{parkproof}: one constructs a converse map $C_*(X)\to C_*^\infty(X)$ inductively by mapping each continuous simplex to a fixed smooth approximation, such that the approximations are compatible at the boundary. The topological homotopies of the approximation maps then yield a chain homotopy which witnesses that the two chain maps are homotopy inverse.
\end{proof}

\begin{corollary}
    For every smooth manifold $M$, the canonical maps $$C^\infty_*(X) \to C_*(X) \qquad C^*(X) \to C^*_\infty(X)$$ are chain homotopy equivalences. 
\end{corollary}
\begin{proof}
    One shows (cf.~\cite{parkproof}) the hypothesis of \cref{thm:diffeological-singular-cohomology-iso} using the Whitney approximation theorem, which we state in the following.
\end{proof}

We state Whitney's approximation theorem as in \cite[Theorem 6.26]{lee2003introduction}.
\begin{theorem}[Whitney's Approximation Theorem\index{Whitney Approximation Theorem}, ]
    Let $X$ be a smooth manifold with or without boundary, $Y$ a smooth manifold without boundary, and let $f\colon X\to Y$ be a continuous map, smooth on a closed (possibly empty) subset $A\subset X$. Then $f$ is homotopic relative to $A$ to a smooth map $X\to Y$.
\end{theorem}

% A smooth CW complex is a CW complex in which all attaching maps $\partial D^n\to X^{(n-1)}$ are smooth, hence each skeleton $X^{(n)}$ and $X$ itself is a topological diffeological space.

% By \cite{iwase2020whitney} there is a smooth approximation theorem for smooth CW complexes:
% \begin{theorem}
%     Let $M$ be a smooth manifold and $X$ be a smooth CW complex. Then for a continuous map $f\colon M\to X$, there exists a smooth map $g\colon M\to X$ and a continuous homotopy from $f$ to $g$. If $f$ is smooth on a closed subset $A\subset M$ with an additional assumption that $M$ is compact or $X$ is of finite dimension, then the continuous homotopy can be taken relative to $A$. 
% \end{theorem}

% \begin{corollary}
%     Let $M$ be a smooth manifold and $X$ either a smooth manifold without boundary or a smooth CW complex. Then for the smooth mapping space $\mathcal D(M, X) = \Map(M, X)$, the map 
%     $$C^\infty_*(\mathcal D(M, X)) \to C_*(\mathcal D(M, X))$$
%     is a chain homotopy equivalence. 
% \end{corollary}



\subsection{De Rham Cohomology and De Rham Map} \label{subsec:diffeological-de-rham}
Following \cite{gurer2014topologie}, we construct the de Rham map of diffeological spaces similarly as in the case of smooth manifolds. 

For any smooth simplex $\sigma\colon \Delta^n\to X$ and an $n$-form $\omega\in\Omega^n(X)$, one can define its integral $\int_{\sigma}\omega \defeq \int_{\Delta^n}\sigma^*\omega$. The differential form $\sigma^*\omega\in\Omega^*(\Delta^n)$ is a differential form in the sense of smooth manifolds since $\sigma$ extends smoothly near $\Delta^n$, which implies that the integral is well-defined.

\begin{definition}
    Let $X$ be a diffeological space. The \emph{de Rham comparison map}\index{de Rham map for diffeological spaces} is the map 
    \begin{align*}
        I_{dR}\colon &\Omega^*(X) \to C^*_\infty(X) \\
        &\omega \mapsto \left(\sigma\mapsto \int_{\sigma}\omega = \int_{\Delta^n}\sigma^*\omega\right)
    \end{align*}
    for $\omega\in\Omega^n(X)$ and $\sigma\in S_n^\infty(X)$.
\end{definition}

\begin{proposition}\label{thm:deRham-properties}
    The de Rham comparison map $I_{dR}$ of diffeological spaces is an injective chain map.
\end{proposition}
\begin{proof}
    Let $\sigma\colon\Delta^n\to X$ be a smooth singular simplex and $\omega\in\Omega^*(X)$. The form $\sigma^*\omega$ is a differential form in the classical sense on $\Delta^n$ and it is well known that the de Rham map on smooth manifolds is a chain map, hence $\int_{\Delta^n}d\sigma^*\omega = \int_{\partial\Delta^n}\sigma^*\omega$ and thus $I_{dR}(d\omega)(\sigma) = \delta(I_dR(\omega)(\sigma))$, that is $I_{dR}$ is a chain map in the case of diffeological spaces as well. 
    
    To show injectivity, let $\omega\in \Omega^n(X)$, such that $\int_\sigma \omega = 0$ for all smooth singular simplices $\sigma$. Let $P\colon U\to X$ be a plot of $X$, with $U\subset \R^m$ open, we want to show that $\omega_P = 0\in\Omega^n(U)$. By hypothesis, the integral of $\omega_P$ over any simplex in $U$ is $0$. For $x\in U$, if $\omega_P|_x\neq 0$, then there exist some vectors $X_1,\dots, X_n\in T_xU \iso \R^n$ such that $\omega_P|_x(X_1, \dots, X_n) > 0$ and by continuity, these vectors extend to local vector fields such that $\omega$ evaluates positively in a small neighborhood of $x$. But then, for a simplex $\sigma$ which is tangent to $X_1, \dots, X_n$, the integral of $\omega$ is nonzero, which is a contradiction. 
\end{proof}

\begin{remark}
The de Rham map is not a quasi-isomorphism on general diffeological spaces. A counterexample is the orbit space of the $\R$-action on $S^1\times S^1$ by translation by $t(1, \alpha)$ for some irrational $\alpha\in \R$, see \cite{iglesias2013diffeology}.
\end{remark}

A smooth CW complex is the analogue of a CW complex in the category of diffeological spaces: it is a diffeological space $X$ which is constructed as the colimit of a sequence of diffeological spaces $X_n\to X_{n+1}$ such that $X_{n+1}$ is obtained from $X_n$ by gluing copies of $(n+1)$-disks to $X_n$ along smooth maps on the boundary of the disks. 
\begin{theorem}\label{thm:diffeological-de-rham-cw}
    If $X$ is smoothly homotopy equivalent to a (not necessarily finite) smooth CW complex, then the de Rham map is a quasi-isomorphism.
\end{theorem}
This is theorem 2.2.14 in \cite{gurer2014topologie}, to prove this one shows that the two functors $\Omega^*$ and $C^*_\infty$ satisfy an analogue of the Eilenberg Steenrod axioms for diffeological spaces in place of topological spaces. 

% \begin{corollary}
%     If $X$ is a topological diffeological space which is smoothly homotopy equivalent to a smooth CW complex, then the de Rham cohomology is isomorphic to the singular cohomology, via the chain of quasi-isomorphisms
%     \begin{align*}
%         \Omega^*(X) \injto C^*_{\infty}(X) \surjfrom C^*(X) 
%     \end{align*}
% \end{corollary}



\subsection{Differential Forms on Path Spaces of Manifolds}\label{subsec:diffeological-path-spaces}

In this subsection we consider the diffeology on path spaces and similar constructions of a smooth manifold $M$. \cite{naef2019string} do not explain the diffeological structure on the path space which one should use for their argument. We propose a diffeological structure on the path space that is suitable for our computations and discuss the relation between its de Rham cohomology and singular cohomology. 

A first attempt for a diffeology on the path space $PM$ of $M$ is to use the mapping space diffeology of maps from $I\to M$, as in \cref{prop:diffeology-mapping-space}. The smooth maps from $I$ to $M$ in the diffeological sense are the smooth maps in the classical sense. In this sense, a map $U\to PM$ is a plot if the adjoint map $U\times I\to M$ is smooth. However we want to model the concatenation of paths $c\colon PM\times_M PM\to PM$, and in general the concatenation of two smooth paths is not smooth. Similarly we want to model the splitting map $s\colon I\times LM\to C^0(\ocircle_2, M)$ from \cref{subsec:loop-coproduct-classical}. Thus we need to equip the path and loop space with a diffeological structure such that these maps are smooth. We are unaware of a construction in the literature which provides this. The original construction by Chen \cite{chen1977iterated} is in terms of the diffeological mapping space. There is a another construction due to Gugenheim \cite{gugenheim1977chen}, but with this construction the splitting map is not smooth.

We use piecewise smooth paths, following \cite{stacey2017smooth}. 
\begin{definition}
    We denote by $C^\infty_{ps}(I, M)$ the space of piecewise smooth paths in $M$. We denote by $C^\infty_{ps, b}(I, M)$ be the spaces of piecewise smooth paths in $M$ resp.~piecewise smooth paths with bounded derivatives in $M$, that is, each derivative is a bounded function on its domain of definition.
\end{definition}
In \cite{stacey2017smooth}, these spaces are equipped with natural topologies and it is shown that there is a homotopy equivalence between $C^\infty_{ps, b}(I, M)$ and $C^0(I, M)$. Similarly, one can define a topology and diffeology on the loop space.
\begin{remark}
    Following \cite{stacey2017smooth}, we warn that the circle action $LM\times S^1\to LM$ and reparametrization maps $PM\to PM$ via piecewise smooth maps $I\to I$ do not induce continuous maps on the spaces of piecewise paths resp.~loops with respect to the topology that we have chosen. 
\end{remark}


For a finite set $F\subset I$, denote by $C^\infty_F(I, M)$ the space of continuous maps which are smooth outside $F$, and denote by $C^\infty_{F, b}(I, M)$ the subspace of functions with bounded derivatives. The space $C^\infty_{ps, b}$ is the union of the subspaces $C^\infty_{F, b}(I, M)$.
\begin{definition}
    The diffeology on $C^\infty_{ps}(I, M)$ is the colimit diffeology as a colimit of $C^\infty_{F}(I, M)$ and the diffeology on $C^\infty_{ps, b}(I, M)$ is the subspace diffeology. 
\end{definition}

\begin{remark}
    In the following sections, the symbols $LM$ and $PM$ will be used both for the space of continuous maps and the space of piecewise smooth maps with bounded derivative. It will usually be clear from context which one is used: if we are working with the singular chain complex $C^*$ then it is the former, if we are working with the diffeological de Rham complex $\Omega^*$ then it is the latter. 
\end{remark}


% In \cite{naef2019string} there is no explicit mention of the diffeology chosen on the path space. We work with the space of piecewise smooth paths on $M$ and propose the following diffeology on the space of piecewise smooth paths of $M$. 
% \begin{definition}\label{def:diffeology-piecewise-smooth-paths} 
%     \begin{enumerate}
%         \item Let $U\subset \R^k$ be open, for some $k\in \N$. We will say that a map $f\colon U\times I\to M$ is piecewise smooth along a partition of $I$ depending smoothly on $U$ if the following holds:
%         There exist smooth functions $t_i\colon U\to I$ such that $0=t_0<t_1<\dots<t_r=1$ forms a partition of the unit interval $I$ and the restriction $f|_{\mathcal U_i}$ to $\mathcal U_i = \{(u, t)\in U\times I\mid t_i(u) \leq t\leq t_{i+1}(u)\}$ extends to a plot of $M$ on some open neighborhood of $\mathcal U_i\subset U\times I$ for all $i$. 

%         \item Let $PM$ denote the space of piecewise smooth paths. The \emph{diffeology on the space of piecewise smooth paths} \index{diffeology!on piecewise smooth paths} is given by defining a map $\alpha\colon U\to PM$ to be a plot if the adjoint map $\alpha^\sharp\colon U\times I\to M$ is continuous and is piecewise smooth along a partition of $I$ depending smoothly on $U$.
%     \end{enumerate}
% \end{definition}

% This construction is due to \cite{gugenheim1977chen}, but we have made the following change: we allow the $t_i$ to vary smoothly with $u$ instead of requiring constants, as otherwise the splitting map $s\colon I\times PM\to PM\times_M PM$ is not smooth (cf.\ part (2) of \cref{ex:diffeological-path-space-maps}). Similar constructions apply to the based and free loop space $\Omega M$ and $LM$. More generally, let $G$ be a topological space which is the geometric realization of a graph and let $\Map(G, M)$ be the space of continuous maps $G\to M$ which are piecewise smooth along the edges of $G$. With a similar construction as in \cref{def:diffeology-piecewise-smooth-paths} one can define the diffeology on $\Map(G, M)$
% \begin{definition}
%     The \emph{diffeology on $\Map(G, M)$} is defined as follows: A map $U\to\Map(G, M)$ is a plot if its adjoint is continuous and restricted to each edge it is piecewise smooth along a partition of $I$ depending smoothly on $U$. 
% \end{definition}

% \begin{example}\label{ex:diffeological-path-space-maps}
%     We show that certain maps on $PM$ are smooth maps of diffeological spaces.
%     \begin{enumerate}
%         % \item \emph{Reparametrization}  Let $f\colon I\to I$ be a diffeomorphism onto its image, then $$f^*\colon PM\to PM, \gamma\mapsto \gamma\comp f$$ is smooth: Let $P\colon U\to PM$ be a plot, so that $P^{\sharp}\colon U\times I\to M$ is smooth along $[t_i, t_{i+1}]$. Then the map $f^*P^{\sharp}\colon U\times I\to PM,  (u, t)\mapsto P^{\sharp}(u, f(t))$ is smooth on the interval $[f^{-1}(t_i), f^{-1}(t_{i+1})]$, hence $f^*P^{\sharp}\colon U\to PM$ is a plot. 
%         \item \emph{Composition of Paths}  The composition of paths $$c\colon PM\times_M PM\to PM$$ is a smooth map: a plot of $PM\times_M PM$ is given by two plots $P_1\colon U\to PM$, $P_2\colon U\to PM$ such that the adjoints $P^{\sharp}_i\colon U\times I\to M$ satisfy $P_1|_{U\times\{1\}} = P_2|_{U\times\{0\}}$. Applying the composition map, this becomes $P^\sharp\colon U\times I\to M$ given by $(u, t)\mapsto P^{\sharp}_1(u, 2t)\ \text{resp.}\ P^{\sharp}_2(u, 2t-1)$. By assumption, $P^{\sharp}_i$ are both smooth along a partition of $I$, hence the same holds for $P^\sharp$.
%         \item \emph{Splitting Map}  The splitting map $$s\colon I\times PM\to PM\times_M PM$$ is a smooth map: A plot $P$ of $I\times PM$ is given by plots $P_1\colon U\to I$ and $P_2\colon U\to PM$, which corresponds to a piecewise smooth map $P^{\sharp}_2\colon U\times I\to M$. The composition $s\comp P\colon U\to PM\times_M PM$ is given by $$P^\sharp\colon U\times I\to M\times M, \qquad (u, t)\mapsto \left(P^\sharp_2(u, P_1(u) t), P^\sharp_2(u, P_1(u) + (1-P_1(u))t)\right)$$
%         and this is piecewise smooth along a partition depending smoothly on $u$.
%         \item \emph{Graph Maps}  If $G\to G'$ is a map of spaces which is induced by a map of graphs, then the induced map $$\Map(G', M)\to \Map(G, M)$$ is smooth. 
%     \end{enumerate}
% \end{example}

% \begin{remark}
%     An alternative to our construction is to consider only paths which are constant near $0$ and $1$, or at least have vanishing derivative and higher derivatives there. Compare \cite[5.4]{iglesias2013diffeology}. This makes the composition map smooth, but not the splitting map, hence it is not suitable for our purposes.
% \end{remark}

Let $G$ be a graph, given by sets $V, E$ and source and target maps $s, t\colon E\rightrightarrows V$ with finitely many edges and vertices. Denote by $G$ also the topological space associated to $G$. 
\begin{definition}
    We denote by $C^0(G, M)$ the topological space of continuous maps from $G$ to $M$, with the topology of uniform convergence. We denote by $\Map(G, M)$ the topological diffeological space of maps from $G$ to $M$, which are continuous and piecewise smooth with bounded derivatives along the edges.
\end{definition}


The results of \cref{sec:cochain-models} and \cref{sec:loop-models} are stated using the de Rham complex in \cite{naef2019string} and in these statements depend on the assumption that $\Omega^*(\Map(G, M))$ computes the singular cohomology of $C^0(G, M)$. These complexes are related through the sequence of chain maps. 
\begin{enumerate}[(1)]
    \item The de Rham comparison map $$\Omega^*(\Map(G, M)) \to C_\infty^*(\Map(G, M))$$
    \item The comparison map between singular and smooth singular cochains $$C_\infty^*(\Map(G, M)) \from C^*(\Map(G, M)$$
    \item The comparison map between the space of smooth maps $\Map(G, M)$ and continuous maps $C^0(G, M)$.
\end{enumerate}
\begin{align}
    \Omega^*(\Map(G, M)) \to C_\infty^*(\Map(G, M)) \from C^*(\Map(G, M)\from C^*(C^0(G, M)) \label{eqn:diffeological-quisos}
\end{align}
We will discuss when these maps are quasi-isomorphisms. We can prove the following theorem: 
\begin{theorem}[(1)] \label{thm:diffeological-quiso-singular}
    \begin{enumerate}
    \item If $\Map(G, M)$ is smoothly homotopy equivalent to a smooth CW complex, then the de Rham comparison map 
    \begin{align*}
        \Omega^*(\Map(G, M)) \to C_\infty^*(\Map(G, M)) 
    \end{align*}
    is a quasi-isomorphism. 
    \item The map $C_\infty^*(\Map(G, M)) \from C^*(\Map(G, M)$ is a quasi-isomorphism.
    \item The comparison map between the cohomology of $\Map(G, M)$ and $C^0(G, M)$ is a quasi-isomorphism:
    \begin{align*}
        C^*(\Map(G, M)\from C^*(C^0(G, M)).
    \end{align*}
    \end{enumerate}
\end{theorem}

We are unaware of a proof in the literature that the space $\Map(G, M)$ is homotopy equivalent to a smooth cw complex or that the de Rham comparison map is a quasi-isomorphism on these spaces. The assumption on the cohomologies is required to proceed with the arguments in \cite{naef2019string}, as we outline them in \cref{sec:cochain-models} and \cref{sec:loop-models}. We thus make the following assumption. 

\begin{assumption}\label{assumption}
    Let $M$ be a (closed) smooth manifold and $G$ be a finite graph, resp.~its assotiated topological space. We assume that the de Rham comparison map
    \begin{align*}
        \Omega^*(\Map(G, M)) \to C_\infty^*(\Map(G, M)) 
    \end{align*}
    is a quasi-isomorphism. 
\end{assumption}
\begin{remark}
Note that this assumption is only required in \cref{sec:cochain-models} and \cref{sec:loop-models} for statements involving the de Rham complex. We develop parallel results for the singular cochain complex, these do not require this assumption. 
\end{remark}

\begin{enumerate}[(1)]
    \item In general, the de Rham map $$\Omega^*(X) \to C_\infty^*(X)$$ is not a quasi-isomorphism. Recall that the proof of the de Rham theorem in the case of smooth manifolds depends on structure of the manifold that is not available in the case of diffeological spaces, e.g.\ a locally finite covering with contractible spaces and contractible intersections. It appears to be folklore that the de Rham map is an isomorphism in the case of $LM$. 

Recall from \cref{thm:diffeological-de-rham-cw} that if $X$ is homotopy equivalent to a smooth CW complex, then the de Rham theorem map is an isomorphism. In particular this is the first part of \cref{thm:diffeological-quiso-singular}.

\begin{remark}
    It is known due to Milnor \cite{milnor1959spaces}, that for spaces $X$ and $Y$, where $X$ is compact metrizable and $Y$ is homotopy equivalent to a CW complex, the mapping space $C^0(X, Y)$ has the homotopy type of a CW complex. There are specific cell complexes for the homotopy type of the free loop space, see for example \cite{rivera2018combinatorial}. However these constructions yield topological CW complexes, not smooth CW complexes, and they work with spaces of continuous maps, not smooth maps.
\end{remark}

\item We consider the comparison map between the smooth and the diffeological structure on $\Map(G, M)$.
\begin{lemma}\label{lemma:comparison-singular-smooth-cohomology}
    If $M$ is a smooth manifold without boundary, then the maps 
    $$C_\infty^*(\Map(G, M)) \to C_*(\Map(G, M) \qquad C_\infty^*(\Map(G, M)) \from C^*(\Map(G, M)$$ are quasi-isomorphisms.
\end{lemma}
\begin{proof}
    We first show this for $C^\infty_{F, b}(I, M)$. We apply \cref{thm:diffeological-singular-cohomology-iso}. Thus we have to show that for every continuous simplex $\sigma\colon \Delta^n\to C^\infty_{F, b}(I, M)$ with smooth $(n-1)$-faces, $n\geq 1$, there exists a continuous homotopy $h\colon \Delta^n\times I\to C^\infty_{F, b}(I, M)$ relative to the boundary $\partial\Delta^n$ from $\sigma$ to a smooth $n$-simplex of $X$.

    A continuous map $\sigma\colon\Delta^n\to C^\infty_{F, b}(I, M)$ corresponds to a continuous map $\bar \sigma \colon \Delta^n\times I\to M$. We assume that $\sigma$ is smooth on $\partial\Delta^n$, hence $\bar \sigma$ is smooth on $\partial\Delta^n\times [t_i, t_{i+1}]$. Using the Whitney approximation theorem, this is homotopic relative $\partial\Delta^n\times [t_i, t_{i+1}]\cup \Delta^n\times \{t_i, t_{i+1}\}$ to a smooth map $\Delta^n\times [t_i, t_{i+1}]\to M$. This corresponds to a homotopy from $\sigma$ to a smooth map $\Delta^n\to C^\infty_{F, b}(I, M)$, relative to the boundary. Thus we conclude that for $C^\infty_{F, b}(I, M)$, the singular and smooth singular homology are isomorphic.

    We now consider the space $C^\infty_{ps, b}(I, M)$. Since the image of a singular simplex $\sigma\colon \Delta\to C^\infty_{ps, b}(I, M)$ is compact, one can show that there is some $F$ such that $\sigma$ maps into $C^\infty_{F, b}(I, M)$, see \cite[Prop. 5.6]{stacey2017smooth}. Thus, the singular chain complex of $C^\infty_{ps, b}(I, M)$ is a filtered colimit of the singular chain complexes $C_*(C^\infty_{F, b}(I, M))$, indexed by all finite $F\subset I$. Similarly the smooth singular chain complex of $C^\infty_{ps, b}(I, M)$ is a filtered colimit. Thus the comparison map $C_*^\infty(C^\infty_{ps, b}(I, M)) \to C_*(C^\infty_{ps, b}(I, M))$ is a filtered colimit of quasi-isomorphisms and thus a quasi-isomorphism. The statement on the cochain complex follows via universal coefficients.

    For $G$ instead of $I$, the same proof applies: One first works with maps which are smooth along a fixed partition of each edge, then with arbitrary piecewise smooth maps.
\end{proof}


\item We consider the inclusion $C^\infty_{ps, b}(I, M)\subset C^0(I, M)$.
\begin{lemma}
    The inclusions $C^\infty(I, M)\subset C^\infty_{ps, b}(I, M)\subset C^0(I, M)$ are continuous and induce homotopy equivalences. 
\end{lemma}
See \cite[Sec 1]{hingston2017product} or \cite[Thm 4.6]{stacey2009constructing}. From this we conclude the same for $\Map(G, M)$ and thus the third part of \cref{thm:diffeological-quiso-singular}.
\end{enumerate}

% \begin{lemma}
% Let $P_sM$ denote the smooth loop space and $P_cM$ the continuous loop space of a smooth manifold $M$. The inclusion $P_sM\to P_cM$ is a weak equivalence for any manifold $M$. 
% \end{lemma}
% \begin{proof}
%     A map into the continuous loop space $S^n\to P_cM$ corresponds to a map $S^n\times I\to M$, which is homotopic to a smooth map by the Whitney approximation theorem, hence a map into the smooth loop space $S^n\to P_sM$, so the map on homotopy groups is surjective. Similarly any continuous homotopy $S^n\times I\to P_cM$ between smooth loops corresponds to a map $S^n\times I \times I\to PM$ which is smooth at $s=0, 1$, the Whitney approximation theorem allows us to replace this with a smooth map, thus the adjoint map is a homotopy in the smooth loop space. This shows that the map on homotopy groups is also injective. %For piecewise smooth paths, surjectivity is shown the same way. For injectivity, one can reparametrize smoothly, such that there is some partition $0=t_0<t_1<\dots < t_r=1$ of the unit interval, so that the homotopy is smooth at $s=0, 1$ on the intervals $[t_i, t_{i+1}]$
% \end{proof}

% By Whitehead's theorem, any weak equivalence between CW complexes is a quasi-isomorphism; in fact it is a homotopy equivalence. 


% \begin{remark}
%     One can also compare $\Omega^*(X)$ with Sullivan's polynomial forms $\APL(X)$ via the following zigzag: 
%     \begin{align*}
%         \Omega^*(X)\to A_{dR}(S^\infty_*(X))\from \APL(S^\infty_*(X))\from \APL(S_*(X)) = \APL(X)
%     \end{align*}
%     Here $A_{dR}(S^\infty_*(X))$ is constructed from the simplicial algebra with $(A_{dR})_n=\Omega^*(\Delta^n)$ and the second map is induced from the inclusion $(\APL)_n\to (A_{dR})_n$. For $X=\Map(G, M)$ our assumption is equivalent to requiring that the sequence 
%     \begin{align*}
%         \Omega^*(\Map(G, M))\to A_{dR}(S^\infty_*(\Map(G, M)))\from \APL(S^\infty_*(\Map(G, M)))\from \APL(S_*(\Map(G, M))) = \APL(\Map(G, M)) \from \APL(C^0(G, M))
%     \end{align*}
%     consists of quasi-isomorphisms.

%     By the discussion in \cite{felix2012rational}[ch. 11], the map $A_{dR}(S^\infty_*(X))\from \APL(S^\infty_*(X))$ is a quasi-isomorphism. By the cite{kuribayashi2020simplicial}[theorem 2.4], the map $\Omega^*(X)\to A_{dR}(S^\infty_*(X))$ is a quasi-isomorphism if and only if the map $\Omega^*(\Map(X)) \to C_\infty^*(\Map(X))$ is a quasi-isomorphism. The map $\APL(S^\infty_*(\Map(G, M)))\from \APL(S_*(\Map(G, M)))$ is a homotopy equivalence by a similar argument as in \cref{lemma:comparison-singular-smooth-cohomology}. The map $\APL(\Map(G, M))\to \APL(C^0(G,M))$ is a quasi-isomorphism if and only if the map on the singular cochain complex is. 

% \end{remark}



\subsection{Fiber Integration}\label{subsec:fiber-integration}
We first recall the definition of the fiber integral in the euclidean case, cf.\ \cite{bott1982differential}. We then define a fiber integration map for diffeological spaces $F$ and $X$, which will be a map
%$\Omega^*(X\times M)\to\Omega^{*-\dim M}(X)$ for a closed oriented manifold $M$ and an integration map 
$$\Omega^d(X\times F) \otimes C_n^\infty(F)\to\Omega^{d-n}(X).$$

\begin{construction} [Euclidean Fiber Integral]

    Let $U\subset \R^n, V\subset\R^m$ be open. We use multi-index notation: for any $I=(i_1, \dots, i_k)$ let $du_I = du_{i_1}\wedge\dots \wedge du_{i_k}$ and  $dv_J=dv_{j_1}\wedge\dots\wedge dv_{j_l}$ for a multi-index $J$. Any differential form $\omega\in\Omega^{k+l}(U\times V)$ is a sum of forms $$\omega = \sum_{I, J} f_{I, J} du_{i_1}\wedge\dots \wedge du_{i_k}\wedge dv_{j_1}\wedge\dots\wedge dv_{j_l}$$ where the sum is over all multi-indices $I$ and $J$ with $i_1<\dots<i_k$ and $j_1<\dots<j_l$, for unique smooth functions $f_{I,J}\in C^\infty(U\times V)$. We are only interested in those summands with $J=\{1, \dots, m\}$, denote $f_I = f_{I, \{1, \dots, m\}}$ and $dv = dv_1\wedge\dots\wedge dv_m$. 
    \begin{enumerate}
    \item We say that the fiber integral of $\omega$ is well-defined if for all  multi-indices $I$, the integral $$\int_V f_{I}(u, v) dv$$ converges for all $u\in U$ and yields a smooth function $U\to \R$. 
    
    \item In this case, we define the \emph{fiber integral} of $\omega\in \Omega^*(U\times V)$ to be the form $\int_V \omega\in\Omega^{*-\dim V}(U)$ given at $u\in U$ by
    $$u\mapsto \left(\int_V \omega\right)_u = \sum_I du_I \left(\int_V f_{I}(u, v) dv\right).$$
    \end{enumerate}
\end{construction}
\begin{remark}
For example, recall that a form $\omega\in \Omega^*(U\times V)$ is said to have  compact vertical support if for all $u$, the set $\{v\in V\mid \omega|_{(u, v)}\neq 0\}\subset V$ is contained in a compact subset of $V$. Fiber integration then yields a map $$\Omega^*_{cv}(U\times V)\to \Omega^{*-\dim V}(U),$$ where $\Omega^*_{cv}(U\times V)$ denotes the forms with compact support in $V$ direction. 
\end{remark}
\begin{remark}
    \cite{bott1982differential} and \cite{greub1972connections} define fiber integration in the context of with oriented vector bundles $E\to B$ over finite dimensional manifolds, using only forms with compact vertical support. Our definition is slightly different: we only consider cartesian products where the base space and fiber are subsets of Euclidean spaces. We have also made the convergence assumption explicit instead of relying on compact vertical support. Nevertheless this is a standard construction. 
\end{remark}

\begin{lemma}\label{lem:fiber-int-euclidean}
    \begin{enumerate}
        \item 
    If $f\colon U\to U'$ is smooth, then for $\omega\in \Omega^*(U'\times V)$, if both fiber integrals $\int_V\omega\in\Omega^*(U')$ and $\int_V (f\times\id_V)^*\omega\in\Omega^*(U)$ are well-defined, then:
    \begin{align*}
        \int_{V} (f\times \id_V)^*\omega = f^*\int_{V}\omega
    \end{align*}
    \item 
    If $g\colon  V\to V'$ is a diffeomorphism, then for $\omega\in \Omega^*(U\times V')$
    \begin{align*}
        \int_V (\id\times g)^*\omega = \pm \int_{V'} \omega
    \end{align*}
    if both fiber integrals are well-defined, with positive sign if $g$ is orientation preserving and negative sign otherwise.
    \item Let $p\colon U\times V\to U$ be the projection, then for $\omega_1\in\Omega^*(U)$ and $\omega_2\in\Omega^*(U\times V)$, 
    \begin{align*}
        \int_V p^*\omega_1 \wedge\omega_2 = \omega_1\wedge\int_V \omega_2
    \end{align*}
    if both fiber integrals are well-defined. 
\end{enumerate}
\end{lemma}
In some cases, one of these integrals is well-defined if the other is well-defined, but we will not use this so it is not stated explicitly.


\begin{remark}\label{rmk:fiber-int-cpt}
    If $K\subset V\subset \R^n$ is compact, we may define the fiber integral $\int_K\omega\in \Omega^*(U)$ of $\omega\in\Omega^*(U\times V)$ to be the form given at $u\in U$ by
    $$u\mapsto \left(\int_K \omega\right)_u = \sum du_I \left(\int_K f_{I}(u, v) dv\right).$$
    This is always well-defined: Since $K$ is compact, $\omega$ is bounded in the $K$ direction, hence the integral converges. Moreover it is smooth since for every $u\in U$ and every $p\geq 0$, there is an open set $u\in N\subset U$ such that $\omega$ and all its $p$-th derivatives are bounded on the strip $N\times K$. 
\end{remark}

We now define a more general fiber integral where $U\subset \R^n$ is replaced with a general diffeological space.

% \begin{construction}[Fiber Integral $\Omega^*(M\times X)\to\Omega^{*-\dim M}(X)$]
% Let $M$ be an oriented closed manifold and $U\subset \R^n$ open. Using a smooth partition of unity subordinate to a positively oriented atlas of $M$, one can define the a map $$\int_M\colon\Omega^{*+\dim M}(U\times M)\to\Omega^*(U)$$
% and this is independent of the partition of unity. 

% Let $X$ be a diffeological space, then one can construct the \emph{fiber integral}\index{fiber integral!on diffeological spaces} $$\int_M\colon\Omega^{*+\dim M}(X\times M)\to \Omega^*(X)$$ by mapping $\{\alpha_P\}\mapsto \{\int_M\alpha_P\}$. This satisfies the same invariance properties as in the lemma.
% \end{construction}

\begin{construction}[Fiber integral over smooth singular chains]
    Let $F$ and $X$ be diffeological spaces, $\sigma\colon\Delta^n\to F$ be a smooth simplex in $F$ and $\omega\in\Omega^*(X\times F)$, then for each plot $P\colon U\to X$ of $X$ we have $(P\times\sigma)^*\omega\in\Omega^*(U\times \Delta^n)$. Since $\sigma$ extends to a small neighborhood $V\supset \Delta^n$, the form $(P\times\sigma)^*\omega$ extends to a form in $\Omega^*(U\times V)$. Since $\Delta^n$ is compact, the fiber integral $\int_{\Delta^n} (P\times\sigma)^*\omega$ is well-defined, c.f.\ \cref{rmk:fiber-int-cpt}. These forms piece together to a well-defined form on $X$ by part 1 of \cref{lem:fiber-int-euclidean}: 
    $$\int_\sigma \omega = \left\{\int_{\Delta^n} (P\times\sigma)^*\omega\right\}\in\Omega^*(X).$$
    This extends linearly to chains of smooth simplices and one obtains a linear map
    \begin{align*} \int\colon\Omega^d(X\times F) \otimes C_n^\infty(F)&\to\Omega^{d-n}(X)\\
        \omega\otimes \alpha&\mapsto \int_\alpha\omega
    \end{align*}
    called the \emph{fiber integral}\index{fiber integral} over smooth singular chains.
\end{construction}

\begin{remark}
    With a similar construction, using a partition of unity, one can construct a fiber integral over a compact oriented manifold $M$ or more generally a map $M\to F$.
\end{remark}

The fiber integral map satisfies the following properties:
\begin{proposition}
    \begin{enumerate}
        \item If $\sigma\in C^\infty_k(F), \tau\in C^\infty_l(X)$ and $\omega\in\Omega^{k+l}(X\times F)$, then
        \begin{align*}
            \int_\tau\int_\sigma\omega = \int_{\tau\times\sigma}\omega \in \R
        \end{align*}
        where $\tau\times\sigma = EZ(\tau,\sigma)\in C^\infty_{k+l}(X\times F)$ denotes the image of the Eilenberg-Zilber map. 
        \item If $f\colon F\to F', g\colon X\to X'$, then for $\alpha\in C^\infty_*(F), \omega\in \Omega^*(X'\times F')$,
        \begin{align*}
            \int_\alpha (g\times f)^*\omega = g^*\int_{f_*\alpha}\omega
        \end{align*}
        \item Let $p\colon X\times F\to X$ be the projection, then for $\omega_1\in\Omega^*(X), \omega_2\in\Omega^*(X\times F)$ and $\alpha\in C^\infty_*(F)$:
        \begin{align*}
            \int_{\alpha} p^*(\omega_1)\wedge\omega_2 = \omega_1\wedge\int_{\alpha}\omega_2
        \end{align*}
    %     \item
    % Let $\alpha\in\Omega^*(M\times X)$ and $\beta\in\Omega^*(X)$, then
    % \begin{align*}
    %     \pi_*(\alpha\wedge\pi^*\beta) = \pi_*\alpha\wedge\beta
    % \end{align*}
    % If in addition, $X$ is an oriented compact manifold (or $X$ not necessarily compact but $\beta$ has compact support), then
    % \begin{align*}
    %     \int_{M\times X} \alpha\wedge\pi^*\beta = \int_X\int_M \left(\alpha\wedge\pi^*\beta\right) =  \int_X\left(\int_M \alpha\right)\wedge\beta
    % \end{align*}
\end{enumerate}
\end{proposition}
\begin{proof}
    Part (2) and (3) follow directly from \cref{lem:fiber-int-euclidean}. 

    For part (1), using (2) we may take $F=\Delta^k, X=\Delta^l$ and $\sigma$ and $\tau$ to be the identity without loss of generality. The Eilenberg-Zilber map gives a partition of the product $\Delta^{k}\times\Delta^l$ via smooth maps $\Delta^{k+l}\to\Delta^k\times\Delta^l$ with disjoint images except on a zero set. Hence both sides are equal to $\int_{\Delta^k\times\Delta^l} \omega$. 
\end{proof}

Let $I_{dR}\colon \Omega^*(F)\to C_\infty^*(F)$ be the de Rham map as in \cref{subsec:diffeological-de-rham}. By the following theorem, fiber integration corresponds to the slant product \cref{subsec:slant_product} in the smooth singular cochain complex under $I_{dR}$.
\begin{theorem}\label{thm:fiber-integral-slant-product}
    Let $F$ be a smooth manifold and $B$ a diffeological space, let $\alpha\colon\Delta^p\to F$ be a smooth simplex and $\omega\in\Omega^{p+q}(B\times F)$ a differential form. Then
    \begin{align*}
        I_{dR}(\omega) / \alpha = I_{dR}\left(\int_{\alpha} \omega\right)
    \end{align*}
\end{theorem}
\begin{proof}
    Let $\beta\in C^\infty_p(B)$, then
    \begin{align*}
        \langle I_{dR}(\omega) / \alpha, \beta\rangle = \langle I_{dR}(\omega), \alpha\times \beta\rangle = \int_{\alpha\times \beta} \omega = \int_\beta \int_\alpha\omega = \langle I_{dR}\left(\int_{\alpha}\omega\right), \beta\rangle
    \end{align*}
\end{proof}

From this we can show Stokes' theorem for fiber integration over smooth singular chains with a simple formal argument:
\begin{proposition}\label{thm:fiber-stokes}
    Let $X$ be a diffeological space, $\omega\in\Omega^{p+q}(F\times X)$ and $\alpha\in C_p^\infty(F)$, then
    $$d\left(\int_\alpha\omega\right) = \int_\alpha\ d\omega + (-1)^{\deg \omega - \deg\alpha}\int_{\partial \alpha} \omega.$$
\end{proposition}
\begin{proof}
    From the formal properties of the slant product \cref{subsec:slant_product} and \ref{thm:fiber-integral-slant-product}, it follows that
    \begin{align*}
        &I_{dR}\left(d\int_\alpha\omega\right) = d (I_{dR}(\omega)) / \alpha = dI_{dR}(\omega) / \alpha + (-1)^{\deg \omega - \deg \alpha}I_{dR}(\omega) / \partial \alpha \\&= I_{dR}\left(\int_\alpha\ d\omega + (-1)^{\deg \omega - \deg\alpha}\int_{\partial \alpha} \omega\right)
    \end{align*}
    We conclude, since $I_{dR}$ is injective (\ref{thm:deRham-properties}).
\end{proof}

With this we can easily show that the de Rham cohomology of diffeological spaces is invariant with respect to smooth homotopy.
\begin{theorem}
    Let $f_0, f_1\colon M'\to M$ be smooth maps of diffeological spaces. Then every smooth homotopy $F\colon I\times M'\to M$ from $f_0$ to $f_1$ induces a chain homotopy $H\colon \Omega^*(M)\to \Omega^{*-1}(M')$ such that 
    \begin{align*}
        dH + H d = f_1^* - f_0^*
    \end{align*}
\end{theorem}
\begin{proof}
    From the previous proposition,
    \begin{align*}
        d \int_I F^*\omega = \int_I F^*d\omega + (-1)^{\deg\omega - 1} (f_1^*\omega - f_0^*\omega)
    \end{align*}
    hence we can take $H$ to be $\omega\mapsto (-1)^{\deg\omega}\int_I F^*\omega$.
\end{proof}


% \begin{definition}
%     A differential $k$-form on a diffeological space $(X,\mathcal D)$ is a $\mathcal D$-indexed collection $\alpha_P$ of differential forms $\alpha_P\in \Omega^k(U)$ for each plot $P\colon U\to X$, such that for every smooth map $f\colon U\to V$ of euclidean open sets, $f^*\alpha_P = \alpha_{fP}$. The collection of all differential $k$-forms on $X$ is denoted $\Omega^k(X)$. 
% \end{definition}

% One can define the usual pullback, exterior derivative and wedge product operations by acting on $\alpha_P$. In particular, there is a well defined de Rham cohomology of the complex $\Omega^*(X)$. The de Rham cohomology is invariant with respect to smooth homotopy, so this more generally holds for any space which is smoothly homotopy equivalent to the a smooth CW complex. See \ref{subsec:diffeological} for more detailed statements and references of the preceding statements. 





\section{Cochain Complex Models for Graph Mapping Spaces}\label{sec:cochain-models}

We are interested in the cohomology of the path space $PM$ of a manifold $M$ and more generally the mapping spaces from a graph into $M$. Here, $PM$ denotes the space of piecewise smooth paths in $M$, topologized by uniform convergence. More generally, for a finite graph $G$, the space $\Map(G, M)$ consists of maps from the associated topological space $G$ to $M$ which are piecewise smooth along the edges. This has the structure of a topological diffeological space (cf.\ \cref{subsec:diffeological}) and we can define the complex of de Rham forms $\Omega^*(\Map(G, M))$. By the discussion in \cref{subsec:diffeological-path-spaces} and \cref{assumption}, we will assume that $\Omega^*(\Map(G, M))$ is quasi-isomorphic to $C^*(C^0(G, M))$, the singular cochain complex of the space of continuous maps from $G$ to $M$. 

Classically, a differential graded commutative algebra (DGCA) $A$ is called a DGCA model of another DGCA $A'$ if there exists a sequence of quasi-isomorphisms $A\to\dots\from A'$ such that each map is a map of DGCAs. A DGCA model of a space $X$ is defined to be a DGCA model of $\APL(X)$, the DGCA of polynomial forms on $X$, cf. \cite[ch. 10]{felix2012rational}. In this work we will call a model of a chain complex $C$ any chain complex $C'$ together with an isomorphism $C\quiso C'$ in the derived category of chain complexes $D(Ch(k))$. Similarly a model of a map $C\to C'$ is a commutative square in $D(Ch(k))$
\begin{center}
\begin{tikzcd}
    C \dar["\quiso"]\rar& C'\dar["\quiso"]\\
    B \rar& B'
\end{tikzcd}
\end{center}
where the horizontal maps are isomorphisms. 

The goal of this section is to define a model of the mapping space $\Map(G, M)$, using only a dgca model $A$ of $M$ and the data of the graph. The basic building block is the two sided bar construction $B=\BC(A, A, A)$, which is a model of the path space through the iterated integral map $I\colon \BC(A, A, A)\to\Omega^*(PM)$. This is discussed in \cref{subsec:model-path-space}. In \cref{subsec:graph-models} we build the model $A^{\otimes G}$ of $\Map(G, M)$. This generalizes the bar construction for the path space and the Hochschild complex for the free loop space. This model is functorial in the graph, thus maps between mapping spaces that are induced by graph homomorphisms can be modeled as well. In \cref{subsec:model-concatenation} we discuss maps which are not given by graph homomorphisms, namely the concatenation of paths and the splitting of paths. These can nevertheless be modeled. 


\subsection{Bar Construction and Path Spaces}\label{subsec:model-path-space}

In this subsection we follow \cite{naef2019string}. We introduce the bar construction $\BC(A, A, A)$ of a DGCA $A$. We show that if $A=\Omega^*(M)$ for a manifold, then there exists a quasi-isomorphism $I\colon \BC(A, A, A)\to \Omega^*(PM)$ called the iterated integral map. % Moreover we show that through this quasi-isomorphism, the composition $PM\times_M PM\to PM$, the two restrictions $PM\times_M PM\to PM$ and the splitting map $I\times PM\to PM\times_M PM$ can be described on the chains of the bar construction. 

Let $A$ be a (unital) DGCA. Denote by $B = \BC(A, A, A)$ the two sided non-normalized \emph{bar construction}
\begin{align*}
    \BC(A, A, A) = A\otimes T(A[1]) \otimes A = \sum_{n\geq 0} A\otimes A[1]^{\otimes n} \otimes A
\end{align*}
Its differential is $d_B = d_0 + (-1)^{\epsilon_n-n} d_1$ where $d_0$ is given by the differential on $A$:
\begin{align*}
    &d_0(\omega_0,\omega_1,\dots,\omega_n,\omega_{n+1}) = \sum_{i=0}^{n+1} (-1)^{\epsilon_{i-1}}\omega_0\otimes\dots\otimes d\omega_i \otimes\dots\otimes\omega_{n+1}
\end{align*}
with $\varepsilon_i = \abs\omega_0+\dots+\abs\omega_i$ (and $\epsilon_{-1} =0$). The differential $d_1$ is defined using the multiplication on $A$:
\begin{align*}
    &d_1(\omega_0,\omega_1,\dots,\omega_n,\omega_{n+1}) = \sum_{i=0}^{n-1}(-1)^{i}\omega_0\otimes \dots\otimes\omega_i\wedge\omega_{i+1}\otimes \dots\otimes \omega_{n}
\end{align*}

For properties of the bar construction, see \cref{subsec:bar_construction}. 

The complexes $A^{\otimes n}$ form a simplicial chain complex, i.e.\ a simplicial object in the category of chain complexes with simplicial boundary maps induced by $\omega_0\otimes\dots\otimes\omega_n\mapsto \omega_0\otimes\dots\otimes\omega_i\omega_{i+1}\otimes\dots\otimes\omega_n$ and degeneracy maps $\omega_0\otimes\dots\otimes\omega_n\mapsto \omega_0\otimes\dots\otimes 1\otimes\dots\otimes\omega_n$, inserting $1$ at the $i$-th factor. 
The un-normalized bar construction $\BC(A, A, A)$ is the total complex of this simplicial object, the differential $d_1$ is induced by the simplicial boundary maps and $d_B$ is the induced differential on the total complex.
\begin{definition}
    The \emph{simplicial normalization} $\nBC(A, A, A)$ of the bar construction is the quotient by the images of the degeneracy maps:
\begin{align*}
    \nBC(A, A, A) \defeq \bigoplus_{n\geq 0} A\otimes \bar A[1]\otimes A
\end{align*}
where $\bar A = A / \langle 1\rangle$ (as a quotient of vector spaces).
\end{definition}

\begin{remark}
Chen \cite{chen1976reduced}, cf.\ \cite{getzler1991differential} uses a stronger normalization: For $f\in A^0$, let $$S_i(f)\left(\omega_0(\omega_1| \dots| \omega_k)\omega_{k+1}\right) = \omega_0(\omega_1| \dots |\omega_{i-1}| f | \omega_i| \dots| \omega_k)\omega_{k+1}\in \BC$$ and $R_i(F) = d S_i(f) - S_i(f) d$ where $d$ is the differential of $\BC$. Let $D$ be the subspace of $B$ generated by $S_i(f)$ and $R_i(f)$. Chen uses the normalization $\BC/D$. We will only work with the simplicial normalization throughout. 
\end{remark}

Let now $A=\Omega^*(M)$ for a manifold $M$. We introduce the iterated integral map. The standard $n$-simplex $\Delta^n$ is the set $\{0\leq t_1\leq t_2\leq \dots\leq t_n\leq 1\} \subset \R^n$. Let 
\begin{align*}
    ev_n\colon\qquad\Delta^n\times PM \to & M\times M^n\times M \\
    ((t_1,\dots, t_n), \gamma)\mapsto &(\gamma(0), \gamma(t_1), \dots, \gamma(t_n), \gamma(1))
\end{align*}
In \cref{subsec:fiber-integration} we introduced a fiber integral map which we apply to the map $\Delta^n \times PM \to PM$: 
$$\int_{\Delta^n}\colon \Omega^*(\Delta^n \times PM) \to \Omega^{*-n}(PM).$$

\begin{definition}
The \emph{iterated integral} on de Rham forms\index{iterated integral!on de Rham forms} is the map 
\begin{align*}
    I&\colon \BC(\Omega^*(M), \Omega^*(M), \Omega^*(M)) \to \Omega^*(PM) \\
    I(\omega_0 \otimes \dots \otimes\omega_{n+1}) &= \int_{\Delta^n}\phantom{|} ev_n^*(\pi_0^*\omega_0\wedge\dots\wedge\pi_{n+1}^*\omega_{n+1})
\end{align*}
%where $\zeta = (n+1)\abs{\omega_0} + n\abs{\omega_1}+\dots+2\abs{\omega_{n-1}} + \abs{\omega_{n}} + n(n+1)/2$. It acts on each summand up to sign as the composition
It acts on each summand as the composition
\begin{align*}
    \Omega^*(M)\otimes\Omega^*(M)^n\otimes\Omega^*(M)[n]\to \Omega^{*+n}(M^{n+2})\xto{ev^*}\Omega^{*+n}(\Delta^n\times PM) \xto{\int_{\Delta^n}} \Omega^{*}(PM)
\end{align*}
\end{definition}

\begin{remark}
    We give an informal intuition for the iterated integral map here. We think of cohomology classes of degree $k$ as represented by codimension $k$ subspaces\footnote{For example, in geometric cohomology \cite{friedman2022foundations}, a cochain in a finite dimensional manifold $M$ is represented by smooth proper map $W\to M$ from a manifold with corners, plus some additional data. } We interpret the pullback map as taking the preimage. The fiber integral map $\int_{\Delta^n}\colon \Omega^*(PM\times \Delta^n)\to \Omega^{*-n}(PM)$ is the umkehr map on cohomology of the projection $PM\times \Delta^n\to PM$ and we interpret this as taking the image of a subspace under the projection. Thus let $a_0, \dots, a_{n+1}$ be cochains in $M$ represented by subspaces $S_0, \dots, S_{n+1}$ of $M$. We think of the image under $ev^*$ as $ev^{-1}(S_0\times\dots\times S_{n+1})$, which is the collection of all paths $\gamma$ such that $\gamma(t_i)\in S_i$ for all $i$. Then we take the image of this collection under the map $\Delta^n\times PM \to PM$, which means forgetting the exact times $t_i$, though not the order of the $S_i$. 
    
    We can interpret the boundary operator of the bar construction in this picture: the space $I(a_0, \dots, a_ia_{i+1},\dots, a_{n+1})$ consists of paths that are in $S_i\isect S_{i+1}$ at $t_i$, but such a path is equivalently a path which is in $S_i$ at $t_i$ and at $S_{i+1}$ at $t_{i+1}$ with $t_i=t_{i+1}$, which is part of the boundary of $I(a_0,\dots,a_{n+1})$. This corresponds to the differential $d_1$ of the bar complex. A path is also in the boundary of $I(a_0,\dots,a_{n+1})$ if it is in $\partial S_i$ at $t_i$ for some $i$, this corresponds to the differential $d_0$. 
\end{remark}

\begin{remark}
    There exist different sign conventions for the bar construction and the iterated integral map. In his original work, Chen uses a slightly different construction of the fiber integral map: the integral over $\Delta^n$ can be interpreted as the integral of $t_1$ over $I$, $t_2$ over $t_1\leq t_2\leq 1$ and so on, see the latter part of the proof of \cref{lem:integral-chain-map}. This leads to different signs in each degree compared to our construction. Thus to make the iterated integral map a chain map, Chen's differential of the bar construction also differs by signs from our definition. In our sign convention, the differential of the bar construction is chosen such that our iterated integral map is a chain map without modification.
\end{remark}

\begin{lemma}\label{lem:integral-chain-map}
    The iterated integral is a chain map $I\colon \BC(A, A, A)\to \Omega^*(PM)$ and it descends to a chain map $I\colon \nBC(A, A, A)\to \Omega^*(PM)$. %$D$ is a sub-chain complex of $C$. The iterated integral vanishes on $D$ and hence descends to a map $B = \BC / D \to\Omega^*(PM)$.
\end{lemma}
\begin{proof}
    We first show that the iterated integral is a chain map on $\BC(A, A, A)$. We use the Stokes' theorem for the fiber integral (\cref{thm:fiber-stokes}) $d\int_{F} \omega = \int_{F}d\omega + (-1)^{\abs{\omega} - \dim F} \int_{\partial F}\omega$. We write $\epsilon_i = \abs\omega_0+\dots+\abs\omega_i$.
    \begin{align*}
        d\left(I\left( \omega_0\otimes\dots\otimes\omega_{n+1}\right)\right) =& \int_{\Delta^n} ev^*\left(d\left((\pi_0^*\omega_0)\wedge\dots\wedge(\pi_{n+1}^*\omega_{n+1})\right)\right) \\&
        + (-1)^{\epsilon_n - n} \int_{\partial\Delta^n} ev^*\left((\pi_0^*\omega_0)\wedge\dots\wedge(\pi_{n+1}^*\omega_{n+1})\right) 
        =& S_1 + S_2
    \end{align*}
    The first summand can be computed as  
    \begin{align*}
        S_1 =&\int_{\Delta^n} ev^*\left(d\left((\pi_0^*\omega_0)\wedge\dots\wedge(\pi_{n+1}^*\omega_{n+1})\right)\right) \\
        =&\sum_{i=0}^{n+1} (-1)^{\epsilon_{i-1}}\int_{\Delta^n} ev^*\left(\pi_0^*\omega_0 \wedge \dots\wedge \pi_i^*d\omega_i\wedge\dots\wedge\pi_{n+1}^*\omega_{n+1}\right)\\
        =& \sum_{i=0}^{n+1} (-1)^{\epsilon_{i-1}} I\left(\omega_0\otimes\dots \otimes d\omega_i\otimes\dots\otimes\omega_{n+1}\right) \\
        =& I(d_0(\omega_0\otimes\dots \otimes \omega_{n+1}))
    \end{align*}
    For the second summand, the boundary $\partial \Delta^n$ splits into the faces $\partial_i\Delta^n$, positively oriented if $i$ is even and negatively oriented otherwise. On the $i$-th face $\partial_i\Delta^n$, we have $t_i=t_{i+1}$ (with $t_0=0, t_{n+1}=1$) so $\pi_i\comp ev=\pi_{i+1}\comp ev$.

    \begin{align*}
        S_2 =& (-1)^{\epsilon_n - n} \int_{\partial\Delta^n} ev^*\left((\pi_0^*\omega_0)\wedge\dots\wedge(\pi_{n+1}^*\omega_{n+1})\right) \\
        =& \sum_{i=0}^n (-1)^{\epsilon_n - n + i} \int_{\partial_i\Delta^n} ev^*((\pi_0^*\omega_0)\wedge\dots\wedge(\pi_i^*(\omega_{i}\wedge\omega_{i+1}))\wedge\dots\wedge(\pi_{n+1}^*\omega_{n+1})) 
        \intertext{We reparametrize through the maps $\Delta^{n-1}\to\partial_i\Delta^n, (t_0, \dots, t_n)\mapsto (t_0, \dots, t_i, t_i, \dots, t_n)$. }
        =&\sum_{i=0}^n(-1)^{\epsilon_n-(n-i)}\int_{\Delta^{n-1}}ev^*((\pi_0^*\omega_0)\wedge\dots\wedge(\pi_i^*(\omega_{i}\wedge\omega_{i+1}))\wedge\dots\wedge(\pi_{n}^*\omega_{n+1})) \\
        =& \sum_{i=0}^n (-1)^{\epsilon_n-(n-i)}I\left(\omega_0\otimes\dots\otimes \omega_i\wedge\omega_{i+1}\otimes\dots\otimes\omega_{n+1}\right) \\
        =& \sum_{i=0}^n(-1)^{\epsilon_n-n}I(\omega_0\otimes \dots\otimes \omega_i\omega_{i+1}\otimes \dots\otimes \omega_{n+1}) \\
        =& I((-1)^{\epsilon_n-n} d_1(\omega_0\otimes \dots\otimes \omega_i\omega_{i+1}\otimes \dots\otimes \omega_{n+1}))
    \end{align*}
    Thus $I$ is a chain map. 

    It remains to check that $I$ vanishes on elements $\omega_0\otimes\dots\otimes 1\otimes\dots\otimes\omega_{n+1}$. More generally, we can show that $I(\omega_0\otimes\dots\otimes\omega_n)=0$ if $\omega_i$ is a $0$-form for some $1\leq i \leq n$. We write $ev_n\colon\Delta^n\times PM\to M^{n+2}$ as a product $ev_n = ev_n^0\times\dots\times ev_n^{n+1}$ where $ev_n^i = \pi_i \comp ev_n$. 
    We can factor the projection $\Delta^n\times PM\to PM$ through $\Delta^n\times PM\to \Delta^{n-1}\times PM \to PM$ by forgetting $t_i$ first. One can compute 
    \begin{align*}
        \int_{\Delta^{n}} ev^*_n(\omega_0\otimes\dots\otimes\omega_n) =& \int_{\Delta^{n-1}} \int_{t_{i-1} \leq t \leq t_i} ev^*_n(\omega_0\otimes\dots\otimes\omega_n) \\
        =&\pm\int_{\Delta^{n-1}} \left(\pi_0^*(ev_n^{i})^*\omega_0 \wedge\dots\wedge\pi_{n+1}^*(ev_n^{(n+1)})^*\omega_{n+1} \wedge \right. \\ &\left.\quad\wedge \int_{t_{i-1} \leq t \leq t_i} \pi_i^*(ev_n^{i})^* \omega_i\right)
    \end{align*}
    but the fiber integral over a $1$-dimensional space is a degree $-1$ map, hence the inner integral vanishes if $\omega_i$ is a $0$-form:
    \begin{align*}
        \int_{t_{i-1} \leq t \leq t_i} \pi_i^*(ev_n^{i})^* \omega_i = 0
    \end{align*} 

    % It is easy to check that $D$ is a sub-chain complex of $B$. 

    % We need to check that the iterated integral maps $D$ to $0$. Since only the $i+1$-th factor of the image of $ev_n$ depends on $t_i$, the pullback $ev^*(\omega_0\otimes\dots\otimes\omega_{n+1})$ can not contain the factor $dt_i$ if $\omega_{i+1}$ is a $0$-form. Hence any image of $S_i(f)$ is mapped to $0$ by the iterated integral. For $R_i(f)$, one can compute that  
    % \begin{align*}
    %     &R_i(f)(\omega_0(\omega_1|\dots|\hat\omega_i|\dots|\omega_{n})\omega_{n+1}) = \pm \left( (-1)^{\abs\omega_0+\dots+\abs\omega_{i-1}} \omega_0(\omega_1|\dots| \omega_{i-1}| df| \omega_{i+1}|\dots|\omega_{n})\omega_{n+1} \right.\\&\quad\left. + \omega_0(\omega_1|\dots|\omega_{i-1}f|\omega_{i+1}|\dots\omega_n)\omega_{n+1} - \omega_0(\omega_1|\dots|\omega_{i-1}|f\omega_{i+1}|\dots\omega_n)\omega_{n+1} \right)
    % \end{align*}
    % The iterated integral of the first summand is 
    % \begin{align*}
    %     &I(\omega_0(\omega_1|\dots| \omega_{i-1}| df| \omega_{i+1}|\dots|\omega_{n})\omega_{n+1}) = \int_{\Delta^{n-1}}\int_{t_i}^{t_{i+1}} ev_{n}^*(\omega_0(\omega_1|\dots|df|\dots|\omega_n)\omega_{n+1} \\
    %     &\quad= (-1)^{\abs\omega_0+\dots+\abs\omega_{i-1}}\int_{\Delta^{n-1}}\left(\int_{t_{i-1}}^{t_{i+1}} ev_{\{i\}}^*df\right) \wedge ev_{n-1}^*(\omega_0(\omega_1|\dots|\omega_{i-1}|\omega_{i+1}|\dots|\omega_n)\omega_{n+1}) \\
    %     &\quad= (-1)^{\abs\omega_0+\dots+\abs\omega_{i-1}}\int_{\Delta^{n-1}}\left(f(ev_{\{i-1\}})-f(ev_{\{i+1\}})\right) ev_{n-1}^*(\omega_0(\omega_1|\dots|\omega_{i-1}|\omega_{i+1}|\dots|\omega_n)\omega_{n+1}) \\
    %     &\quad= (-1)^{\abs\omega_0+\dots+\abs\omega_{i-1}} I(\omega_0(\omega_1|\dots|\omega_{i-1} f|\omega_{i+1}|\dots|\omega_{n})\omega_{n+1}) \\
    %     &\quad\hphantom{= }-(-1)^{\abs\omega_0+\dots+\abs\omega_{i-1}} I(\omega_0(\omega_1|\dots|\omega_{i-1} |f\omega_{i+1}|\dots|\omega_{n})\omega_{n+1})
    % \end{align*}
    % where $ev_{\{i\}}\colon \Delta^n\times PM\to M, \left((t_1, \dots, t_n), \gamma\right)\mapsto \gamma(t_i)$,
\end{proof}

\begin{remark}
    On the singular cochain complex $C^*(M)$, we can also form the bar construction $B(C^*(M), C^*(M), C^*(M))$, which is still a chain complex. By \cref{thm:fiber-integral-slant-product}, the analogue of the fiber integral is the slant product and we can construct a map $\BC(C^*(M), C^*(M), C^*(M)) \to C^*(PM)$ as in the de Rham case. But since $C^*(M)$ is not commutative, we cannot perform the computation for $S_2$ in the singular cochain complex, hence we cannot show that this is a chain map. However we can still construct a zigzag of quasi-isomorphisms $B(C^*(M), C^*(M), C^*(M)) \xto{\quiso} C^*(M) \xfrom{\quiso} C^*(PM)$. By item (1) of \cref{thm:path-models-0}, this is a suitable replacement of the iterated integral map, at least in the derived category of chain complexes.
\end{remark}
% \begin{definition}
% The \emph{iterated integral map}\index{iterated integral map!on singular cochains} on singular cochains is given by the composition
% \begin{align*}
%     I&\colon \BC(C^*(M), C^*(M), C^*(M)) \to C^*(PM) \\
%     I&= \sum_{n\geq 0} (\blank \slant [\Delta^n]) \comp ev_n^*
% \end{align*}
% which is a direct sum of the maps 
% \begin{align*}
%     C^*(M)\otimes C^*(M)[1]^{\otimes n} \otimes C^{*+n}(M) \xto{ev^*} C^{*+n}(\Delta^n\times PM) \xto{\blank / [\Delta^n]} C^{*}(PM)
% \end{align*}
% \end{definition}
% Here $/$ is the homology slant product, which we recall in \cref{subsec:slant_product}. By \cref{thm:fiber-integral-slant-product}, the slant product is identified with fiber integration through the De Rham isomorphism, hence the de Rham isomorphism identifies this iterated integral map with the one on the de Rham complex.

% \begin{remark}
%     This map descends to a map $\BC(C^*(M), C^*(M), C^*(M)) \to NC^*(PM)$, where $NC^*(PM)$ is the normalized singular cochain complex, i.e.\ the quotient by the images of the degeneracy maps $s_i$ and $\BC(C^*(M), C^*(M), C^*(M)) = \bigoplus C^*(M)\otimes \bar C^*(M)[1]^{\otimes n}\otimes C^*(M)$ is the normalization of the bar complex, where $\bar C^*(M)$ is the complex with $\bar C^0(M) / 1$ and $\bar C^k(M) = C^k(M)$ for $k\neq 0$. To show this, consider the diagram

%     \begin{center}
%     \begin{tikzcd}
%         C^*(PM) & \lar[swap, "/\Delta^n"] C^{*+n}(PM\times \Delta^n) &\lar C^*(M)^{\otimes n} \\
%         C^*(PM) \uar[swap, "="] & \lar[swap, "/s_i"] C^{*+n}(PM\times\Delta^{n-1})\uar[swap, "(\id\times s_i)^*"] & \lar C^*(M)^{\otimes (n-1)}\uar[swap, "\pi_{\hat i}"]
%     \end{tikzcd}
%     \end{center}

%     where $s_i\colon\Delta^n\to\Delta^{n-1}$ and $\pi_{\hat i}\colon M^{n}\to M^{n-1}$ both forget the $i$-th component. The slant product with a degenerate simplex yields a degenerate cochain: $\langle u / s_i\alpha, \beta\rangle = \langle u,s_i\times\beta\rangle$ and one can show that the cross product of a degenerate simplex with another chain is a sum of degenerate chains, so the slant product $u/s_i$ is a sum of degenerate cochains. 
% \end{remark}
% \begin{remark}
% We also exhibit the homology version
% \begin{align*}
%     C_*(PM) \xto{\times [\Delta^n]} C_{*+n}(PM\times \Delta^n) \xto{ev_*} C_{*+n}(M\times M^n\times M)\to C_*(M)\otimes C_{*}(M)[1]^{\otimes n}\otimes C_*(M),
% \end{align*}
% but letting $n$ vary, the natural target of this map is the direct product of the right hand side complexes, so the iterated integral map on the bar complex is not on the nose the dual of a map in a homological chain complex.
% \end{remark}


Let $const\colon M\to PM$ be the constant path map and let $ev_{0,1}\colon PM\to M\times M$ be the evaluation at $0$ and $1$. The following proposition gives models of these maps. Recall $A=\Omega^*(M)$ and $B = \BC(A, A, A)$. Let $\alpha\colon B\to A$ be the map given on the direct summands of $B$ by the product $A^{\otimes 2}\to A$ and the zero map $A^{\otimes n}\to A$ for $n>2$. Let $\beta\colon A^{\otimes 2}\to B$ be the map given by the inclusion of $A^{\otimes 2}$ into the direct sum $\BC = \bigoplus A^{\otimes n}$.

\begin{proposition}\label{thm:path-models-0}
    \begin{enumerate}
    \item The following diagram commutes: 
    \begin{equation}\label{diag:path-models-0-1}
    \begin{tikzcd}
        B \rar["I"] \dar["\alpha"] & \Omega^*(PM) \dar["const^*"] \\
        A \rar[equal] & \Omega^*(M)
    \end{tikzcd}
    \end{equation}
    \item The following diagram commutes:
    \begin{equation}\label{diag:path-models-0-2}
        \begin{tikzcd}
        A \otimes A \rar \dar["\beta"] & \Omega^*(M\times M)\dar["ev_{0,1}^*"] \\
        B \rar["I"] & \Omega^*(PM)
        \end{tikzcd}
    \end{equation}
    \item The iterated integral map $I\colon \BC(A, A, A)\to \Omega^*(PM)$ is a quasi-isomorphism. 
\end{enumerate}
\end{proposition}
\begin{proof}
    \begin{enumerate}
        \item Let $p\colon M\times\Delta^n\to M$ be the projection. There is a map $\Omega^*(M)^{\otimes k}\to \Omega^*(M)$ given by the $(k-1)$-fold wedge product, which we denote by $\wedge$. Consider the following commutative diagram:
\begin{center}
    \begin{tikzcd}
        \Omega^{*+n}(M)^{\otimes (n+2)} \dar["\wedge"] \rar & \Omega^{*+n}(M^{n+2}) \dar["\Delta"] \rar["ev^*"] & \Omega^{*+n}(PM\times\Delta^n) \rar["\int_{\Delta^n}"] \dar["const^*\otimes\id"] & \Omega^*(PM) \dar["const^*"] \\
        \Omega^{*+n}(M) \rar & \Omega^{*+n}(M) \rar["p^*"] & \Omega^{*+n}(M\times \Delta^n) \rar["\int_{\Delta^n}"] & \Omega^*(M)
    \end{tikzcd}
\end{center}

The composition along the bottom row vanishes for $n>0$ since
\begin{align*}
    \int_{\Delta^n} p^*\omega = \omega \int_{\Delta^n} 1
\end{align*}
which vanishes if $1\in \Omega^0(M)$ is not an $n$-form. For $n=0$, the space $\Delta^0$ is a single point and the composition along the top row is the identity. Taking the direct sum over $n\geq 0$ shows that Diagram \ref{diag:path-models-0-1} commutes. 

\item Consider the following commutative diagram:
\begin{center}
    \begin{tikzcd}
        \Omega^*(PM) &\lar[swap, "\int_{\Delta^n}"] \Omega^{*+n}(PM\times\Delta^n) &\lar[swap, "ev^*"] \Omega^{*+n}(M^{n+2}) &\lar \Omega^{*}(M)^{\otimes (n+2)}[n]\\
        \Omega^*(M\times M) \uar & \lar[swap, "\int_{\Delta^n}"] \Omega^{*+n}(M\times M\times\Delta^n)\uar &\lar \Omega^{*+n}(M\times M)\uar&\lar\Omega^*(M)^{\otimes 2}[n]\uar
    \end{tikzcd}
\end{center}
The commutativity of Diagram \ref{diag:path-models-0-2} follows from taking $n=0$. 
% The composition in the lower row vanishes for $n\neq 0$ as in (1).
% Let $\hat A=\bigoplus_{n\in \Z_{\geq 0}} A[n]$ be the complex with differential $d=d_0+d_1$ where $d_0$ is given by the differential on $A$ and $d_1$ is given by $\id\colon A[n]\to A[n-1]$ for $n$ even and $0$ otherwise. There is a quasi-isomorphism $\hat A\to A$ by projecting to the $n=0$ summand. We obtain the commutative diagram
% \begin{center}
%     \begin{tikzcd}
%         \BC \rar["i"]\dar["\wedge"] & \Omega^*(PM)\dar["const^*"] \\
%         \hat A \rar &\Omega^*(M)
%     \end{tikzcd}
% \end{center}
% One checks that the diagram in (1) is induced by this. 

\item In Diagram \ref{diag:path-models-0-1}, the bottom and right arrows are quasi-isomorphisms and the map $B\to A$ is a quasi-isomorphism by \cref{thm:bar_resolution}. Hence $I$ is a quasi-isomorphism.
\end{enumerate}
\end{proof}


Let $A_s = C^*(M)$ be the singular cochain algebra and $B_s = B(A_s, A_s, A_s)$ and denote by $I_s\colon B_c\to C^*(PM)$ the composition $B_s\to A_s\xfrom{\quiso} C^*(PM)$ in $D(Ch(k))$.
\begin{proposition}
    \begin{enumerate}
        \item The following diagram commutes in $D(Ch(k))$: 
        \begin{equation}
        \begin{tikzcd}
            B_s \rar["I_c"] \dar["\alpha"] & C^*(PM) \dar["const^*"] \\
            C^*(M) \rar[equal] & C^*(M)
        \end{tikzcd}
        \end{equation}
        \item The following diagram commutes in $D(Ch(k))$:
        \begin{equation}
            \begin{tikzcd}
            C^*(M) \otimes C^*(M) \rar \dar["\beta"] & C^*(M\times M)\dar["ev_{0,1}^*"] \\
            B_s \rar["I"] & C^*(PM)
            \end{tikzcd}
        \end{equation}
    \end{enumerate}
\end{proposition}
\begin{proof}
    The first part is by definition. For (2), we have the following diagram:
    \[\begin{tikzcd}
        C^*(M) \otimes C^*(M) \rar \dar["\beta"] & C^*(M)\otimes C^*(M) \dar["\cupp"] &\lar C^*(M\times M)\dar["ev_{0,1}^*"] \\
        B_s \rar & C^*(M)  & \lar  C^*(PM)
    \end{tikzcd}\]
\end{proof}
Note that all maps are maps of two-sided $C^*(M)$-modules, thus the proposition also holds in the derived category of $C^*(M)$ bimodules. 

% For the third diagram, let $a(a_1|\dots|a_n)a' \in A\otimes A[1]^{\otimes n}\otimes A$ and $b(a_{n+1}|\dots|a_{n+m})b' \in A\otimes A[1]^{\otimes n}\otimes A$. This gets mapped through the upper right path to 
% \begin{align*}
%     &I(a(a_1|\dots|a_n)a') \wedge I(b(a_{n+1}|\dots|a_{n+m})b') \\
%     = &\int_{\Delta^n}ev_n^*(\pi_0^*a \pi_1^*a_1\dots\pi_{n}^*a_n\pi_{n+1}^*a') \wedge \int_{\Delta^m} ev_m^*(\pi_0^*b\pi_1^*a_{1}\dots\pi_{m}^*a_{n+m}\pi_{m+1}^*b') \\
%     = & (-1)^{\epsilon_a m}\int_{\Delta^{n}\times\Delta^m} ev^*_{n,m}(\pi^*_0 a \pi_1^*a_1\dots \pi_n^*a_n \pi_{n+1}^*a'\pi^*_{n+2}b\pi^*_{n+3}a_{n+1}\dots\pi^*_{n+m+2}a_{n+m}\pi^*_{m+n+3}b') \\
%     \eqdef & (-1)^{\epsilon_a m} \int_{\Delta^{n}\times\Delta^m} ev^*_{n,m}(c)
%     \intertext{where $ev_{n,m}\colon \Delta^n\times\Delta^m\times PM\to M^{n+m+4}$ and $\epsilon_a = \deg a + deg a_1+\dots+\deg a_n + \deg a'$. By an Eilenberg Zilber argument, $\Delta^{n}\times\Delta^m$ splits into the (smooth singular) simplices $\sigma_{\nu} \times \sigma_{\mu}\colon\Delta^{n+m}\to\Delta^n\times\Delta^m$ with orientation sign $\sgn(\mu,\nu)$, where $(\mu,\nu)\in \Sh(n,m)$ are the shuffle permutations of $m+n$ elements.}
%     =& (-1)^{\epsilon_a m}\sum_{(\mu,\nu)\in\Sh(n,m)} \sgn(\mu,\nu) \int_{\sigma_{\mu}\times \sigma_{\nu}} ev_{n,m}^*c \\
%     =& (-1)^{\epsilon_a m}\sum_{(\mu,\nu)\in\Sh(n,m)} \sgn(\mu,\nu) \int_{\Delta^{n+m}} (\sigma_{\mu}\times \sigma_{\nu}\times \id)^*ev^*_{n,m} c
% \end{align*}
% We compute the composition $ev_{n, m} \comp (\sigma_{\nu}\times\sigma_{\mu}\times\id)$:
% \begin{align*}
%     ev_{n, m}(\sigma_{\nu}\times\sigma_{\mu}\times\id(t_1,\dots, t_{n+m}, \gamma)) &= (\gamma(0), \gamma(t_{\mu(0)}), \dots, \gamma(t_{\mu(n)}), \gamma(1),\\&\phantom{=} \gamma(0), \gamma(t_{\nu(0)}), \dots, \gamma(t_{\nu(m)}), \gamma(1))\\
%     &\eqdef\tau(\gamma(0), \gamma(t_1), \dots, \gamma(t_{n+m}), \gamma(1)) \\
%     &=\tau(ev_{n+m}(t_1, \dots, t_{n+m}, \gamma))
% \end{align*}
% where $\tau\colon M^{n+m+2}\to M^{n+m+4}$ is the map 
% $$ \tau(x_0, \dots, x_{n+m+1}) = (x_0, x_{\mu(1)}, \dots, x_{\mu(m)}, x_{n+m+1},x_0, x_{\nu(1)}, \dots, x_{\nu(n)}, x_{n+m+1}).$$ One can compute $\tau^*(c) = \pm \pi_0^* ab \pi_1^* a_{\sigma(1)} \dots\pi_{n+m}^*a_{\sigma(n+m)} \pi_{n+m+1}^* a'b'$. Thus we conclude

% \begin{align*}
%     &I(a(a_1|\dots|a_n)a') \wedge I(b(a_{n+1}|\dots|a_{n+m})b') \\
%     &= \pm \sum_{(\mu,\nu)\in\Sh(n,m)} \sgn(\mu,\nu) \int_{\Delta^{n+m}} ev^*_{n+m}\left(\tau^*(c)\right)\\
%     %\pi^*_0(a_0)\pi_1^*(a_{\mu(1)})\dots \pi_n^*(a_{\mu(n)})\pi_{n+1}^*(a_{n+1}) \right.\\ & \left. \pi_{n+1+1}^*(b_{0}) \pi_{n+3}^*(b_{\nu(1)})\dots\pi_{n+m+3}^*(b_m)\pi_{n+m+4}^*(b_{m+1})\right) \\
%     &= \sum_{(\sigma)\in\Sh(n,m)} (-1)^\epsilon I\left( (a b) (a_{\sigma(1)}|\dots|a_{\sigma(m+n)})(a' b')\right)
% \end{align*}
% where $\epsilon$ is the Koszul sign associated to swapping the sequence $a, a_1, \dots, a_n, b, a', a_{n+1},\dots, a_{n+m}, b'$ to the sequence $a, a', a_{\sigma(1)}, \dots, a_{\sigma(n+m)}, b, b'$, taking the elements $a_i\in A[1]$ with their shifted degrees. This is the definition of the shuffle product \ref{def:shuffle-product}. 

% \end{proof}

\subsection{Pullback-Pushout Lemma / Eilenberg Moore Theorem}\label{subsec:eilenberg_moore}
Consider the following pullback of topological spaces:
\begin{center}\label{diag:pullback-eilenberg-moore}
\begin{tikzcd}
    E\times_B X \arrow[d] \arrow[r] & E \arrow[d]{p} \\
    X \arrow[r] & B
\end{tikzcd}
\end{center}

We want to describe an algebraic model of the pullback $E\times_B X$ using an algebraic model of the diagram $E\to B\from X$. The slogan is that the pullback of the spaces should be described by the pushout of the cochain algebras. However, since cohomology is invariant with respect to homotopy, but the pullback of spaces in general is not, we consider homotopy pullbacks instead of regular pushouts. Recall that if the map $E\to B$ is a fibration, then the pullback diagram above is in fact a homotopy pullback diagram, cf.~\cref{sec:homotopy-pushouts-spaces}. Similarly, on the level of cochain algebras, one has to consider a homotopy invariant version of the pushout. 

We begin with a statement involving specific algebraic models from rational homotopy theory, specifically Sullivan models. We then generalize this to hold in a more general setting. Let $k$ be a field of characteristic $0$. 

\begin{definition}
    Let $A$ be a unital not necessarily commutative dg algebra over $k$ and let $M$ be a right $A$ module and $N$ be a left $A$ module. Then the tensor product $M\otimes_A N$ is the cokernel of the difference of the chain maps 
    $$M\otimes A\otimes N\rightrightarrows M\otimes N$$
    mapping $m\otimes a \otimes n$ to $ma \otimes n$ resp.\ $m\otimes an$.
\end{definition}

\begin{definition}\label{def:sullivan-algebra}
    A \emphi{relative Sullivan algebra} is a homomorphism of differential graded commutative algebras $(A, d)\to (A\otimes \Lambda V, D)$ for a graded vector space $V$ such that $V$ has a basis $\{v_\alpha\mid\alpha\in J\}$ where $J$ is well-ordered, such that $Dv_{\beta}\in A\otimes \Lambda V_{<\beta}$ for all $\beta\in J$, where $V_{<\beta}$ is spanned by the $v_\alpha$ with $\alpha<\beta$. 

    If $A=K$ then an algebra $(\Lambda V, D)$ satisfying the above property is called a \emphi{Sullivan Algebra}.
    %It is called \emph{minimal}\index{minimal Sullivan Algebra} if in addition the condition $\alpha<\beta\implies\deg v_\alpha \leq \deg v_\beta$ holds.
\end{definition}

For a space $X$, denote by $\APL(X)$ the complex of \emph{Sullivan's polynomial forms}, cf.\ \cite[Ch. 10]{felix2012rational}. This is a CDGA which is quasi-isomorphic to $C^*(X)$, and the assignment $X\mapsto \APL(X)$ extends to a contravariant functor. 

In \cite[2.4]{hess2007rational} there is the following statement using Sullivan models:
\begin{theorem}\label{thm:pullback-pushout-sullivan}
    Let $p\colon E\to B$ be a Serre fibration, where $E$ is path connected and $B$ is simply connected, with fiber $F$, let $f\colon X\to B$ be continuous. Suppose that $B$ or $F$ is of finite rational type. Let $A_X$ and $A_B$ be Sullivan algebras and $\iota\colon A_B\to A_E$ a relative Sullivan algebra and assume that there is a homotopy commutative diagram
    \begin{center}
    \begin{tikzcd}
        A_X \dar["\simeq"] &\lar[swap, "\phi"] A_B \dar["\simeq"]\rar["\iota"] & A_E \dar["\simeq"] \\
        \APL(X) &\lar[swap, "\APL(f)"] \APL(B) \rar["\APL(p)"] &\APL(E)
    \end{tikzcd}
    \end{center}
    with vertical quasi-isomorphisms, then the map
    $$A_X\otimes_{A_B} A_E \to \APL(E)\otimes_{\APL(B)}\APL(B) \to \APL(E\times_B X)$$
    is a quasi-isomorphism of CDGAs.
\end{theorem}
This is called the pullback-pushout lemma, because $A_X\otimes_{A_B} A_E$ is the pushout in the category of differential graded commutative algebras, and it yields an algebraic model of the pullback.


% \begin{theorem}
%     Assume $p$ is a Serre fibration with fiber $F$, so that the diagram is a homotopy pushout diagram, $E$ is path connected, either $X$ or $B$ are simply connected, and either $B$ or $F$ is of finite rational type. 
    
%     Then the natural map from the homotopy pushout (in the projective model structure of DGCAs)
%     \begin{align*}
%         \APL(X) \otimes^h_{\APL(B) }\APL(E)\to \APL(X) \otimes_{\APL(B) }\APL(E) \to \APL(E\times_B X)
%     \end{align*}
%     is a quasi-isomorphism. 
%     \end{theorem}
%     \begin{proof}
%         Sullivan algebras are cofibrant and relative Sullivan algebras are cofibrations (though not every cofibrant object is a Sullivan algebra) in the projective model structure of CDGAs, see \ref{def:sullivan-algebra}. Hence by \ref{thm:homotopy_pushout_sufficient}, the pushout of the diagram $A_X \from A_B\to A_E$ is quasi-isomorphic to the homotopy pushout. The following diagram shows that the composition above is a quasi-isomorphism. 
%         \begin{center}
%         \begin{tikzcd}
%             \APL(E)\otimes^h_{\APL(B)}\APL(X) \rar& \APL(E)\otimes_{\APL(B)} \APL(X) \rar & \APL(E\times_B X) \\
%             A_E\otimes^h_{A_B}A_X \uar[swap, "\sim"] \rar["\sim"]& A_E\otimes_{A_B}A_X \uar\ar[ur, "\sim"] & 
%         \end{tikzcd}
%         \end{center}
%     \end{proof}

Recall from \cref{subsec:bar-constr-derived} that the two sided bar construction is a construction of the derived tensor product $\otimes_A^L$, hence we write $M\otimes_A^L N = \BC(M, A, N)$. In particular, the left derived tensor product preserves quasi-isomorphisms \cref{thm:bar-quiso}, which the normal tensor product over $A$ generally does not, hence $\otimes^L$ is more adapted to the computation of cohomology. Using this construction, we may transfer the preceding theorem to more general algebraic models and obtain the formulation of the pullback pushout lemma as in \cite{naef2019string}.

We assume that we have a pullback diagram as in Diagram \ref{diag:pullback-eilenberg-moore} and a commutative diagram of differential graded algebras
\begin{center}
    \begin{tikzcd}
        A_X \dar["\simeq"] &\lar[swap, "\phi"] A_B \dar["\simeq"]\rar["\iota"] & A_E \dar["\simeq"] \\
        \APL(X) &\lar[swap, "\APL(f)"] \APL(B) \rar["\APL(p)"] &\APL(E)
    \end{tikzcd}
\end{center}
where the vertical maps are quasi-isomorphisms. 

\begin{theorem}\label{thm:pullback-pushout}
Assume $p$ is a Serre fibration with fiber $F$, so that Diagram \ref{diag:pullback-eilenberg-moore} is a homotopy pushout diagram, $E$ is path connected, $B$ and $X$ are simply connected, and either $B$ or $F$ is of finite rational type. Then the natural map
$$A_X\otimes_{A_B}^L A_E \to \APL(E\times_B X)$$
is a quasi-isomorphism. In particular, the following map is a quasi-isomorphism $$\APL(E)\otimes^L_{\APL(B)} \APL(X)\to \APL(E\times_B X).$$
\end{theorem}
\begin{proof}
    Consider the following commutative diagram.
    \begin{center}
    \begin{tikzcd}
        \APL(E) \otimes_{\APL(B)}^L \APL(X)) \dar["\quiso"] \rar & \APL(E)\otimes_{\APL(B)} \APL(X) \dar \rar & \APL(E\times_B X) \\
        A_E\otimes^L_{A_B} A_X \rar & A_E\otimes_{A_B}A_X \ar[ur] & 
    \end{tikzcd}
    \end{center}
    \begin{enumerate}
    \item We first use as $A_B, A_E$ and $A_X$ the Sullivan models from \cref{thm:pullback-pushout-sullivan} and deduce that the upper horizontal composition is a quasi-isomorphism. By \cite[Thm 14.3]{felix2012rational} such models exist (this is where we need the additional assumption on $X$).
    The map between the $\otimes^L$ terms is a quasi-isomorphism since it is induced by quasi-isomorphisms, see \ref{thm:bar-quiso}. 
    Since the map $A_B\to A_E$ is a relative Sullivan algebra, $A_E$ is a cofibrant $A_B$-algebra. Thus by \ref{cor:bar-construction-is-derived-tensor-product}, the map $A_E\otimes^L_{A_B} A_X\to A_E\otimes_{A_B} A_X$ is a quasi-isomorphism. The map $A_X\otimes_{A_B} A_E \to \APL(E\times_B X)$ is a quasi-isomorphism by \cref{thm:pullback-pushout-sullivan}. This shows that the upper horizontal composition is a quasi-isomorphism.
    \item Now for general $A_B, A_E, A_X$, we know that the upper horizontal composition and the left vertical composition are quasi-isomorphisms. This shows the theorem. 
    \end{enumerate}
\end{proof}

\begin{remark}
    A closer inspection of the proof and \cite[Thm 14.3]{felix2012rational} reveals that in place of $X$ being simply connected, it is enough that $H^1(X) = 0$. 
\end{remark}

\begin{remark}\label{rmk:pullback-pushout}
    One can replace $\APL$ in the statement of \cref{thm:pullback-pushout} with other differential graded algebras quasi-isomorphic to $\APL$. For example, by \cite[10.10]{felix2012rational} there is a chain of quasi-isomorphisms of cochain algebras connecting $\APL$ and the singular cochain complex $C^*$. Then the maps 
    \begin{align*}
        \APL(E)\otimes^L_{\APL(B)} \APL(X) &\to \APL(E\times_B X) \\
        C^*(E)\otimes^L_{C^*(B)} C^*(X) &\to C^*(E\times_B X)
    \end{align*}
    are connected by a commutative zigzag of quasi-isomorphisms, so either is a quasi-isomorphism if and only if the other is.
\end{remark}


\begin{remark}
    Originally, this was shown in an analogous version for homology using cotensor products, as the Eilenberg-Moore spectral sequence, see~\cite{eilenberg1966homology}. 
    There are also more general statements, working directly with $C^*$ and not necessarily using field coefficients, see \cite[Appendix A]{toen2020probl}. 
\end{remark}

% Note that there is an equivalent pullback diagram
% \begin{center}
% \begin{tikzcd}
%     E\times_B X \arrow[d] \arrow[r] & B \arrow[d] \\
%     E\times X \arrow[r] & B \times B
% \end{tikzcd}
% \end{center}
% which identifies the homotopy fiber of the vertical maps, hence there is a homotopy fiber sequence $\Omega B \to E\times_B X \to E\times X$, i.e. the homotopy fiber of $E\times_B X \to E\times X$ is the loop space $\Omega B$.



\subsection{Models for Mapping Spaces from Graphs}\label{subsec:graph-models}
Let again $M$ be a compact, connected and simply connected, oriented manifold. In this section we model mapping spaces $\Map(G, M)$ where $G$ is (the geometric realization of) a graph, and maps between those spaces. This includes for example the loop space and the figure eight space of $M$. The main ingredient is the iterated integral map of the previous subsection and the pullback pushout lemma, \cref{thm:pullback-pushout}. Our model is not stated in this generality in \cite{naef2019string}. Note that if there is more than one edge, then our model is different from the model given by Patras and Thomas for mapping spaces from simplicial sets into spaces, see \cite{patras2003cochain}.

Let $G$ be a graph given by ordered finite sets $E$ of edges and $V$ of vertices, with source and target maps $s, t\colon E\to V$. To this graph is associated a topological space which shall also be denoted by $G$. We construct a complex $A^{\otimes G}$ which is quasi-isomorphic to $\Omega^*(\Map(G, M))$. This is constructed using a copy of the bar construction for each edge and a copy of $A$ for each vertex, which are assembled with a relative tensor product. Figure \ref{fig:graph-model-example} depicts an example, using a graph with two nodes, two parallel edges and a lobe. 

The space $G$ is the pushout in the following diagram of spaces
\begin{center}
    \begin{tikzcd}
        E\times \{0, 1\} \rar["s\coprod t"]\dar& V\dar\\
        E\times I \rar & G
    \end{tikzcd}
\end{center}
Applying $\Map(\blank, M)$ induces a diagram as follows, which exhibits $\Map(G, M)$ as a pullback. 
\begin{center}\label{diag:mapping-space-pullback}
    \begin{tikzcd}
        \Map(E\times \{0, 1\}, M) & \lar[swap, "\phi"] \Map(V, M)  \\
        \Map(E\times I, M) \uar[swap, "\psi"] & \lar \Map(G, M) \uar
    \end{tikzcd}
\end{center}
We begin by creating a model of the diagram $\Map(E\times I, M) \to \Map(E\times \{0, 1\}, M)  \from \Map(V, M)$. We then apply \cref{thm:pullback-pushout} to show that the pushout of the model diagram will be a model of the pullback of the spaces. 



Let $A$ be a DGCA. For any finite ordered set $S$, we can define the tensor product $A^{\otimes S} = \bigotimes_{s\in S} A$ and equip it with the usual tensor product chain complex and algebra structure. Given a map $f\colon S\to S'$ with $S = \{s_1,\dots, s_n\}$ and $S' = \{s'_1,\dots, s'_l\}$, we can construct a map $A^{\otimes S}\to A^{\otimes S'}$ using the algebra structure of $A$:
\begin{align*}
    a_{s_1}\otimes\dots\otimes a_{s_n}\mapsto (-1)^\epsilon \Prod_{f(s) =s'_1} a_s \otimes\dots \otimes \Prod_{f(s) =s'_l} a_s
\end{align*}
where $(-1)^\epsilon$ is the Koszul sign from reordering $a_{s_1}\otimes\dots\otimes a_{s_n}$ into the order on the right hand side. 

Let $A=\Omega^*(M)$ and $B = \BC(A, A, A)$. Consider the following maps
\begin{align*}
    \Phi\colon& (A^{\otimes 2})^{\otimes E}\to B^{\otimes E} \\
    \Psi\colon& (A^{\otimes 2})^{\otimes E} \to A^{\otimes V}\otimes A^{\otimes V}\to A^{\otimes V} 
\end{align*}
The map $\Phi$ is the product of the inclusions $A^{\otimes 2}\to B$, given simply by
$$a_{e_1}\otimes a'_{e_1}\otimes\dots\otimes a_{e_n}\otimes a'_{e_n} \mapsto (a_{e_1}\otimes a'_{e_1}) \otimes \dots\otimes (a_{e_n}\otimes a'_{e_n}).$$ 
The map $\Psi$ is induced by the map $s\coprod t\colon E\coprod E\to V\coprod V$ and the multiplication on $A$: it maps 
$$a_{e_1}\otimes a'_{e_1}\otimes\dots\otimes a_{e_n}\otimes a'_{e_n} \mapsto (-1)^\epsilon \Prod_{s(e) = v_1}a_e \Prod_{t(e) = v_1} a'_e \otimes \dots\otimes \Prod_{s(e) = v_n}a_e \Prod_{t(e) = v_n} a'_e$$
for $V = \{v_1,\dots, v_n\}$, where $\epsilon$ is the Koszul sign of permuting the factors $a_{e_1}, a'_{e_1}, \dots, a_{e_n}, a'_{e_n}$ into the sequence on the right hand side. 

We can relate $\phi^*, \psi^*$ to $\Phi, \Psi$ through the following diagram: 
\begin{center}
    \begin{tikzcd}
        B^{\otimes E} \dar["I^{\otimes E}"] & \lar[swap, "\Phi"] (A^{\otimes 2})^{\otimes E}\dar \rar["\Psi"] & A^{\otimes V} \dar[equal] \\
        \Omega^*(PM)^{\otimes E}\dar & \lar \Omega^*(M\times M)^{\otimes E} \dar\rar & \Omega^*(M)^{\otimes V}\dar \\
        \Omega^*(\Map(I, M)^{\times E}) \dar[equal] & \lar[swap, "\phi^*"]\dar[equal] \Omega^*(\Map(\{0, 1\}, M)^{\times E}) \rar["\psi^*"] & \Omega^*(\Map(\{pt\}, M)^{\times V})\dar[equal] \\
        \Omega^*(\Map(E\times I, M)) & \lar[swap, "\phi^*"] \Omega^*(\Map(E\times \{0, 1\}, M)) \rar["\psi^*"] & \Omega^*(\Map(V, M)) \\
    \end{tikzcd}
\end{center}

Thus $\Phi$ and $\Psi$ are models of $\phi$ and $\psi$:
\begin{lemma}\label{lem:graph-model-aid}
    There is a commutative diagram where each vertical map is a quasi-isomorphism:
    \begin{center}
        \begin{tikzcd}
            B^{\otimes E} \dar & \lar[swap, "\Phi"] (A^{\otimes 2})^{\otimes E}\dar \rar["\Psi"] & A^{\otimes V} \dar \\
            \Omega^*(\Map(E\times I, M)) & \lar[swap, "\phi^*"] \Omega^*(\Map(E\times \{0, 1\}, M)) \rar["\psi^*"] & \Omega^*(\Map(V, M)) \\
        \end{tikzcd}
    \end{center}
\end{lemma}

Recall that the tensor product $M\otimes_A N$ of two differential graded modules $M, N$ over a differential graded algebra $A$ is the quotient of the tensor product $M\otimes N$ by the differential ideal generated by $ma \otimes n - m\otimes an$ for homogeneous elements $m\in M, a\in A, n\in N$. 

Through the maps $\Phi, \Psi$, there is an $(A^{\otimes 2})^{\otimes E}$-module structure on $B^{\otimes E}$ and $A^{\otimes V}$. 
\begin{definition} The graph complex $A^{\otimes G}$ of $\Map(G, M)$ is the complex $$A^{\otimes G} = B^{\otimes E}\otimes_{(A^{\otimes 2})^{\otimes E}} A^{\otimes V}.$$\end{definition}
One can show that $\Phi$ and $\Psi$ are maps of algebras and $A^{\otimes G}$ is the pushout in the category of differential graded commutative algebras. Thus $A^{\otimes G}$ is defined as the pushout of the model and we have an algebraic analogue of Diagram \ref{diag:mapping-space-pullback}:

\begin{center}\label{diag:mapping-space-pullback-algebraic}
    \begin{tikzcd}
        (A^{\otimes 2})^{\otimes E} \dar["\Phi"] \rar["\Psi"] & A^{\otimes V} \dar \\
        B^{\otimes E} \rar & A^{\otimes G}
    \end{tikzcd}
\end{center}


\begin{figure}[ht]
    \center
    \begin{tikzpicture}
        \node[shape=circle, draw=black, fill, label={[xshift=-0.5cm, yshift=0.0cm]$A$}] (A) at (0,0) {} ;
        \node[shape=circle, draw=black, radius=4pt, fill, label={[xshift=0.5cm, yshift=-0.5cm]$A$}] (B) at (2,2) {};
        \draw (A) edge[bend right=60] (B);
        \node (C) at (-0.6, 1.8) {$ \BC(A, A, A)$};
        \path [-] (A) edge[bend right=-60] (B);
        \node (C) at (2.9, 0.5) {$\BC(A, A, A)$};
        \draw[postaction={decorate}] 
        (0mm,0mm) 
          .. controls (-25mm,-0mm) and (-0mm,-25mm) ..
        (0mm,0mm)
          node[pos=0.6,below] {$ \BC(A, A, A)$};
    \end{tikzpicture}
    \hfill
    \begin{tikzpicture}
        \node[shape=circle, draw=black, fill, label={[xshift=-0.5cm, yshift=0.0cm]$a$}] (A) at (0,0) {} ;
        \node[shape=circle, draw=black, fill, label={[xshift=0.5cm, yshift=-0.5cm]$a'$}] (B) at (2,2) {};
        \draw (A) edge[bend right=60] (B);
        \node (C) at (-0.6, 1.8) {$ a_1\otimes\dots\otimes a_n$};
        \path [-] (A) edge[bend right=-60] (B);
        \node (C) at (2.9, 0.5) {$a'_1\otimes\dots\otimes a'_n$};
        \draw[postaction={decorate}] 
        (0mm,0mm) 
          .. controls (-25mm,-0mm) and (-0mm,-25mm) ..
        (0mm,0mm)
          node[pos=0.6,below] {$ a''_1\otimes\dots\otimes a''_n$};
    \end{tikzpicture}

    \caption{The above sketches the complex $A^{\otimes G}$ for a graph with two vertices and three edges. The left image depicts the complex, the right image depicts a generating element. As graded vector spaces, $B = A\otimes T(A[1])\otimes A$ where $T( A[1]) = \bigoplus_{n\in \Z_{\geq 0}} A[1]^{\otimes n}$. In this example, as graded vector spaces, $A^{\otimes G} = A^{\otimes 2} \otimes (T(A[1]))^{\otimes 3}$, where each factor corresponds to a vertex or an edge. }\label{fig:graph-model-example}\label{fig:example-graph-complex}
\end{figure}

An example of the graph complex is depicted in \cref{fig:example-graph-complex}. We picture a homogeneous element of $A^{\otimes G}$ as the graph $G$ decorated with elements of $A$ resp.~ $T(A[1])=\bigoplus_{n\geq 0} A[1]^{\otimes n}$ at the vertices resp.~the edges.
We illustrate the differential of $A^{\otimes G}$ as follows. The differential $d$ is a sum $d=d_0+d_1$ where $d_0$ is induced only by the differential of $A$. The differential $d_1$ is defined using the product on $A$ and the source and target maps of the graph. The following formula depicts the computation of the differential $d_1$: At any edge, one modifies the decorations of the graph as depicted. This is then summed over all edges, so that each edge generates $n+1$ summands. 
\begin{align*}
    d_1\left(
        \tikz[baseline=-.5ex]{
        \fill (0, 0) circle (2pt) node[anchor=north] {$a$};
        \fill (3, 0) circle (2pt) node[anchor=north] {$a'$};
        \draw (0,0) -- (3,0) ;
        \draw (1.5, 0) node[anchor=south]{$a_1\otimes\dots\otimes a_n$};
        \draw (0,0) -- (-0.3, -0.3);
        \draw (0,0) -- (-0.44, 0);
        \draw (0,0) -- (-0.3, 0.3);
        \draw (3,0) -- (3.3, -0.3);
        \draw (3,0) -- (3.45, 0);
        \draw (3,0) -- (3.3, 0.3);
    }\right) = 
    &\pm
    \left(
        \tikz[baseline=-.5ex]{
        \fill (0, 0) circle (2pt) node[anchor=north west] {$a a_1$};
        \fill (3, 0) circle (2pt) node[anchor=north] {$a'$};
        \draw (0,0) -- (3,0) ;
        \draw (1.5, 0) node[anchor=south]{$a_2\otimes\dots\otimes a_n$};
        \draw (0,0) -- (-0.3, -0.3);
        \draw (0,0) -- (-0.44, 0);
        \draw (0,0) -- (-0.3, 0.3);
        \draw (3,0) -- (3.3, -0.3);
        \draw (3,0) -- (3.45, 0);
        \draw (3,0) -- (3.3, 0.3);
    }\right)\\
    &\pm
    \sum_{i=1}^{n-1}
    \left(
        \tikz[baseline=-.5ex]{
        \fill (0, 0) circle (2pt) node[anchor=north] {$a$};
        \fill (5, 0) circle (2pt) node[anchor=north] {$a'$};
        \draw (0,0) -- (5,0) ;
        \draw (2.5, 0) node[anchor=south]{$a_1\otimes\dots\otimes a_ia_{i+1}\otimes a_n$};
        \draw (0,0) -- (-0.3, -0.3);
        \draw (0,0) -- (-0.44, 0);
        \draw (0,0) -- (-0.3, 0.3);
        \draw (5,0) -- (5.3, -0.3);
        \draw (5,0) -- (5.45, 0);
        \draw (5,0) -- (5.3, 0.3);
    }\right)\\
    &\pm
    \left(
        \tikz[baseline=-.5ex]{
        \fill (0, 0) circle (2pt) node[anchor=north] {$a$};
        \fill (3, 0) circle (2pt) node[anchor=north east] {$a_na'$};
        \draw (0,0) -- (3,0) ;
        \draw (1.5, 0) node[anchor=south]{$a_1\otimes\dots\otimes a_{n-1}$};
        \draw (0,0) -- (-0.3, -0.3);
        \draw (0,0) -- (-0.44, 0);
        \draw (0,0) -- (-0.3, 0.3);
        \draw (3,0) -- (3.3, -0.3);
        \draw (3,0) -- (3.45, 0);
        \draw (3,0) -- (3.3, 0.3);
    }\right)
\end{align*}

\begin{construction}
    For a finite ordered graph $G$ and a manifold $M$, the \emph{iterated integral map}\index{iterated integral map!for graph mapping spaces} for $\Map(G, M)$ is the composition
    \begin{align*}
        I_G\colon A^ {\otimes G}\to\Omega^*(\Map(E\times I, M))\otimes_{\Omega^*(\Map(E\times\{0,1\}, M))} \Omega^*(\Map(V, M)) \to \Omega^*(\Map(G, M))
    \end{align*}
\end{construction}

\begin{remark}
    We can explicitly compute the map $$I_G\colon A^{\otimes G}\to \Omega^*(\Map(G, M)).$$ As graded vector spaces, $A^{\otimes G}$ is a direct sum of $\bigotimes_{e\in E} A[1]^{k_e}\oplus A^{\otimes V}$ over all $k_e\geq 0$ for $e\in E$: the outer $A$ factors of the bar construction are identified with the $A$ factors of the vertices by taking the tensor product relative to $(A^{\otimes 2})^{\otimes E}$. Write $s=\sum_{e\in E} k_e$. On each direct summand, $I_G$ is given by 
\begin{align*}
    \bigotimes_{e\in E} A[1]^{\otimes k_e} \otimes A^{\otimes V} \to \Omega^{*+s}\left(M^{s+|V|}\right)\xto{ev^*} \Omega^{*+s}\left(\Map(G, M) \times \Prod_{e\in E} \Delta^{k_e}\right) \xto{\int} \Omega^*(\Map(G, M))
\end{align*}
where the evaluation map $$ev=ev_{\{k_e\}}\colon \Map(G, M)\times \Prod_{e\in E} \Delta^{k_e} \to  M^{s+|V|}$$ evaluates each element of the mapping space at the times in $\Delta^{k_e}$ along the edge $e$ and at each vertex $v$. 

For example, if $G=\ocircle_1=S^1$ is the circle with one vertex and one edge, then $ev_n\colon LM\times \Delta^n\to M^n\times M$ is given by mapping $t_1,\dots, t_n, \gamma\mapsto \gamma(t_1),\dots,\gamma(t_n), \gamma(0)$.
\end{remark}

To apply \cref{thm:pullback-pushout} we need to add the assumption that $M$ is of finite type. Here a manifold is called of finite type if its cohomology is finite dimensional in each degree. 

\begin{theorem}\label{thm:graph-mapping-space}
    Let $M$ be a simply connected manifold and of finite type. Then the iterated integral map 
    $$I_G\colon A^{\otimes G} \to \Omega^*(\Map(G, M)).$$
    is a quasi-isomorphism, hence $A^ {\otimes G}$ is a model of $\Map(G, M)$.

    Moreover, for a morphism of graphs $G\to G'$, there is a commutative diagram
    \begin{center}
    \begin{tikzcd}
        A^{\otimes G} \dar \rar["I_G"] & \Omega^*(\Map(G, M)) \dar \\
        A^{G'}\rar["I_{G'}"] & \Omega^*(\Map(G', M))
    \end{tikzcd}
    \end{center}
\end{theorem}
We use assumption \ref{assumption} in this proof. 
\begin{proof}
    We apply the pullback-pushout theorem \ref{thm:pullback-pushout} to the pullback diagram of $\Map(G, M)$
    \begin{center}
        \begin{tikzcd}
            \Map(E\times \{0, 1\}, M) & \lar[swap, "\phi"] \Map(V, M)  \\
            \Map(E\times I, M) \uar[swap, "\psi"] & \lar \Map(G, M) \uar
        \end{tikzcd}
    \end{center}
    All spaces here are connected and simply connected since $M$ is. The map $\Map(E\times I, M)\to\Map(\{0,1\}\times E, M)$ is a Serre fibration (it is a product of the evaluation maps $PM\to M\times M$) hence the diagram is a homotopy pullback diagram. 
    For the application of \cref{thm:pullback-pushout} we use the models from \cref{lem:graph-model-aid}. By \cref{rmk:pullback-pushout} we may apply the theorem with $\Omega^*$ in place of $\APL$, relying on \cref{assumption}. 

    Thus the composition $$B^{\otimes E}\otimes^L_{(A^{\otimes 2})^{\otimes E}} A^{\otimes V} \to B^{\otimes E}\otimes_{(A^{\otimes 2})^{\otimes E}} A^{\otimes V} \to \Omega^*(M^G)$$ is quasi-isomorphism. 

    Recall from \cref{lem:bar-cofibrant} that $B$ is a cofibrant $A^{\otimes 2}$ module, hence $B^{\otimes E}$ is a cofibrant $(A^{\otimes 2})^{\otimes E}$ module. By \cref{cor:bar-construction-is-derived-tensor-product}, the first map in the composition is a quasi-isomorphism, and so the map $$B^{\otimes E}\otimes_{(A^{\otimes 2})^{\otimes E}} A^{\otimes V} = A^{\otimes G}\to \Omega^*(\Map(G, M))$$
    is also a quasi-isomorphism.
\end{proof}


We can now easily give models for common spaces and maps in string topology. Let $\ocircle_1$ be the graph with one vertex and one edge, thus $LM = \Map(\ocircle_1, M)$. Further let $8$ be the graph with one vertex and two edges, so $LM\times_M LM = \Map(8, M)$. Let $\ocircle_2$ be the circle graph with two points and let $\ocircle_1\coprod \ocircle_1$ be the coproduct of graphs (disjoint union) of two copies of $\ocircle_1$.
\begin{corollary}\label{lem:model-quasi-iso-examples}
    The following maps are quasi-isomorphisms if $M$ is simply connected and of finite type.
    \begin{align*}
        B\otimes_{A^{\otimes 2}} A \xto{I_{\ocircle_1}} \Omega^*(LM)
    \end{align*}
    \begin{align*}
        (B\otimes B)\otimes_{A^{\otimes 2}\otimes A^{\otimes 2}} A^{\otimes 2} \xto{I_{\ocircle_2}}\Omega^*(Map(\ocircle_2, M))
    \end{align*}
    \begin{align*}
        (B\otimes B)\otimes_{A^{\otimes 2}\otimes A^{\otimes 2}} A \xto{I_{8}} \Omega^*(Map(8, M))
    \end{align*}
    \begin{align*}
        (B\otimes_{A^{\otimes 2}}A) \otimes (B\otimes_{A^{\otimes 2}} A) \xto{I_{\ocircle_1\coprod\ocircle_1}} \Omega^*(LM\times LM)
    \end{align*}
    \begin{align*}
        B\otimes_A B\to \Omega^*(PM\times_M PM)
    \end{align*}

    The following diagram commutes:
    \begin{center}
    \begin{tikzcd}
        (B\otimes B)\otimes_{A^{\otimes 4}} A \rar["I_8"] & \Omega^*(\Map(8)) \\
        (B\otimes_{A^{\otimes 2}}A) \otimes (B\otimes_{A^{\otimes 2}} A)\uar \rar["\ocircle_1\coprod \ocircle_1"] & \Omega^*(LM\times LM) \uar
    \end{tikzcd}
    \end{center}The diagram follows from the naturality of $I$ with respect to the map $\ocircle_1\coprod \ocircle_1\to 8$.
\end{corollary}

We obtain similar results using the singular chain complex. Denote by $A_s = C^*(M)$ and $B_s = \BC(A_s, A_s, A_s)$.
\begin{lemma}
    Let $G$ be a graph as above.
    There is a commutative diagram where each vertical map is a quasi-isomorphism:
    \[\begin{tikzcd}
        B_s^{\otimes E} \dar["\quiso"] & \dar["\quiso"] \lar  (A_s^{\otimes 2})^{\otimes E} \rar & A_s^{\otimes V} \dar["\quiso"]  \\
        A_s^{\otimes E} & \lar (A_s^{\otimes 2})^{\otimes E} \rar & A_s^{\otimes V} \\
        C^*( C^0(E\times I, M)) \uar[swap, "\quiso"] & \lar  C^*( C^0(E\times \{0, 1\}, M)) \rar \uar[swap, "\quiso"] &  C^*( C^0(V, M))\uar[swap, "\quiso"]
    \end{tikzcd}\]
\end{lemma}

The quasi-isomorphisms $C^*( C^0(E\times I, M)) \to C^*( C^0(M))^{\otimes E}$ are a generalization of the quasi-isomorphism $C^*(PM)\to C^*(M)$. 

We can construct a complex $A_s^{\otimes G} = B_s^{\otimes E} \otimes_{A_s^{\otimes 2E}} A_s^{\otimes V}$ as above. With a similar argument as in \cref{thm:graph-mapping-space}, without using \cref{assumption}, one can show the following:
\begin{theorem}\label{thm:graph-mapping-space-singular}
    There is a zigzag of quasi-isomorphisms which are maps of two-sided $A_s$-modules.
    $$A_s^{\otimes G} \xfrom{\quiso} \dots \xto{\quiso} C^*( C^0(G, M))$$
    which is natural with respect to maps in $G$. In detail, this is
        \begin{align*}
            A_s^{\otimes G} &\xfrom{\quiso} B_s^{\otimes E} \otimes^L_{(A_s^{\otimes 2})^{\otimes E}} A_s^{\otimes V} \\&\xto{\quiso} A_s^{\otimes E} \otimes^L_{(A_s^{\otimes 2})^{\otimes E}} A_s^{\otimes V}\\ &\xfrom{\quiso} C^*( C^0(E\times I, M))\otimes^L_{C^*( C^0(E\times \{0, 1\}, M))} C^*( C^0(V, M)) \\&\xto{\quiso} C^*( C^0(G, M))
        \end{align*}
    % As a map in $D(Ch(k))$ or a map of derived two sided $A_s$-modules, this is equal to the map 
    % $$A_s^{\otimes G} \to A_s^{\otimes E } \otimes_{A_s^{\otimes 2E}} A_s^{\otimes V} \from C^*(\Map(E\times I, M))\otimes_{C^*(\Map(E\times \{0, 1\}, M))} C^*(\Map(V, M)) \to C^*(\Map(G, M))$$
\end{theorem}

In particular there are quasi-isomorphisms as in \cref{lem:model-quasi-iso-examples} using the singular cochain complex. 


\subsection{Concatenation and Splitting map}\label{subsec:model-concatenation} 
Concatenating and splitting up paths is not modeled by the theory of the previous subsection. 

The \emph{concatenation of paths} is defined as the map 
\begin{align*}
    c\colon PM\times_mPM&\to PM \\
    c(\gamma_1, \gamma_2)(t) &= \begin{cases}\gamma_1(\frac 12 t)&\text{if}\ t\leq\frac 12 \\ \gamma_2(\frac 12 t + \frac 12) & \text{if}\ t\geq \frac 12 \end{cases}
\end{align*}
This induces a concatenation of loops $c\colon LM\times_MLM \to LM$.
We model the concatenation of paths by the \emph{deconcatenation coproduct} on $B$
\begin{align*}
    \bar c\colon B&\to B\otimes_A B \\
    a\otimes a_1 \otimes \dots \otimes a_n \otimes a'&\mapsto \sum_{k+l=n} a\otimes a_1 \otimes \dots \otimes a_k \otimes  1 \otimes a_{k+1} \otimes \dots \otimes a_{k+l} \otimes  a'
\end{align*}
The following lemma shows that $\bar c$ models the concatenation of paths $c$ on cohomology and $\bar c\otimes\id\colon B\otimes_{A^{\otimes 2}} A\to (B\otimes B)\otimes_{A^{\otimes 2}\otimes A^{\otimes 2}} A$ models the concatenation of loops. 
\begin{lemma}\label{lem:model-concatenation}
    Let $c\colon PM\times_M PM\to PM$ be the concatenation of paths. The following diagrams commute:
    \begin{equation}\label{diag:concatenation}
        \begin{tikzcd}
            B \rar \dar["\bar c"] & \Omega^*(PM) \dar["c^*"] \\
            B \otimes_A B \rar & \Omega^*(PM\times_M PM)
        \end{tikzcd}
    \end{equation}
    \qquad
    \begin{equation}\label{diag:concatenation-2}
    \begin{tikzcd}
        B\otimes_{A^{\otimes 2}}A \dar[swap, "\bar c"]\rar["I_{\ocircle_1}"] & \Omega^*(LM) \dar[swap, "c^*"] \\
        (B\otimes B)\otimes_{A^{\otimes 2}\otimes A^{\otimes 2}} A\rar["I_{8}"] &\Omega^*(LM\times_M LM)
    \end{tikzcd}
    \end{equation}
\end{lemma}
\begin{proof}
    This is stated in \cite{naef2019string} without proof. We give a detailed proof here. 
    \begin{enumerate}
        \item For Diagram \ref{diag:concatenation}: let $k+l=n$, consider the maps
        \begin{align*}
            d_{k,l}\colon \Delta^k\times\Delta^l&\to \Delta^n\\
            (t_1, \dots, t_k), (t_{k+1}, \dots, t_{k+l}) &\mapsto \left(\frac 12 t_1, \dots, \frac 12 t_k, \frac 12 + \frac 12 t_{k+1}, \dots, \frac 12 + \frac 12 t_{k+l}\right)
        \end{align*}
        so that the images of the $d_{k,l}$ cover $\Delta^n$ and are disjoint except at the boundary. Consider the following diagram with $k+l=n$. 

% \begin{figure}\label{fig:path_models_1}
    \[
    \begin{tikzcd}[font=\footnotesize, column sep = 2em, center picture]
        A^{\otimes n+2}[n] \rar\dar & \Omega^{*+n}(M^{n+2}) \rar["ev^*"]\dar & \Omega^{*+n}(PM\times \Delta^n) \rar["\int_{\Delta^n}"]\dar["(d_{k,l}\times c)^*"] & \Omega^*(PM) \dar["c^*"] \\
        A^{\otimes k+l+3}[n] \rar & \Omega^{*+n}(M^{k+2}\times_M M^{l+2}) \rar["ev_{k,l}"] & \Omega^{*+n}(PM\times_M PM\times \Delta^k\times\Delta^l) \rar["\int_{\Delta^k\times\Delta^l}"] & \Omega^*(PM\times_M PM)\\
        %A^{\otimes k+2}[k]\otimes_{A} A^{\otimes l+2}[l] \rar\uar[swap, "\iso"] & \Omega^{*+k}(M^{k+2})\otimes_{A} \Omega^{*+l}(M^{l+2}) \uar\rar & \Omega^{*+k}(PM\times\Delta^k)\otimes_{A} \Omega^{*+l}(PM\times\Delta^l) \rar["\int_{\Delta^k}\otimes\int_{\Delta^l}"]\uar & \Omega^*(PM)\otimes_{A} \Omega^*(PM) \uar
    \end{tikzcd}
    \]
% \end{figure}

All squares commute except for the right, which commutes only after summing over all $k, l$ with $k+l=n$: 

\begin{align*}
    c^*\int_{\Delta^n}\omega &= c^*\sum_{k+l=n} \int_{\mathrm{im} (d_{k,l})} \omega \\
    &= \sum_{k+l=n} \int_{\Delta^k\times\Delta^l} (c\times d_{k,l})^*\omega
\end{align*}

The left hand side is the upper path of the square, the right hand side is the lower path of the square, up to commuting the factors. This concludes the proof for Diagram \ref{diag:concatenation}.

    \item For Diagram \ref{diag:concatenation-2}: By applying the functor $\blank \otimes_{A^{\otimes 2}} A$ to Diagram \ref{diag:concatenation}, we obtain the diagram
    \begin{center}
        \begin{tikzcd}
            (B\otimes_A B)\otimes_{A^{\otimes 2}} A\rar["I_{\ocircle_2}"] &\Omega^*(\ocircle_2) \\
            B\otimes_{A^{\otimes 2}}A \uar\rar["I_{\ocircle_1}"] & \Omega^*(LM) \uar
        \end{tikzcd}
    \end{center}
    The inclusion $ C^0(\ocircle_2, M)\to LM\times_M LM$ is modeled by the diagram
    \begin{center}
        \begin{tikzcd}
            (B\otimes_A B)\otimes_{A^3} A\rar &\Omega^*(LM\times_M LM) \\
            (B\otimes_A B)\otimes_{A^{\otimes 2}} A\rar \uar &\Omega^*(\ocircle_2) \uar\\
        \end{tikzcd}
    \end{center}
    as in \ref{thm:graph-mapping-space}, via the map of graphs $\ocircle_2\to 8$ mapping the two points to the pinch point of the figure $8$. Combining the two diagrams, we obtain the diagram as claimed.
\end{enumerate}
\end{proof}

The analogue for the simplicial cochain complex is the following diagram, which evidently commutes:
\begin{center}
\begin{tikzcd}
    B_s \dar["\bar c"]\rar["\alpha"] & C^*(M)\dar[equal] & \lar["const^*"] C^*(PM)\dar["c^*"] \\
    B_s\otimes_A B_s \rar & C^*(M) & \lar["const^*"] C^*(PM\times_M PM)
\end{tikzcd}
\end{center}


Recall that the splitting of paths map is defined as
\begin{align*} 
    s\colon I\times PM &\to PM\times_M PM\\
    s(t, \gamma)&=\left(r(\gamma|_{[0, t]}) , r(\gamma|_{[t, 1]})\right)
\end{align*}
where $r$ is the reparametrization map which maps a path defined on any interval to a path on the interval $[0,1]$. We denote the induced map $I\times LM\to C^0(\ocircle_2, M)$ by $s$ as well.

% \begin{remark}Recall that in order to even define $\Omega^*(LM)$, we have to use the smooth loop space. The concatenation of smooth loops $LM\times_M LM\to LM$ will generally not yield smooth loops. To fix this, we replace the smooth loop space with the subspace of smooth loops which are constant near $0\in S^1=\R/\Z$. One can show that this subspace is homotopy equivalent to the original smooth loop space, using a homotopy between the identity of $S^1$ and a map $S^1\to S^1$ which is constant near $0$. Similarly we replace $LM\times_M LM$ by the subspace of maps $S^1\vee S^1\to M$ which are constant near $0$ and similar replacements apply to $LM$. 
% \end{remark}

We introduce a model of the interval $\mathcal I = \R (1-t) \oplus \R t \oplus \R dt\subset \Omega^*(I)$, the space of Whitney forms on the interval. There is a projection 
\begin{align*}
    \Omega^*(I) &\to \mathcal I\\
    f&\mapsto f(0)(1-t) + f(1) t + \left(\int_I f\right) dt
\end{align*}
which is a quasi-isomorphism with quasi-inverse given by the inclusion $$\iota_{\mathcal I}\colon \mathcal I \subset \Omega^*(I).$$ 

Recall from \cref{thm:path-models-0} that $\alpha\colon B\to A$ is given the direct summands of $B$ by the product for $n=0$ and $0$ for $n>0$.

We model the splitting map $s$ by the map 
\begin{align*}
    \bar s \colon B\otimes_A B&\to \mathcal I\otimes B \\
    a_1 \otimes \gamma_1 \otimes a_2 \otimes \gamma_2 \otimes a_3 &\mapsto  (1-t) \otimes \alpha (a_1 \otimes \gamma_1 \otimes a_2)1_A \otimes \gamma_2 \otimes a_3 \\
    &\quad+ t\otimes a_1 \otimes \gamma_1 \otimes 1_A \alpha (a_2 \otimes \gamma_2 \otimes a_3)  \\
    &\quad +  (-1) ^{\abs{a_1\gamma_1a_2}} dt\otimes a_1 \otimes (\gamma_1\otimes a_2\otimes \gamma_2) \otimes a_3
\end{align*}
for $a_i\in A, \gamma_1\in A[1]^{\otimes k}, \gamma_2\in A[1]^{\otimes l}$.


We first consider the singular cochain complex. There we have the following diagram:
\begin{center}
\begin{tikzcd}
    \mathcal I\otimes B \rar & C^*(I\times M) & \lar C^*(I\times PM) \\
    B\otimes_A B \uar["\bar s"] \rar & C^*(M) \uar & \lar C^*(PM\times_M PM)\uar["s^*"] 
\end{tikzcd}
\end{center}
It is easy to see that this commutes and thus $s^*$ is modeled by $\bar s$ on the bar construction. 

For spaces $X, Y$ and forms $\omega_1\in\Omega^*(X), \omega_2\in\Omega^*(Y)$, we write $\omega_1\times\omega_2 = p_1^*\omega_1 \wedge p_2\omega_2\in\Omega^*(X\times Y)$, where $p_1\colon X\times Y\to X$ and $p_2\colon X\times Y\to Y$ are the projections.

The following theorem is adapted from \cite[Prop. 4.2]{naef2019string}. It shows that the splitting map is modeled by the map $\bar s$. 
\begin{theorem}\label{thm:model-splitting}
    The following diagrams commute in the derived category of chain complexes $D(Ch_\R)$:

    \begin{tikzcd}
        \mathcal I \otimes B \rar["\iota_{\mathcal I} \times I"] & \Omega^*(I\times PM) \\
        B\otimes_A B \rar["I"] \uar[swap, "\bar s"] &\Omega^*(PM\times_M PM) \uar[swap, "s^*"]
    \end{tikzcd}
    \qquad
    \begin{tikzcd}
        \mathcal I \otimes (B\otimes_{A^{\otimes 2}} A) \rar["\iota_{\mathcal I}\times I"] & \Omega^*(I\times LM) \\
        (B\otimes_A B)\otimes_{A^{\otimes 2}} A \rar["I"] \uar & \Omega^*(\Map(\ocircle_2, M))\uar[swap, "s^*"]
    \end{tikzcd}
\end{theorem}
All the horizontal maps are quasi-isomorphisms from \cref{thm:graph-mapping-space}.

\begin{proof}
    %This is stated in \cite{naef2019string} without proof. We give a detailed proof here. 
    The second diagram follows from the first diagram, by a similar argument as in the proof of \cref{lem:model-concatenation}. Thus we only consider the first diagram.

    We factor $s^*$ through $\mathcal I\otimes \Omega^*(PM)$. There is a quasi-isomorphism $\mathcal I\otimes\Omega^*(PM)\to \Omega^*(I\times PM)$ given by $\iota_{\mathcal I}\times\id$ with quasi-inverse and left inverse given by 
    \begin{align*}
        k\colon\Omega^*(I\times PM) &\to \mathcal I \otimes \Omega^*(PM) \\
        \omega & \mapsto (1-t)\omega|_{t=0} + t\ \omega|_{t=1} + dt \int_I \omega
    \end{align*}
    where $\omega|_{t=0,1}$ is the image of $\omega$ under the pullback of the inclusion $PM\to I\times PM$ at $t=0$ resp.\ $t=1$.

    Denote by $\epsilon_{0}$ resp.\ $\epsilon_1\colon PM\to PM\times_M PM$ the maps $\gamma\mapsto \mathrm{const}(\gamma(0))\times \gamma$ resp.\ $\gamma\mapsto \gamma\times \mathrm{const}(\gamma(1))$. The composition $\hat s = k\comp s^*$ is
    \begin{align*}
        \hat s\colon \Omega^*(PM\times_M PM)\to \mathcal I\otimes\Omega^*(PM)\\
        \omega \mapsto (1-t)\ \epsilon_0^*(\omega) + t\ \epsilon_1^*(\omega) + dt \int_I s^*\omega
    \end{align*}

    In $D(Ch_{\R})$, the maps $k$ and $\iota_{\mathcal I}\times \id$ are inverses and hence $(\iota_{\mathcal I}\times \id)\comp \hat s = s^*$. Hence in $D(Ch_{\R})$, the map $s^*$ is  equal to the map
    \begin{align*}
        \hat s\colon \Omega^*(PM\times_M PM)\to \Omega^*(I\times PM)\\
        \omega \mapsto (1-t)\ \epsilon_0^*(\omega) + t\ \epsilon_1^*(\omega) + dt \int_I s^*\omega
    \end{align*}

    Since the constant map $M\to PM$ is modeled by $\alpha$ from \cref{thm:path-models-0}, the maps $\epsilon_i$ are modeled by $\alpha\otimes\id$ resp.\ $\id\otimes\alpha\colon B\otimes_A B\to B$.
    
    It remains to give an algebraic model of the map $\omega\mapsto \int_I s^*\omega$. Let $r\colon \Delta^k\times\Delta^l\times I\to \Delta^{n+1}$, mapping $(s_1,\dots, s_k), (t_1,\dots, t_k), t\mapsto (ts_1, \dots, ts_k, t+(1-t)t_1, \dots, t+(1-t)t_l)$ and similarly $r'\colon \Delta^k\times I\times\Delta^l\to \Delta^{n+1}$, equal to $r$ up to swapping the factors. We consider the following diagram in the derived category, where $k+l=n$:
    \[
    \begin{tikzcd}[center picture]
        \Omega^{*}(PM\times_M PM)\dar["s^*"] & \lar[swap, "\int_{\Delta^k\times\Delta^l}"] \Omega^{*+k+l}(PM\times_M PM\times \Delta^k\times \Delta^l )\dar["(\id\times s)^*"] & \lar[swap, "ev_{k,l}"]  \Omega^{*+k+l}(M^{1+k+1+l+1})\dar[equal] \\
        \Omega^{*}(PM\times I) \dar["\int_I"] &\lar[swap, "\int_{\Delta^k\times\Delta^l}"] \Omega^{*+k+l}(PM\times I\times \Delta^k\times\Delta^l) \dar[equal] & \lar[swap, "(ev\comp (\id\times r)^*"] \Omega^{*+k+l}(M^{1+k+1+l+1}) \dar[equal] \\
        \Omega^{*-1}(PM) \dar["\pm\id"] & \lar[swap, "\int_{\Delta^k\times\Delta^l\times I}"] \dar \Omega^{*+k+l}(PM\times I\times \Delta^k\times\Delta^l) &\lar[swap, "(ev\comp (\id\times r)^*"]\dar \Omega^{*+k+l}(M^{1+k+1+l+1}) \\
        \Omega^{*-1}(PM) \dar[equal] & \lar[swap, "\int_{\Delta^k\times I\times \Delta^l}"] \dar["(\id\times r')^!"] \Omega^{*+k+l}(PM\times \Delta^k\times I\times\Delta^l) &\lar[swap, "(ev\comp (\id\times r')^*"]\dar["\id"] \Omega^{*+k+l}(M^{1+k+1+l+1}) \\
        \Omega^{*-1}(PM) & \lar[swap, "\int_{\Delta^{n+1}}"] \Omega^{*+n}(PM \times \Delta^{n+1}) &\lar[swap, "ev_{n+1}^*"] \Omega^{*+n}(M\times M^{n+1}\times M)
    \end{tikzcd}
    \]
   
    Everything except for the lower two squares commutes on the chain level. We cannot construct the umkehr map $(\id\times r')^!\colon\Omega^{*+k+l}(PM\times \Delta^k\times I\times\Delta^l)\to \Omega^{*+n}(PM\times \Delta^{n+1})$ via a fiber integral on the chain level, as we have done for other umkehr maps so far: $r'$ has finite fiber almost everywhere, but we have restricted ourselves to de Rham forms that are smooth and defined everywhere. We work in the derived category instead and pass to the singular cochain complex. 
    
    Let $p_{\Delta^k\times I\times\Delta^l}\colon M\times\Delta^k\times\Delta^l\times I \to M$ and $p_{\Delta^{n+1}}\colon M\times \Delta^{n+1}\to M$ be the projections. We replace the lower two squares with the quasi-isomorphic diagram
    \begin{center}
    \begin{tikzcd}
        C^{*-1}(M) \dar[equal] & \lar[swap, "p_{\Delta^k\times I\times\Delta^l}^!"] C^{*+k+l}(M\times \Delta^k\times I\times\Delta^l) \dar["(\id\times r)^!"] & \lar[swap, "(\Delta\comp(\id\times r))^*"] C^{*+k+l}(M^{1+k+1+l+1}) \dar["\pm\id"]\\
        C^{*-1}(M) & \lar[swap, "p_{\Delta^{n+1}}^!"] C^{*+n}(M\times \Delta^{n+1}) &\lar[swap, "\Delta^*"] C^{*+n}(M^{1+(n+1)+1})
    \end{tikzcd}
    \end{center}
    The umkehr map in the center can be constructed in $D(Ch_\R)$, because both spaces satisfy Poincaré duality relative to their boundary, compare \cref{subsec:umkehr_maps_via_pd}. 
    We then construct the map $\Omega^{*+k+l}(\Delta^k\times I\times \Delta^l\times PM)\to \Omega^{*+n}(\Delta^{n+1}\times PM)$ in $D(Ch(\R))$ as the map in the center, taken through the isomorphisms between the diagrams. Since umkehr maps compose, the left square commutes. To compute the umkehr map $r'^!$, since the map $r'\colon (\Delta^k\times I\times \Delta^l, \partial \Delta^k\times I\times \Delta^l)\to (\Delta^{n+1}, \Delta^{n+1})$ preserves the orientation, the fundamental class is preserved by $r_*$. So $r^!$ maps $1$ to $1$ and since both spaces are contractible, this determines $r^!$ uniquely in the derived category. On the other hand, $r^*$ maps $1$ to $1$, hence the composition is $r'^! r'^* = \id$. Taking the umkehr map commutes with the cross product up to sign (cf.~\cite[Prop. 14.3]{bredon2013topology} and one can show $(\id\times r')^!(\id\times r')^* = \id$. This shows that the right diagram commutes. 

    Thus we have shown that the following commutes in $D(Ch(k))$: 

    \begin{center}
        \begin{tikzcd}
        \Omega^*(PM\times_M PM)\dar["\int_I s^*\omega"] &\lar B\otimes_A B \dar \\
        \Omega^{*-1}(PM) & \lar B[-1]
    \end{tikzcd}
    \end{center}
    where the right vertical map is $a_1(\gamma_1)a_2(\gamma_2)a_3 \mapsto (-1)^{\abs{a_1\gamma_1a_2}} a_1(\gamma_1|a_2|\gamma_2)a_3$. Hence we are done.
    % \[
    % \begin{tikzcd}[center picture]
    %     \Omega^*(PM\times_M PM) \dar & \lar \Omega^{*+k+l}((\Delta^k\times PM) \times_M(\Delta^k\times PM)) \dar & \lar \Omega^{*+k+l}(M^{1+k+1+l+1}) \dar \\
    %     \Omega^{*}(PM\times_M PM)\dar & \lar[swap, "\int_{\Delta^k\times\Delta^l}"] \Omega^{*+k+l}(\Delta^k\times \Delta^l \times PM\times_M PM)\dar & \lar  \Omega^{*+k+l}(M^{1+k+1+l+1})\dar \\
    %     \Omega^{*}(I\times PM) \dar["\id"] &\lar[swap, "\int_{\Delta^k\times\Delta^l}"] \Omega^{*+k+l}(\Delta^k\times\Delta^l\times I\times PM) \dar["\wedge dt"] & \lar \Omega^{*+k+l}(M^{1+k+1+l+1}) \dar["\wedge dt"] \\
    %     \Omega^{*}(I\times PM) \dar["\id"] & \lar[swap, "\int_{\Delta^k\times\Delta^l\times I}"] \dar \Omega^{*+k+l+1}(\Delta^{k}\times\Delta^l\times I\times I \times PM) &\lar\dar \Omega^{*+k+l+1}(I\times M^{1+k+1+l+1}) \\
    %     \Omega^{*}(I\times PM) & \lar[swap, "\int_{\Delta^{n+1}}"] \Omega^{*+n+1}(\Delta^{n+1} \times I\times PM) &\lar \Omega^{*+n+1}(I\times M\times M^{n+1}\times M)
    % \end{tikzcd}
    % \]
    % \begin{tikzcd}
    %     \Omega^{*+1}(PM\times_M PM) \dar & \lar\dar B\otimes_A B\\
    %     \Omega^{*+1}(I\times PM) \dar & \lar\dar  \mathcal I \otimes B \\
    %     \Omega^*(PM) & \lar B
    % \end{tikzcd}
\end{proof}

\begin{remark}
    In \cite{naef2019string} it is also stated that the wedge product on $\Omega^*(PM)$ corresponds to the shuffle product $\shuffle$ on $\BC(\Omega^*(M), \Omega^*(M), \Omega^*(M))$:
    \begin{center}
    \begin{tikzcd}
        B\otimes B\dar["\shuffle"] \rar["I\otimes I"]&\Omega^*(PM)\otimes\Omega^*(PM) \dar["\wedge"]\\
        B \rar["I"] & \Omega^*(PM)
    \end{tikzcd}
    \end{center}
    This is shown in \cite[4.1]{chen1973iterated}.

    % There is a proof of an analogous statement in \cite{chen1973iterated} for $LM$ and a corresponding shuffle product on $B\otimes_{A^{\otimes 2}} A$. We only give a sketch of a proof since we will not use this statement later. The wedge product of the fiber integrals over $\Delta^k$ and $\Delta^l$ in $I(a(a_1|\dots|a_k)a') \wedge I(b(a_{k+1}|\dots|a_{k+l})b')$ can be rewritten as a fiber integral over $\Delta^k\times\Delta^l$ of a single differential form. By an Eilenberg-Zilber argument, one can decompose $\Delta^{k}\times\Delta^k$ into copies of $\Delta^{k+l}$, using shuffle permutations and the degeneracy maps $\Delta^{k+l}\to \Delta^k, \Delta^{k+l}\to \Delta^l$. So the fiber integral is a sum of fiber integrals of certain classes over $\Delta^{k+l}$. With some work, one can represent this again as a sum of iterated integrals.
\end{remark}





\section{String Topology Operations via Configuration Spaces}\label{sec:string-ops-via-cfg-spaces}

In this section we introduce the construction of the loop product and coproduct from \cite{naef2019string}. Classically, the intersection maps in these operations are constructed via tubular neighborhoods and the Thom isomorphism. Naef and Willacher in \cite{naef2019string} instead construct the intersection map using the compactified configuration space of two points $\cConf_M(2)$. The main observation that allows this is that the homotopy cofiber of the map $\cConf_M(2)\to M\times M$ is a version of the Thom space of $M$, hence one may factor the Thom isomorphism through it. We begin by recalling the compactification of configuration spaces over a manifold $M$ in \cref{subsec:compactificatified-configuration-space}. In \cref{subsec:intersection-in-M-via-conf} we construct the intersection product on a closed manifold $M$ using configuration spaces. We then give an analogous construction of the loop product in \cref{subsec:loop-product}. We will show in \cref{subsec:loop-product-model} that on homology this construction is equal to the classical construction \ref{subsec:loop-product-classical}. 

\subsection{Fulton-MacPherson Compactification of Configuration Spaces}\label{subsec:compactificatified-configuration-space}

We begin by introducing the compactification of the configuration spaces. We follow~\cite{sinha2004manifold}.

\begin{definition}
The ordered configuration space of $n$ points in a space $M$ is defined as $$\Conf_M(n) = \{(x_1, \dots, x_n)\in M^n\mid x_i\neq x_j\ \text{for}\ i\neq j\}.$$ 
\end{definition}

Let $M$ be a closed manifold. We fix an embedding $M \hookrightarrow \R^D$. We construct the Fulton-MacPherson compactification of $\Conf_M(n)$ as follows:

Let $\underline n=\{1,\dots,n\}$. For $(i,j)\in \Conf_{\underline n}(2)$, let $$\pi_{ij}\colon \Conf_M(n)\to S^{D-1}$$ be the map which sends a tuple $(x_1, \dots, x_n)$ to the unit vector in the direction $x_i-x_j$. For $(i,j,k)\in\Conf_{\underline n}(3)$, let $$s_{ijk}\colon \Conf_{M}(n) \to (0, \infty), \qquad s_{ijk}(x) = \abs{x_i-x_j} / \abs{x_i-x_k}.$$ Let $\iota\colon\Conf_M(n)\to M^n$ be the embedding. Define the ambient space of the Fulton-MacPherson compactification $$A_M(n) = M^{n} \times (S^{D-1})^{\Conf_{\underline n}(2)} \times [0, \infty]^{\Conf_{\underline n}(3)}.$$ We embed the configuration space into this ambient space by 
\begin{align*}
    &\alpha_{M,n} \colon \Conf_M(n) \to A_M(n)\\
    &\alpha_{M,n} = \iota \times \prod_{(i,j)\in \Conf_{\underline n(2)}}\pi_{ij} \times \prod_{(i, j, k)\in\Conf_{\underline n}(3)}s_{ijk}
\end{align*}

\begin{definition}
The \emphi{Fulton-MacPherson-Axelrod-Singer compactification} of the ordered configuration space of $n$ points in $M$ is the closure of the image of the above map: $\cConf_M(n) = cl_{A_M(n)}(im(\alpha_{M,n}))$. 
\end{definition}

% The maps $\iota, \pi_{ij}, s_{ijk}$ can be extended to the closure $\cConf_M(n)$.

In~\cite{sinha2004manifold} it is shown that if $M$ is a closed manifold, then $\cConf_M(n))$ is a compact manifold with corners, whose top stratum is homeomorphic to $\Conf_M(n)$. In particular, the compactification is homotopy equivalent to the original configuration space. 

\begin{remark}
    One can restore the original configuration of points in the configuration space from the image of the $\pi_{i,j}$ and $s_{i,j,k}$, up to translation and rotation in $\R^D$.

    The additional elements in the closure correspond to the situation where parts of the tuple become ``infinitesimally close'' as seen from some of the other points, but still have well defined directions with respect to each other. For example in $\cConf_M(3)$ we may have $x\in \cConf_M(3)$ with $\pi_{1,2}(x) = \pi_{1,3}(x)$ and $s_{1,2,3}(x)= 1$, so if we try to restore the original configuration of points from this, the points $x_2$ and $x_3$ are equal. However as an element of the compactification this still has a well-defined $\pi_{2,3}(x)$, i.e.\ a well defined direction between $x_2$ and $x_3$. The relation of being infinitesimally close can be modeled via trees with $n$ leaves and there exists a stratification on $\cConf_M(n)$ where each stratum corresponds to a tree with $n$ leaves, see \cite{sinha2004manifold}. 
\end{remark}

\begin{example}\label{ex:conf-2}
    Since we are largely interested in the case $n=2$, we give an explicit description of $\cConf_M(2)$. In the $n=2$ case, the compactification $\cConf_M(2)$ is a manifold with boundary. The interior is $\Conf_M(2)$. The boundary is homeomorphic to the unit tangent bundle $UTM$ of $M$ and we denote it by  $UTM\subset\cConf_M(2)$. Recall that we fixed an embedding $M\to \R^D$ and hence there is an embedding of the tangent spaces into $T_xM\to\R^D$ for each $x\in M$. A sequence $(x'_n, x''_n)$ in $\Conf_M(2)$ converges to $X\in UT_xM$ if $(x'_n)$ and $(x''_n)$ converge to $x$ and $x_n'-x_n''\in \R^D/ \R_+$ converges to $X\in UT_xM\subset\R^D/\R_+$. 
\end{example}

% One can restore the original configuration of points from the image of $\alpha_{m,n}$ up to translation and scaling in $\R^m$. In general the images under $\pi_{ij}$ suffice for this, if the points are collinear, $s_{ijk}$ identifies their position relative to each other. For a real vector space $V$, denote by $ST(V)$ the group generated by translations and scaling with a positive scalar in $V$, this acts naturally on $V^n$ and the configuration spaces. The compactification factors as $\Conf_m(n) \to \Conf_m(n) / ST(\R^m) \to \cConf_m(n)$, where the first map is a homotopy equivalence and the second map is a homeomorphism onto its image, with dense and open image. 


% \paragraph{Stratification via trees} To understand the additional points in the compactification, we first consider the case where two factors of a configuration converge towards the diagonal. Consider a point $x\in \cConf_M(n)$ with $\iota_1(x) = \iota_2(x)$, $\pi_{1k}(x) = \pi_{2k}(x)$ and $s_{k12}(x) = 1$ for all $k$. We interpret this as a configuration of $n$ points $(x_1, \dots, x_n)$ where two points $x_1, x_2$ appear to be identical from the lens of $\iota$ and $\pi_{1,k}$, $\pi_{2,k}$, however $\pi_{12}(x)$ is still a well-defined value, which gives the two points a well-defined position relative to each other, i.e.\ a well-defined element in $(T_{p}M)^2/ST(T_{p}M)$ for $p$ representing the position of $x_1$ and $x_2$ in $M$. If all other points have distinct images in $M$, these positions are described by a stratum homeomorphic to $(T_{p}M)^2/ST(T_{p}M) \times M^{n-1}$. More generally, we may have multiple points which appear at the same position ``from outside'', but have a well-defined position relative to each other inside the tangent space. The same phenomenon can occur inside the tangent spaces as well, and even iteratively. 

% \begin{figure}[ht]\label{sinha-fm}
%     \centering
%     \includegraphics[width=0.8\textwidth]{img/sinha-fm-element}
%     \caption{A point in $\Conf_M(6)$ associated to a tree with four internal nodes. }
% \end{figure}    

% \begin{definition}
%     An $f$-tree is a rooted connected tree with labelled leaves and no bivalent internal vertices. The root is allowed to be bivalent (and also univalent).
    
%     By defining a relation via edge contraction, one obtains a poset structure on the set of $f$-trees with $k$ leaves, denote this by $\Phi_k$.
% \end{definition}
% See figure~\ref{sinha-trees} for an example.

% \begin{figure}[ht]
%     \centering
%     \begin{subfigure}[b]{0.45\textwidth}
%         \centering
%         \includegraphics[width=\textwidth]{img/sinha-tree}
%         \caption{An $f$-tree}
%     \end{subfigure}
%     \hfill
%     \begin{subfigure}[b]{0.45\textwidth}
%         \centering
%         \includegraphics[width=\textwidth]{img/sinha-tree-poset}
%         \caption{The poset $\Phi_3$ }
%     \end{subfigure} 
%     \caption{Example of $f$-trees. }\label{sinha-trees}
% \end{figure}


% \begin{theorem}
%     There is a stratification on $\cConf_M(n)$ where each stratum $\cConf_M(T)$ corresponds to an $f$-tree $T$ and the poset of the stratification is $\Phi_n$. Similarly, for $\cConf_m(n)$, there is a stratification where each stratum $\cConf_m(T)$ corresponds to an $f$-tree $T$ where the root has degree at least $2$. 
% \end{theorem}


% \paragraph{Operad Structure on $\cConf_m(n)$} In the $M=\R^m$ case one may equip $\cConf_m(n)$ with an operad structure using the stratification explained earlier. 
% \begin{theorem}
%     The operad $\cConf_m$ is equivalent to the little $2$-disks operad $\mathcal D$.
% \end{theorem}

% To see this, we define a structure of an ``operad up to homotopy'' on $\Conf_n(m)$ (this is not standard terminology), in the sense that the associativity of composition does not hold on the nose, but there are canonical homotopies. There is then a zig-zag $\cConf_m \leftarrow \Conf_m \to \mathcal D_m$, where the first map preserves the operadic composition operations and is a homotopy equivalence on each level. The second map preserves the operadic composition operations up to homotopy and is also a homotopy equivalence on each level. This is enough to show that the homological operad structures agree, for an actual homotopy equivalence, one uses the Boardman-Vogt construction, which is a cofibrant resolution of topological operads.

% To describe the operad structure ``up to homotopy'' on $\Conf_m$ in more detail, define a map $\Conf_m(n) \to \mathcal D_m(n)$ by drawing an outer disk around the barycenter of the configuration and drawing small disks around each point in the configuration (the radii should depend continuously on the configuration). Using this map and the projection to the center map $\mathcal D_m(n) \to \Conf_m(n)$, one may transfer the composition operations of $\mathcal D_m(n)$ to $\Conf_m(n)$. If multiple compositions in $\Conf_m$ are performed, the disks may differ in size, which leads to different configurations, but there is a homotopy comes from rescaling the circles. 

% For the $m=2$ case one can alternatively apply a recognition principle by Fiedorowicz: The symmetric group acts freely on $\Conf_n(\R^2)$ and the quotient $\Conf_n(\R^2) / S_n = \UConf_n(\R^2)$ has $\pi_1(\UConf_n(\R^2)) = B_n$, the braid group of $n$ braids. The universal cover of $\Conf_n(\R^2)$ is contractible and has a braid operad structure with free action. Any two such operads with contractible total space and free group action are equivalent. Quotienting the equivalence by $PB_n = \ker(B_n \to S_n)$ we obtain an equivalence of the original operads. Then show that this also holds for $\cConf_n(\R^2)$.


% \paragraph{Operadic module structure of $\Conf_M$} We build a fiberwise version of the configuration spaces $\cConf^M(n) = Fr_M\times_{SO(n)} \cConf_m(n)$, where $Fr_M$ is the oriented orthonormal frame bundle of some (irrelevant) metric on $M$. This is an operad in spaces over $M$. Then $\cConf_M$ is an operadic right module over $\cConf^M$. If $M$ is framed, then $\cConf_M$ is a module over the $\cConf(\R^D)$ operad.





\subsection[Intersection Map via Configuration Spaces]{Intersection Map in $M$ via Configuration Spaces}\label{subsec:intersection-in-M-via-conf}

Let $M$ be a closed oriented manifold. We consider a construction of the intersection map on the cohomology of a closed oriented manifold $M$ as proposed by \cite{naef2019string}. The intersection product is a map $H_*(M) \otimes H_*(M) \to H_{*-n}(M)$, or in cohomology, a map $H^*(M) \otimes H^*(M) \from H^{*-n}(M)$. For a review of the intersection product, see section \ref{subsec:intersection-product-via-pd}. We heavily make use of homotopy pushouts and homotopy cofibers in this subsection, for a review see \cref{sec:homotopy-pushouts-spaces}. 

Recall that the homotopy cofiber of a map $f\colon X\to Y$ of spaces is constructed using the mapping cone $\cone(X\to Y) = X\times I\coprod Y / \sim$ where $\sim$ is generated by $(x, 0)\sim (x', 0)$ for all $x, x\in X$ and $(x, 1)\sim f(x)$.

\begin{remark}\label{rmk:cofib-relative-homology}
    Recall that the mapping cone $\cone(f)$ of a map $f\colon A\to B$ of cochain complexes\footnote{There is a distinction between the mapping cone of chain complexes and of cochain complexes; the grading is slightly different and the differential differs by signs. See \cref{prop:relative-homology-cofiber} for the definition of the mapping cone of chain complexes. In some references the mapping cone of cochain complexes is called the mapping cocone. We write $\cone$ for both. } is the graded vector space $A\times B[1]$ with the differential $d(a, b) = (d_A a, f(a) - d_B(b))$. The sequence $A\to B\to \cone(f)\to A[1]$ induces a long exact sequence in cohomology. There is a natural chain map  $\cone(f) \to B/f(A)[1]$ given by $(a,b)\mapsto b$ and another natural chain map $\ker(f)\to \cone(f)$ given by $a\mapsto (a, 0)$. 
\end{remark}

    For an inclusion between spaces $f\colon X\injto Y$, the map $f^*\colon C^*(Y)\to C^*(X)$ is surjective and the natural map $\ker f^* = C^*(Y, X)\to \cone(f^*)$ is a quasi-isomorphism. If $f$ is a general continuous map, then $f^*$ is in general not surjective and there is no long exact sequence in cohomology for $\ker f^*$.
    \begin{definition}\label{notation:relative-mapping-cone}
        For a continuous map $f\colon X\to Y$, we denote $$C^*(Y, X) \defeq \cone(C^*(Y)\xto{\quiso} C^*(X)).$$
    \end{definition} 

\begin{remark}\label{rmk:cofib-cone}
    We also recall in \cref{prop:relative-homology-cofiber} that for a map between spaces $f\colon X\to Y$, there exists a zigzag of quasi-isomorphisms between the mapping cone of the chain complexes and the reduced chain complex of the mapping cone of spaces:
    \begin{align*}
        \tilde C_*(\cofib(f\colon X\to Y))\xto{\quiso} \dots\xfrom{\quiso} \cone(C_*(X)\to C_*(Y))
    \end{align*}
\end{remark}

We need to construct the following maps to obtain the intersection map:
\begin{enumerate}[(1)]
    \item A quasi-isomorphism $C^*(M\times M, \cConf_M(2))\quiso C^*(M, UTM) = \cone(C^*(M)\to C^*(UTM))$
    \item A Thom map $C^{*-n}(M)\to C^*(M, UTM)$.
\end{enumerate}
We begin with the quasi-isomorphism $C^*(M\times M, \cConf_M(2))\quiso C^*(M, UTM)$
\begin{enumerate}[(1)]
    \item
Recall that $\cConf_M(2)$ is the compactified configuration space of two ordered points in $M$ and by \cref{ex:conf-2}, this is a manifold with boundary with top stratum homeomorphic to $\Conf_M(2)$ and a codimension $1$ stratum homeomorphic to the unit sphere bundle $UTM\subset TM$. The square
\begin{equation}\label{M_pushout_1}
\begin{tikzcd}
    UTM \dar\rar & \cConf_M(2)\dar \\
    M \rar["\Delta"] & M\times M
\end{tikzcd}
\end{equation}
is a pushout diagram of topological spaces. In fact, the inclusion $UTM \injto \cConf_M(2)$ is a cofibration by \cref{thm:cofibration-criterion} and thus the diagram is a homotopy pushout diagram by \cref{thm:homotopy-pushout-properties}. Thus the homotopy cofibers of the vertical maps are homotopy equivalent due to the pasting law for homotopy pushouts \cref{thm:pasting-lemma}. 

% In \cref{prop:relative-homology-cofiber} we show that the reduced homology of the cofiber of a map $f$ is quasi-isomorphic to the homology of the mapping cone of $f_*$.The mapping cone of a chain map $\phi\colon C\to D$ is given as a graded module by $\cone(\phi) = C[1]\oplus D$, with differential given by $(c, d)\mapsto (-\partial_C c, \partial_D d + \phi(c))$. Similarly, the reduced cohomology is given by the mapping cocone, which is defined as $\mathrm{cocone}(\phi) = \cone(\phi)[-1]$, thus as a graded module it is $C\times D[-1]$. Following \cite{naef2019string}, we ignore the distinction between cone and cocone and write $\cone$ in place of the cocone when working with the cohomology of spaces. This does not lead to confusion since we only work with either cohomology or homology, not both at the same time. 

\begin{lemma}\label{lem:M-cofib-hteq}
    The horizontal maps in Diagram \ref{M_pushout_1} induce a homotopy equivalence $$\cofib(UTM\to M) \xto{\quiso} \cofib(\cConf_M(2))\to M\times M).$$
    The following map is a quasi-isomorphism $$C^*(M\times M, \cConf_M(2))\xto{\quiso} C^*(M, UTM).$$
\end{lemma}
\begin{proof}
    The first part is shown above. The map between the mapping cones is a quasi-isomorphism due to the zigzag from \cref{rmk:cofib-cone}. 
\end{proof}

The cofibers are in fact homotopy equivalent to the Thom space $DTM / UTM$, where $DTM$ is the unit disk bundle in $TM$: the inclusion $UTM\to DTM$ is a cofibration, so the homotopy cofiber is given by the quotient in this case. 

\item Since the maps $UTM\to M$ and $UTM\to DTM$ are homotopy equivalent, there is another homotopy equivalence
$$\cofib(UTM\to M)\quiso \cofib(UTM\to DTM)$$
The Thom isomorphism (cf.\ \cref{subsec:thom-iso}) of the oriented vector bundle $TM$ is given on the chain level by the composition  $$C^*(M) \to C^*(DTM)\to C^{*+n}(DTM, UTM).$$ The second map is given by taking the cup product with a representative $u\in C^n(DTM, UTM)$ of the Thom class, which yields a map $\blank\cupp u\colon C^*(DTM)\to C^{*+n}(DTM, UTM)$. We denote by $u|_{DTM}\in C^n(DTM)$ and $u|_M\in C^n(M)$ the image of $u\in C^n(DTM, UTM)$ under the maps $C^n(DTM, UTM)\to C^n(DTM)\to C^n(M)$ (the second map is induced by the zero section). 


\begin{construction}\label{constr:thom-map-cfg-spaces}
    The map $Th\colon C^*(M) \to C^{*+n}(M, UTM)$ is given by $c\mapsto (c\cupp u|_M, 0)$
\end{construction}
Since $u$ vanishes in $C^*(UTM)$, the pullback of $u|_M$ along the map $UTM\to M$ vanishes. This is required to show that $Th$ is a chain map. 

The map $Th$ fits into the following commutative diagram, which shows that $Th$ is in fact related to the Thom isomorphism.
\begin{equation}\label{diag:thom-map-construction}\begin{tikzcd}
     & C^{*+n}(DTM, UTM) & \\
    C^*(DTM)\dar \rar\ar[ur, "\blank\cupp u"]& \cone(C^*(DTM)\to C^*(UTM))[n] \dar\uar & \\
    C^*(M) \rar["Th"] & \cone(C^*(M)\to C^*(UTM))[n] \rar[equal] & C^{*+n}(M, UTM) 
\end{tikzcd}\end{equation}
The upper triangle states that we can lift the Thom map $\blank\cupp u$ along the quasi-isomorphism $\cone(C^*(DTM)\to C^*(UTM))\to C^*(DTM, UTM)$: The map $$C^*(DTM)\to \cone(C^*(DTM)\to C^*(UTM))[n]$$
is given by $c\mapsto (c\cupp u|_{DTM}, 0)$, this is a chain map since $u|_{DTM}\in C^*(DTM)$ vanishes in $C^*(UTM)$. 

\begin{remark}
    One can check that choosing $u\in C^*(DTM, UTM)$ to be a different representative of the Thom class yields a homotopic map: if $u-u'= d(v)$ then a homotopy is given by $c\mapsto (c\cupp v, 0)$. Thus $Th$ induces a well defined map in cohomology. 

    The class $u|_M$ represents the Euler class in $H^n(M)$. However $u|_M$ cannot be chosen arbitrarily inside its cohomology class and it does not vanish even for manifolds with vanishing Euler class since $Th$ is a quasi-isomorphism. 
\end{remark}

\end{enumerate}


\begin{definition}
The construction of the intersection coproduct according to \cite{naef2019string} is the map of derived chain complexes $C^{*-n}(M)\to C^*(M)\otimes C^*(M)$, given as the composition of the sequence of maps in the derived category $D(Ch(k))$, read from right to left\footnote{Recall that following \cite{naef2019string} we occasionally write maps in cohomology from right to left, to underline that e.g.\ a homological product becomes a cohomological coproduct. }.
\begin{equation*}
\begin{tikzcd}
    C^*(M)\otimes C^*(M) \quiso C^*(M\times M) & \lar C^*(M\times M, \cConf_M(2)) \dar["\iso"] & \ \\
    & C^*(M, UTM)& \lar[swap, "Th"] C^{*-n}(M)
\end{tikzcd}
\end{equation*}
Since we are working with field coefficients, this induces a map $$H^{*-n}(M)\to H^*(M) \otimes H^*(M).$$
\end{definition}

    
The following statement is implicit in \cite{naef2019string}, but not explicitly stated and proven. 
\begin{theorem}\label{thm:intersection-product-via-cfg-spc}
    The intersection maps $i^!\colon C^{*-n}(M) \to C^*(M)\otimes C^*(M)$ defined as above and as in \cref{constr:isect-via-tubular} are equal, as maps in $D(Ch(K))$. 
\end{theorem}
\begin{proof}
    Fix a tubular neighborhood of the diagonal $\Delta M\subset M\times M$. Since the normal bundle in this setting is isomorphic to the tangent bundle, this means that there is a map $\eta\colon DTM \to M\times M$ which is a homeomorphism onto its image, taking the zero section to the diagonal and $DT_0M$ to the complement of the diagonal. 
    Consider the following diagram:
    \[\begin{tikzcd}[row sep={40,between origins}, column sep={40,between origins}]
      & \cConf_M(2)  \ar{dd} & &   UTM  \ar{dd}\ar[ll, hookleftarrow] \ar{dl} \\
      \Conf_M(2) \ar{ur} \ar{dd} & & \ar[crossing over, ll, swap, "\eta" {xshift=18pt}] D_0TM \\
        & M\times M \ar[dl, equal] & &  M  \ar{ll}\ar{dl} \\
      M\times M && DTM \ar[from=uu,crossing over] \ar{ll}
   \end{tikzcd}\]
   Each face of the diagram commutes up to homotopy. This is easy to see for all except the top face. In fact all except the right and top face commute as maps of sets. We will show that the top face commutes up to homotopy in \cref{lem:intersection-product-via-cfg-spc-aid} after this proof. 
   
   
   The cube shaped diagram induces a diagram of homotopy cofibers
   \begin{equation}
    \begin{tikzcd}
        \cofib\left(\cConf_M(2)\to M\times M\right) & \lar \cofib\left(UTM\to M\right) \dar \\
        \cofib\left(\Conf_M(2) \to M\times M\right) \uar &\lar \cofib\left(D_0TM\to DTM\right)
    \end{tikzcd}
    \end{equation}
    which also commutes up to homotopy and all maps involved are quasi-isomorphisms: the top map is a homotopy equivalence by \cref{lem:M-cofib-hteq}, the vertical maps are homotopy equivalences because they are induced by homotopy equivalences and as a consequence the bottom map is also a quasi-isomorphism. 

    Thus we have a commutative diagram
    \[\begin{tikzcd}
        H^*(M\times M)  & \dar["\quiso"] \lar H^*(M\times M, \cConf_M(2)) \rar["\quiso"] &   H^*(M, UTM) &\\
        & \ar[ul] H^*(M\times M, \Conf_M(2))  \rar{\quiso}[swap]{\eta^*} & \uar[swap, "\quiso"]  H^*(DTM, D_0TM) & \lar H^{*-n}(M) \ar{lu}[swap]{Th}
    \end{tikzcd}\]
    The center square is justified by the above. The triangle on the right is a more concise version of Diagram \ref{diag:thom-map-construction}.

    The upper composition is the intersection map constructed in this subsection. The lower composition is the intersection map constructed via tubular neighborhoods in \cref{constr:isect-via-tubular} (note $\Conf_M(2) = M\times M\setminus\Delta(M))$.
\end{proof}

% \[\begin{tikzcd}[row sep={40,between origins}, column sep={40,between origins}]
%   & X_1 \times_{S_1} Y_1  \ar{rr} \ar{dd} \ar{dl} & &   Y_1  \ar{dd} \ar{dl} \\
%   X_1 \ar[crossing over]{rr} \ar{dd} & & S_1 \\
%     & X_2 \times_{S_2} Y_2  \ar{rr} \ar{dl} & &  Y_2  \ar{dl} \\
%   X_2 \ar{rr} && S_2 \ar[from=uu,crossing over]
% \end{tikzcd}\]

    
    % In the proof of theorem \ref{thm:intersection_product_tubular} it is shown that the intersection product is equal to the sequence 
    % \begin{align*}
    %     H_*(M\times M)\xrightarrow{\capp u_\Delta} H_{*-n}(M\times M) \xrightarrow{\pi_{1*}} H_{*-n}(M)
    % \end{align*}
    % The first map is the cap product with $u_\Delta\in H^n(M\times M)$, the Poincaré dual of the diagonal $\Delta_*[M]\in H_*(M\times M)$. By the arguments in the referenced subsection, this is equivalent to taking the intersection product with the diagonal class $\Delta_* [M]$. The second map is induced by the projection to the first factor $M\times M\to M$.

    % Let $u\in H_n(M, UTM)$ be the Thom class of the tangent bundle of $M$, it is shown in theorem \ref{thm:thom_class_dual} that this is Poincaré dual to the zero section of the unit disk bundle of $TM$. Denote by $u_\Delta^c$ its image under the isomorphism $H_*(M\times M, \cConf_M(2)) \iso H_*(M, UTM)$. 
    
    % We consider the following diagram. 
    % \begin{center}
    %     \begin{tikzcd}
    %         H_*(M\times M) \dar["\capp u_\Delta"] \rar & H_*(M\times M, \cConf_M(2)) \dar["\capp u_\Delta^c"] & \lar[swap, "\iso"] H_*(M, UTM) \dar["\capp u"] \\
    %         H_{*-n}(M\times M) \dar["\pi_{1*}"] \rar & H_{*-n}(M\times M) \dar["\pi_{1*}"] & \lar[swap, "\Delta"] H_{*-n}(M) \dar \\
    %         H_{*-n}(M) \rar["\id"] & H_{*-n}(M) & \lar[swap, "\id"] H_{*-n}(M)
    %     \end{tikzcd}
    % \end{center}
    
    % Commutativity of the outer square implies our result that the two versions of the intersection product are equal. It is clear that all squares except for the upper left commute. 

    % The commutativity of the upper left square follows from the naturality of the cap product, if we can show the following claim: the restriction $r\colon H^n(M\times M, \cConf_M(2)) \to H^n(M\times M)$ maps $u_\Delta^c$ to $u_\Delta$. To do so, we retrace the proof of lemma 4.2 in \cite{hutchings2011cup}. The claim is equivalent to $\Delta_*[M] = [M\times M]\capp r(u^c_\Delta) \in H^n(M\times M)$, since $u_\Delta$ is Poincaré dual to $\Delta_*[M]$, i.e.\ $\Delta_*[M] = [M\times M]\capp u_\Delta$. 
    % \begin{lemma}\label{lem:intersection-product-via-cfg-spc-aid}
    %     $\Delta_*[M] = [M\times M]\capp r(u^c_\Delta) \in H^n(M\times M)$
    % \end{lemma}
    % To show the lemma, consider the following diagram
    % \begin{center}
    %     \begin{tikzcd}
    %         H_{2n}(M\times M) \otimes H^n(M\times M, \cConf_M(2)) \dar \rar & H_{2n}(M\times M) \otimes H^n(M\times M) \dar["\capp"] \\
    %         H_{2n}(M\times M, \cConf_M(2))\otimes H^n(M\times M, \cConf_M(2)) \rar["\capp"] \dar["\iso"] & H_n(M\times M) \\
    %         H_{2n}(M, UTM)\otimes H^n(M, UTM) \rar["\capp"] \dar["\iso"] & H_n(M) \uar \\
    %         H_{2n}(DTM, UTM)\otimes H^n(DTM, UTM) \rar["\capp"] & H_n(DTM) \uar[swap, "\quiso"]
    %     \end{tikzcd}
    % \end{center}
    % The lower and center left maps are the tensor product of two isomorphisms. The commutativity of the diagram is due to the naturality of the cap product. Now we chase $[M\times M]\otimes u_\Delta^c\in H_{2n}(M\times M) \otimes H^n(M\times M, \cConf_M(2))$ through the diagram, starting in the upper left and ending in the center right $H_n(M\times M)$. The path through the top right maps it to $[M\times M]\capp r(u_\Delta^c)$. 
    % \begin{lemma}\label{lem:intersection-product-via-cfg-spc-aid-2}
    %     The fundamental class $[M\times M]$ is mapped via $H_{2n}(M\times M)\to H_{2n}(M\times M, \cConf_M(2))\to H_{2n}(M, UTM) \iso H_{2n}(DTM, UTM)$ to the fundamental class $[DTM, UTM]$. 
    % \end{lemma}
    
    % Assuming \cref{lem:intersection-product-via-cfg-spc-aid-2}, we see that $[M\times M]\otimes u_\Delta^c$ is mapped to $[DTM, UTM] \otimes u\in H_{2n}(DTM, UTM\otimes H^n(DTM, UTM))$. By theorem \ref{thm:thom_class_dual}, $[DTM, UTM] \capp u = [M]$ and we have shown $\Delta_*[M] = [M\times M]\capp r(u^c_\Delta)$. This shows \cref{lem:intersection-product-via-cfg-spc-aid} and hence \cref{thm:intersection-product-via-cfg-spc}. 

    % It remains to prove \cref{lem:intersection-product-via-cfg-spc-aid-2}. For this, we have the following diagram:
    % \begin{equation}
    %     \begin{tikzcd}
    %         M\times M \rar \ar[dr] & \cofib\left(\cConf_M(2)\to M\times M\right) & \lar \cofib\left(UTM\to M\right) \dar \\
    %         & \cofib\left(\Conf_M(2) \to M\times M\right) \uar &\lar \cofib\left(D_0TM\to DTM\right)
    %     \end{tikzcd}
    % \end{equation}

From the previous proof, it remains to show that the top face of the cube commutes up to homotopy. 
\begin{lemma}\label{lem:intersection-product-via-cfg-spc-aid}
    The following diagram commutes up to homotopy:
    \[
        \begin{tikzcd}
            \cConf_M(2) & \lar UTM \dar \\
            \Conf_M(2) \uar & \lar D_0TM
        \end{tikzcd}
    \]
\end{lemma}
\begin{proof}
    Recall that the map $D_0TM \to \Conf_M(2)$ is given by the composition $TM\xto{\iso} \nu\to M\times M$ where $\nu$ is the normal bundle of $\Delta(M)\subset M\times M$ and the map $\nu\to M\times M$ is given by a tubular neighborhood of the diagonal. 

We make a particular choice of this data, such that we can control the differential near the zero section. We choose a Riemannian metric $g$ on $M$, which induces a Riemannian metric on $M\times M$, and let $\nu=\nu(\Delta(M))$ be the normal bundle of $\Delta(M)\subset M\times M$ with respect to this metric. There is an open subset $U\subset \nu$ which contains the zero section, such that the exponential map $\mathrm{exp}\colon U\to M\times M$ of $M\times M$ is a diffeomorphism onto its image (cf.\ \cite[Ex. 8-5]{lee2006riemannian}). We may assume that the tubular neighborhood of the diagonal is given by $U$ and the exponential map, since the intersection map in \cref{constr:isect-via-tubular} is independent of the choice of the tubular neighborhood.
   
There is an isomorphism of vector bundles $TM\iso \nu$ given by $X\mapsto (X, -X)$. The topological sphere and disk bundles $UTM$ and $DTM$ are chosen independent of $g$, hence we may embed them into $TM$ so that they correspond to subsets of $U$ under the isomorphism $TM\iso \nu$. We claim that the map 
$$H\colon (0, 1]\times UTM\to M\times M\setminus\Delta(M)\subset\cConf_M(2), \qquad (t, X)\mapsto (\mathrm{exp}(tX), \mathrm{exp}(-X))$$ 
extends at $t=0$ continuously via the identity $UTM\to UTM\subset \cConf_M(2)$ and hence yields a homotopy between the maps of the top face. Note that for $t=1$ this is the three-fold composition in the top face. At $t=0$, we have to show that for a sequence $X_n\to X\in UTM$, $t_n\to 0$ the sequence $H(t_n, X_n)$ converges to $X\in UTM\subset \cConf_M(2)$. The base points of $H(t_n, X_n) = (\mathrm{exp}(t_nX_n), \mathrm{exp}(-t_nX_n))$ converge to the base point of $X$ in $\Delta(M)$.  We write $H(t_n, X_n) = (H_1(t_n, X_n), H_2(t_n, X_n))$. Recall that we have chosen an embedding $M\subset \R^d$ to define the compactification $\cConf_M(2)$. One can show that $$\lim_{n\to\infty} \frac 1 {2t_n} (H_1(t_n, X_n) - H_2(t_n, X_n)) = \left.\frac{d}{dt}\right|_{t=0} \mathrm{exp}(tX) = X$$ hence $H_1(t_n, X_n) - H_2(t_n, X_n)$ converges in $\R^d/\R_+$ to $X$. By \cref{ex:conf-2} this shows that $H(t_n, X_n)$ converges to $X$ in $\cConf_M(2)$. Thus $H$ is a homotopy as required.
\end{proof}


\subsection{Loop Product (Cohomology Coproduct) using Configuration Spaces}\label{subsec:loop-product}
Let $M$ be a closed oriented manifold. Recall from \cref{constr:loop-product-classical} that the loop product $H^*(LM)\otimes H^*(LM)\from H^{*-n}(LM)$ is a composition of three maps, one of which is the intersection map $i^! \colon H^*(LM\times_M LM)\to H^{*+n}(LM\times LM)$. Naef and Willacher propose in \cite{naef2019string} an alternative construction of this intersection map, which we outline here. 

The construction of this intersection map proceeds analogous to the construction in the previous subsection, ``pulled back along the map $LM\times LM\to M\times M$''. Recall that the notation $C^*(X, Y)$ for a map $f\colon X\to Y$ denotes the complex of the mapping cone of $f^*$, as in \cref{notation:relative-mapping-cone}. We will construct two maps. 
\begin{enumerate}[(1)]
    \item We will construct a lift of the quasi-isomorphism $C^*(M\times M, \cConf_M(2)) \xto{\quiso} C^*(M, UTM)$ from \cref{lem:M-cofib-hteq}, along the map $LM\times LM\to M\times M$. This will be a map $C^*(LM\times LM, LM\times LM|_{\cConf_M(2)}) \xto{\quiso} C^*(LM\times LM|_M, LM\times LM|_{UTM})$, but we have yet to explain the spaces involved.
    \item We will construct a lift of the Thom map $C^{*-n}(M)\to C^*(M, UTM)$, this will be a map $C^{*-n}(LM\times LM|_M) \to C^*(LM\times LM|_M, LM\times LM|_{UTM})$.
\end{enumerate}
We will then compose these maps to obtain the intersection map $i^!$. 
\begin{enumerate}[(1)]
    \item 
The free loop space $LM$ is the pullback of the path space fibration $PM \to M\times M$ and the diagonal map $M\to M\times M$. As the first map is a fibration, this is in fact a homotopy pullback, cf.~\cref{thm:homotopy-pushout-properties}. 

More generally, consider a fibration $E\to M\times M$. We can pull back the diagram 
\begin{equation}\label{M_pushout}
    \begin{tikzcd}
        UTM \dar\rar & \cConf_M(2)\dar \\
        M \rar["\Delta"] & M\times M
    \end{tikzcd}
\end{equation}
along the fibration $E\to M\times M$ and obtain the diagram
\begin{equation}\label{E_pushout}
    \begin{tikzcd}
        E|_{UTM} \dar\rar & E|_{\cConf_M(2)}\dar \\
        E|_M \rar["\Delta"] & E
    \end{tikzcd}
\end{equation}
\begin{proposition}\label{lem:pullback_cube}
    Diagram~\ref{E_pushout} is a homotopy pushout diagram of $E$. 
\end{proposition}
\begin{proof}
Recall that diagram~\ref{M_pushout} is a homotopy pushout diagram. The two diagrams assemble into a cube where the top face is diagram~\ref{E_pushout}, the bottom face is diagram~\ref{M_pushout}:
\begin{equation}
\begin{tikzcd}
    & E|_{UTM}\ar{dd}\ar{dl} \ar{rr} && E|_{\cConf_M(2)}\ar{dd}\ar{dl} \\
    E|_M \ar[crossing over]{rr}\ar{dd} && E \ar[crossing over]{dd}& \\
    & UTM \ar{dl}\ar{rr} && \cConf_M(2)\ar{dl} \\
    M \ar{rr} && M\times M &
\end{tikzcd}
\end{equation}
The bottom face is a homotopy pushout diagram of $M\times M$. The vertical maps are pullbacks of fibrations, hence fibrations. Thus the sides of the cube are homotopy pullback diagrams. By Mather's cube theorem \cref{thm:mather-cube},  the top face Diagram~\ref{E_pushout} is homotopy pushout too. 
\end{proof}

By applying \cref{lem:pullback_cube} to the fibration $LM\times LM\to M\times M$, we obtain the following homotopy pushout diagram:
\begin{equation}
    \begin{tikzcd}
        LM\times LM|_{UTM} \rar\dar & LM\times LM|_{\cConf_M(2)} \dar \\
        LM\times LM|_M \rar & LM\times LM
    \end{tikzcd}
\end{equation}
where each term is the fiber product of $LM\times LM$ with the corresponding term in diagram~\ref{M_pushout} over $M\times M$. In detail, the spaces in the diagram can be described as follows:
\begin{itemize}
    \item $LM\times LM|_M$ is the space of figure eights in $M$, i.e.\ two loops starting at the same point in $M$. 
    \item $LM\times LM|_{UTM} = (LM\times LM)\times_{M\times M} UTM$ is the space of figure eights in $M$, together with a unit tangent vector at the node of the eight. \item $LM\times LM|_{\cConf_M(2)}$ is a space which contains pairs of loops which need not necessarily intersect, but if they intersect at $t=0$, then there is additionally have a unit tangent vector at the node. 
\end{itemize}
Since the diagram is a homotopy pushout, the homotopy cofibers of the vertical maps are homotopy equivalent by \cref{thm:pasting-lemma}. 

\begin{definition}
    For brevity, we will use quotient notation for homotopy cofibers: For a map $f\colon A\to B$, denote
    \[
        B / A = \frac B A \defeq \cofib(f\colon A\to B) = \cone(f\colon A\to B)
    \]
\end{definition}

We have shown the following lemma:

\begin{lemma}
    There is a homotopy equivalence of cofibers:
    \[ \frac {LM\times LM|_M}{LM\times LM|_{UTM}} \quiso \frac{ LM\times LM} {LM\times LM|_{\cConf_M(2)}} \] 
    This induces an isomorphism in $D(Ch(k))$ (using the notation from \cref{notation:relative-mapping-cone}):
    \[ C^*(LM\times LM|_M, LM\times LM|_{UTM}) \xto{\quiso} C^*(LM\times LM, LM\times LM|_{\cConf_M(2)}) \]
\end{lemma}

\item 
In analogy to \cref{constr:thom-map-cfg-spaces}, we construct a Thom map $$Th_{LM} = Th \colon C^*(LM\times LM|_M) \to C^{*+n}(LM\times LM|_M, LM\times LM|_{UTM}), $$ working on the total spaces instead of the base spaces of the fibrations. Denote by $LM\times LM|_{DTM}$ the pullback of $LM\times LM\to M\times M$ along the composition of maps $DTM\to M\xto{\Delta} M\times M$. Let $u\in C^{n}(DTM, UTM)$ be a representative of the Thom class of $M$ and denote its pullback through the map of pairs $(LM\times LM|_{DTM}, LM\times LM|_{UTM})\to (DTM, UTM)$ by $u_{LM}\in C^{n}(LM\times LM|_{DTM}, LM\times LM|_{UTM})$. Further let $u_{LM}|_{DTM}\in C^n(LM\times LM|_{DTM})$ and $u_{LM}|_M\in C^n(LM\times LM|_M)$ be the images of $u_{LM}$ along the maps $C^*(LM\times LM|_{DTM}, LM\times LM|_{UTM})\to C^*(LM\times LM|_{DTM})\to C^*(LM\times LM|_M)$ (the second map is induced by the zero section $M\to DTM)$. 
\begin{construction}
    The map $$Th_{LM} = Th \colon C^*(LM\times LM|_M) \to C^{*+n}(LM\times LM|_M, LM\times LM|_{UTM})$$ is given by $c\mapsto (c\cupp u_{LM}|_M, 0)$.
\end{construction}

% We have the following commutative diagram on the level of chain complexes:
% \begin{equation}
%     \begin{tikzcd}\label{diag:Th-map-LM-2}
%     & C^{*+n}(LM\times LM|_{DTM}, LM\times LM|_{UTM}) \\
%     C^*(LM\times LM|_{DTM}) \rar \ar[ur, "\cupp u_{LM}"] & \cone(C^*(LM\times LM|_{UTM} \to C^*(LM\times LM_{DTM}))) \uar[swap, "\quiso"]\dar["\quiso"]\\
%     \tilde C^*(LM\times LM|_M) \uar[swap, "\quiso"] \rar["Th"] & \cone(C^{*}(LM\times LM|_{UTM}\from C^*(LM\times LM|_{M}))
% \end{tikzcd}
% \end{equation}

% As in \cref{constr:thom-map-cfg-spaces}, recalling the quasi-isomorphism between the reduced complex of the homotopy cofiber and the mapping cone of chain complexes from \cref{rmk:cofib-relative-homology}, we may alternatively construct $Th$ to be the map in $D(Ch(k))$ such that the following diagram commutes:
% \begin{equation}\begin{tikzcd}\label{diag:Th-map-LM}
%       & C^{*+n}(LM\times LM|_{DTM}, LM\times LM|_{UTM}) \\
%       C^*(LM\times LM|_{DTM}) \ar[ur, "\cupp u_{LM}"] & \tilde C^{*+n}(\cofib(LM\times LM|_{UTM} \to LM\times LM|_{DTM})) \uar[swap, "\quiso"]\dar["\quiso"]\\
%     C^*(LM\times LM|_M) \ar[u, swap, "\quiso"]\rar["Th"] & \tilde C^{*+n}(\cofib(LM\times LM|_{UTM}\to LM\times LM|_{M}))
% \end{tikzcd}\end{equation}
The following lemma makes precise the statement that the map $Th_{LM}$ is a lift of the corresponding map $Th$ on $M$.
\begin{lemma}\label{lem:thom-map-LM-equal}
    If $M$ is simply connected, the following maps are quasi-isomorphisms
    \begin{align*}
        C^*(LM\times LM)\otimes^L_{C^*(M\times M)} C^*(M) \xto{\quiso} C^*(LM\times LM|_M) \\
        C^*(LM\times LM)\otimes^L_{C^*(M\times M)} C^*(UTM) \xto{\quiso} C^*(LM\times LM|_{UTM}) 
    \end{align*} 
    and the following diagram commutes in $D(Ch)$:
    \begin{equation}\label{diag:lem-thom-map-LM-equal}
    \begin{tikzcd}
        C^*(LM\times LM|_M)[-n] \rar["Th_{LM}"] &  C^{*}(LM\times LM|_{M}, LM\times LM|_{UTM}) \\
        \uar[swap, "\quiso"] C^*(LM\times LM)\otimes^L_{C^*(M\times M)} C^*(M)[-n] \rar["\id\otimes Th"] &  C^*(LM\times LM)\otimes^L_{C^*(M\times M)} C^*(M, M, UT)) \uar[swap, "\quiso"]
    \end{tikzcd}
    \end{equation}
\end{lemma}
\begin{proof}
    Since $M$ is simply connected, so is $UTM$. Thus the maps are quasi-isomorphisms by \cref{thm:pullback-pushout}. 

    % Since the bar construction commutes with mapping cones of chain complexes, there is an isomorphism
    % \begin{align*} 
    %     &C^*(LM\times LM)\otimes^L_{C^*(M\times M)} C^*(M, UTM) \iso \\ &\cone\left(C^*(LM\times LM)\otimes^L_{C^*(M\times M)}C^*(UTM) \from C^*(LM\times LM)\otimes^L_{C^*(M\times M)}C^*(M)\right)
    % \end{align*}

    The left vertical map factors through the underived tensor product $C^*(LM\times LM)\otimes_{C^*(M\times M)} C^*(M)[-n]$ and similarly for the right map. Thus it suffices to consider Diagram \ref{diag:lem-thom-map-LM-equal} with the left derived tensor product $\otimes^L$ replaced with the regular tensor product. We now chase an element $a\otimes b$ with $a\in C^*(LM\times LM)$ and $b\in C^*(M)$ through the diagram. The path through the upper left maps this to $(i^*(a)\cupp ev^*(b)\cupp u_{LM}|_M, 0)$ where $i\colon LM\times LM|_M\to LM\times LM$ is the inclusion and $ev\colon LM\times_M LM\to M$ is the evaluation map. The path through the lower right maps $a\otimes b$ to $(i^*(a)\cupp(ev^*(b\cupp u_{M})) ,0)$ and by construction, $ev^*(u_M) = u_{LM}|_M$.
\end{proof}
\end{enumerate}

\begin{construction}\label{constr:loop-intersection-via-configuration}
    We define the intersection map $$i_{LM\times_M LM}^!\colon C^{*-n}(LM\times LM|_M) \to C^{*}(LM \times LM)$$ of the inclusion $i_{LM\times_M LM}\colon LM\times_M LM\to LM\times LM$ as the following composition read right to left:
\begin{equation}\label{diag:constr-loop-intersection-via-configuration}
    \begin{tikzcd}
        C^{*}(LM \times LM) & \lar C^*(LM\times LM, LM\times LM|_{\cConf_M(2)}) \dar["\iso"] & &\\
        & C^*(LM\times LM|_{M}, LM\times LM|_{UTM}) & \lar[swap, "Th"] C^{*-n}(LM\times LM|_M)
    \end{tikzcd}
\end{equation}
\end{construction}

The \emph{loop product}\index{loop product!via configuration spaces} is now the following map in $D(Ch(k))$: 
\begin{align*}
    C^*(LM)\otimes C^*(LM) \from C^*(LM\times LM) \xfrom{i^!} C^{*-n}(LM\times LM|_M) \xfrom{c^*} C^{*-n}(LM),
\end{align*}
here the last map is induced by the concatenation map $c\colon LM\times LM|_M \to LM$.

The following theorem states that the intersection map $i^!_{LM}$ is a lift of the intersection map $i^!$ on $M$.
\begin{theorem}\label{thm:loop-intersection-map-product}
    If $M$ is simply connected, then the following diagram commutes in $D(Ch)$ and the vertical maps are quasi-isomorphisms:
    \begin{center}
    \begin{tikzcd}
        C^*(LM\times LM) & \ar[l, swap, "i^!_{LM}"] C^{*}(LM\times_M LM)[-n]  \\
        \uar[swap, "\quiso"] C^*(LM\times LM) \otimes^L_{C^*(M\times M)} C^*(M\times M) & \uar[swap, "\quiso"]\lar[swap, "\id\otimes i^!"] C^*(LM\times LM) \otimes^L_{C^*(M\times M)} C^*(M)[-n]
    \end{tikzcd}
    \end{center}
\end{theorem}
\begin{proof}
    The diagram is commutative since we have closely mirrored the construction of the intersection product on $M$. We have already shown that the Thom maps on $LM$ and $M$ correspond to each other in \cref{lem:thom-map-LM-equal}. Similarly one considers the other two maps in Diagram \ref{diag:constr-loop-intersection-via-configuration}, we omit the details here.
\end{proof}

With a similar argument one can show \cref{thm:loop-intersection-map-product} for the classical construction of the intersection map $i^!_{LM\times LM}$ if $M$ is simply connected. We omit the details here. 

\begin{corollary}\label{thm:loop-products-identity}
    Let $M$ be a closed oriented, simply connected manifold. The two constructions of the derived intersection map $i^!_{LM}\colon C^*(LM\times LM) \from C^{*}(LM\times_M LM)[-n]$ from \cref{subsec:loop-product-classical} and \cref{constr:loop-intersection-via-configuration} are equal as maps in $D(Ch(\R))$. In particular they are the same on cohomology. Consequently, the same holds for the different definitions of the loop product (cohomology coproduct).
\end{corollary}


% \begin{remark}
%     One may attempt to extend the methods in the proof of \cref{thm:intersection-product-via-cfg-spc} to show that the two definitions of the intersection map are equal. Instead we will show in \cref{thm:loop-intersection-map-product} that the $i_{LM\times_M LM}^!$ on $LM$ is induced by the intersection map $i^!$ on $M$ in an algebraic way and conclude that the two intersection maps on $LM$ are equal from \cref{thm:intersection-product-via-cfg-spc}.
% \end{remark}

\subsection{Loop Coproduct (Cohomological Product)}\label{subsec:loop-coproduct}
We only sketch the construction of the loop coproduct according to \cite[Ch. 3.3]{naef2019string}, the reader may seek details there. For brevity, we work with cohomology instead of derived chain complexes here. Again, only the construction of the intersection map differs from the construction in \cref{subsec:loop-coproduct-classical}. Let $M$ be a closed oriented manifold. 

Recall that $\ocircle_2$ is the space which consists of two copies of the unit interval $I$, glued together at the end so that one obtains a circle with two marked points. The space $ C^0(\ocircle_2, M)$ is the mapping space from $\ocircle_2$ to $M$. Similarly we denote by $8$ the space of two circles which are identified at a point and $C^0(8, M)$ the mapping space into $M$. The intersection map will be a map
\begin{align*}
    j^!\colon H^{*+n}( C^0(\ocircle_2, M), LM\coprod_M LM) \from H^*( C^0(8, M), LM \coprod_M LM)
\end{align*}
which is the umkehr map of the inclusion $LM\times_M LM\to  C^0(\ocircle_2, M)$. 

We apply \ref{lem:pullback_cube} to the fibration $ C^0(\ocircle_2, M)\to M\times M$. This means that we consider the following cubical diagram where the maps on the top are pullbacks of the bottom face along $ C^0(\ocircle_2, M)\to M\times M$. The vertical maps are fibrations and since the bottom face is a homotopy pushout, so is the top face.

\begin{equation}
    \begin{tikzcd}
        &  C^0(\ocircle_2, M)|_{UTM}\ar{dd}\ar{dl} \ar{rr} &&  C^0(\ocircle_2, M)|_{\cConf_M(2)}\ar{dd}\ar{dl} \\
         C^0(\ocircle_2, M)|_M \ar[crossing over]{rr}\ar{dd} &&  C^0(\ocircle_2, M) \ar[crossing over]{dd}& \\
        & UTM \ar{dl}\ar{rr} && \cConf_M(2)\ar{dl} \\
        M \ar{rr} && M\times M &
    \end{tikzcd}
\end{equation}

In the notation of \cite{naef2019string}, the top face is the diagram:

\begin{equation}
    \begin{tikzcd}
        \Map'(8) \rar\dar &\Map'(\ocircle_2)\dar \\
        \Map(8) \rar & \Map(\ocircle_2)
    \end{tikzcd}
\end{equation}

\begin{itemize}
\item where $\Map(8) = \Map(\ocircle_2, M)|_M$ consists of figure eight loops in $M$,
\item $\Map(\ocircle_2)$ consists of loops with an additional marked point
\item $\Map'(8) = \Map(\ocircle_2, M)|_{UTM}$ consists of figure eights in $M$ with a unit tangent vector at the node of the figure eight.
\end{itemize}
Again, there is a homotopy equivalence of cofibers $$\Map(8) / \Map'(8) \quiso \Map(\ocircle_2)/\Map'(\ocircle_2)).$$ Denote $F = LM\coprod_M LM$, which is a space with a fibration $F\to M$, and let $F|_{UTM}$ be the pullback of $F$ along the map $UTM\to M$. There is a homotopy equivalence of cofibers of cofibers
\begin{align*}
    \frac{(\Map(\ocircle_2) / \Map'(\ocircle_2))} {(F / F|_{UTM}) } \quiso \frac{(\Map(8) / \Map'(8)) }{(F / F|_{UTM})}
\end{align*}
where the fraction notation and $/$ notation denote the homotopy cofiber. 

Now we define $j^!$ to be the following composition, read right to left
\[
\begin{tikzcd}
    j^!\colon &H^*(\Map(\ocircle_2), F) \from H^*\left(\frac{\Map(\ocircle_2) / \Map'(\ocircle_2)} {F / F|_{UTM}}\right) \\ &\xfrom{\quiso} H^*\left(\frac{\Map(8) / \Map'(8)} {F/ F|_{UTM}}\right) \from H^{*-n}(\Map(8), F)
\end{tikzcd}
\]
The last map is a Thom map which is constructed using the Thom isomorphism, similar as in the previous subsections. 

As in \cref{subsec:loop-coproduct-classical} the \emph{Loop Coproduct} is the following composition on cohomology:
\begin{align*}
    H^*(LM, M) &\xfrom{\tilde s^*} H^{*+1}(\Map(\ocircle_2), LM\coprod_M LM) \\ &\xfrom{j^!} H^{*+1-n}(LM\times_M LM, LM\coprod_M LM) \\ &\from H^{*}(LM, M)\otimes H_*(LM, M)[1-n]
\end{align*}
where the last map is the Künneth isomorphism.





\section{Algebraic Models of String Topology Operations}\label{sec:loop-models}
As an application of the algebraic models of mapping spaces in \cref{sec:cochain-models} and the discussion of the loop product in \cref{subsec:loop-product}, we are able to give an algebraic model of the loop product and the co-BV algebra structure on $LM$. In \cref{subsec:loop-product-model} we give a model of the loop product using Hochschild homology and show that the iterated integral map intertwines this with the loop product in the derived category. In \cref{subsec:poincare-algebra} we explain how one can obtain a chain level model of the loop coproduct using a chain level model of the intersection product of $M$. In \cref{subsec:co-bv-alg} we show that the quasi-isomorphism between the Hochschild complex and the cochain complex of the loop space preserves the co-BV operator as a map of derived chain complexes. In particular we show that the Chas-Sullivan operations satisfy the co-BV algebra relations on cohomology in the simply connected case. 

\subsection{Loop Product Model (Cohomology Coproduct)}\label{subsec:loop-product-model}
We combine \cref{thm:loop-intersection-map-product} and the models from \cref{sec:cochain-models} to give a model of the loop product. Let $A = C^*(M)$ and $B=\BC(A, A, A)$ the bar construction of $A$. The following theorem shows that the loop product (coproduct on cohomology) is given on the Hochschild complex $CH_*(A) = \BC(A, A, A) \otimes_{A^{\otimes 2}} A$ by the deconcatenation coproduct on $B$ and the umkehr map of the diagonal $i^!\colon C^{*-n}(M)\to C^*(M\times M)$. 

\begin{theorem}\label{thm:loop-product-derived}
    Let $M$ be a closed oriented, simply connected manifold. 
    The following diagram in $D(Ch)$ commutes:
    \begin{equation}\label{diag:loop-product-derived}
    \begin{tikzcd}
        C^*(LM\times LM) & \lar[swap, "i^!_{LM}"] C^*(LM\times_M LM)[-n] & \lar[swap, "c"] C^*(LM)[-n] \\
        B\otimes_{A^{\otimes 2}} A\otimes B\otimes_{A^{\otimes 2}} A \uar[swap, "\quiso"] & \lar[swap, "\id\otimes i^!"] B^{\otimes 2}\otimes_{A^{\otimes 4}} A[-n]\uar[swap, "\quiso"] & B\otimes_{A^{\otimes 2}} A[-n] \lar[swap, "\bar c"]\uar[swap, "\quiso"]
    \end{tikzcd}
    \end{equation}
    The upper horizontal composition is the loop product (cohomology coproduct). The vertical maps are induced by zigzags of quasi-isomorphisms in from \cref{thm:graph-mapping-space-singular}. The lower horizontal composition is induced by the intersection coproduct on $A$ and the deconcatenation coproduct on $B\to B\otimes_A B$ (see \cref{lem:model-concatenation}).
\end{theorem}
\begin{proof}
    We can consider the two squares separately. For the left square, recall from \cref{thm:loop-intersection-map-product} the commutative diagram 
    \begin{equation}
        \begin{tikzcd}
            C^*(LM\times LM) & \ar[l, swap, "i^!_{LM}"] C^{*}(LM\times_M LM)[-n]  \\
            \uar[swap, "\quiso"] C^*(LM\times LM) \otimes^L_{C^*(M\times M)} C^*(M\times M) & \uar[swap, "\quiso"]\lar[swap, "\id\otimes i^!"] C^*(LM\times LM) \otimes^L_{C^*(M\times M)} C^*(M)[-n]
        \end{tikzcd}
    \end{equation}
    and the intersection map $i^!\colon C^*(M)[-n]\to C^*(M\times M)$ fits into the following diagram 
    \begin{equation}
        \begin{tikzcd}
            C^*(M\times M) \dar["\quiso"] & \lar C^*(M)[-n]\dar[equal]\\
            C^*(M)\otimes C^*(M) & \lar C^*(M)[-n]
        \end{tikzcd}
    \end{equation}

    In \cref{thm:graph-mapping-space-singular} we showed that there is a natural zigzag of quasi-isomorphisms of two sided $A$-modules $$C^*(LM\times LM)\quiso\dots\quiso (B\otimes B)\otimes_{A^{\otimes 4}} A^{\otimes 2}$$
    This yields a commutative diagram
    \begin{equation}
        \begin{tikzcd}
            \dar["\quiso"] C^*(LM\times LM) \otimes^L_{C^*(M\times M)} C^*(M)\otimes C^*(M) & \dar["\quiso"]\lar[swap, "\id\otimes i^!"] C^*(LM\times LM) \otimes^L_{C^*(M\times M)} C^*(M)[-n] \\
            \dots & \lar \dots \\
            (B\otimes B)\otimes_{A^{\otimes 4}} A^{\otimes 2} \uar[swap, "\quiso"] & \lar["\id\otimes i^!"] \lar (B\otimes B)\otimes_{A^{\otimes 4}} A[-n] \uar[swap, "\quiso"]
        \end{tikzcd}
    \end{equation}
    This shows that the left square in Diagram \ref{diag:loop-product-derived} commutes. The right square is analogous. 
\end{proof}
There is an analogous statement for the de Rham complex, there the vertical maps are honest chain maps, namely the iterated integral maps as in \cref{thm:graph-mapping-space}. 
\begin{theorem}\label{thm:loop-product-derived-dR}
    Let $M$ be a closed oriented, simply connected manifold. 
    The following diagram in $D(Ch)$ commutes:
    \begin{equation}\label{diag:loop-product-derived-dR}
    \begin{tikzcd}
        \Omega^*(LM\times LM) & \lar[swap, "i^!_{LM}"] \Omega^*(LM\times_M LM)[-n] & \lar[swap, "c"] \Omega^*(LM)[-n] \\
        B\otimes_{A^{\otimes 2}} A\otimes B\otimes_{A^{\otimes 2}} A \uar[swap, "\quiso"] & \lar[swap, "\id\otimes i^!"] B^{\otimes 2}\otimes_{A^{\otimes 4}} A[-n]\uar[swap, "\quiso"] & B\otimes_{A^{\otimes 2}} A[-n] \lar[swap, "\bar c"]\uar[swap, "\quiso"]
    \end{tikzcd}
    \end{equation}
    The upper horizontal composition is the loop product (cohomology coproduct). The vertical maps are induced by zigzags of quasi-isomorphisms in from \cref{thm:graph-mapping-space-singular}. The lower horizontal composition is induced by the intersection coproduct on $A$ and the deconcatenation coproduct on $B\to B\otimes_A B$ (see \cref{lem:model-concatenation}).
\end{theorem}


\subsection{Frobenius Algebra Models}\label{subsec:poincare-algebra}

We would like to work with the models from the previous section as if they were implemented at the chain level. All the maps relating to $A$ and $\BC(A, A, A)$ exist at the chain level except for the intersection map $\Delta^!\colon A\to A\otimes A[n]$. 
By a theorem of Lambrechts and Stanley \cite{lambrechts2008poincare}, one can construct an algebra that is quasi-isomorphic to $C^*(M)$ and that has a coproduct on the chain level which is equal to $\Delta^!$ in $D(Ch)$. 

\subsubsection{Poincaré Duality Algebras and Frobenius Algebras}

Let $k$ be a field of any characteristic, let $A$ be a graded algebra and let $V$ be a graded vector space over $k$. We call a bilinear graded map $\mu\colon V\otimes V\to k[-n]$ a pairing of degree $n$. Denote by $V^\vee$ the graded dual of $V$.

\begin{definition}
    \begin{enumerate}
        \item A graded module $V$ is connected if $V^0 \iso k$ and simply connected if additionally $V^1 = 0$. It is of finite type if it has finite dimension in each degree.
        \item A pairing $\mu\colon V\otimes V\to k[-n]$ is nondegenerate if $\mu(v, v') = 0$ for all $v'\in V$ implies $v=0$.
        \item A pairing is perfect if the map $V\to V^\vee$, $v\mapsto \mu(v,\dot)$ is an isomorphism. 
    \end{enumerate}
\end{definition}

Note that any perfect pairing is nondegenerate. If $V$ is not finite dimensional, the converse is not generally true. 

\begin{definition}
    A \emph{Poincaré duality algebra}\index{Poincaré duality algebra} or Poincaré duality CDGA in dimension $n$ is a connected CDGA $A$ and a chain map $\epsilon\colon A\to k[-n]$ of degree $-n$, such that the induced bilinear pairing
    \begin{align*}
        A\otimes A\to k[-n], a\otimes b\mapsto \epsilon(ab)
    \end{align*}
    is non-degenerate. The map $\epsilon$ is called the orientation map of $A$. A graded algebra is a Poincaré duality algebra if it is a Poincaré duality CDGA with differential zero. 
\end{definition}
% Since $\epsilon$ is a chain map, $\epsilon$ descends to a map on homology. The condition $\epsilon(dA) = 0$ implies that $H^*(A)$ is a Poincaré duality algebra of dimension $n$.

The following is the main result of 
\begin{theorem}[\cite{lambrechts2008poincare}]\label{thm:lambrechts-stanley-model}
    Let $k$ be a field of any characteristic and let $A$ be a CDGA over $k$ such that $H^*(A)$ is a simply connected oriented Poincaré duality algebra in dimension $n$ of finite type. Then there exists a CDGA $A'$ weakly equivalent to $A$ such that $A'$ is a simply connected Poincaré CDGA of finite type.
\end{theorem}
Two CDGAs $A$ and $A'$ are weakly equivalent if there exists a zigzag of quasi-isomorphisms and morphisms of CDGAs $A\xto{\quiso} \dots\xfrom{\quiso} A'$. In fact, an inspection of the proof in \cite{lambrechts2008poincare} shows that in the theorem one can take this zigzag to be
\begin{align*}
    A' \xfrom{\quiso} S\xto{\quiso} A
\end{align*}
where $S$ is a minimal Sullivan model of $A$. 

Moreover, if the orientation on $H^*(A)\to k[-n]$ is induced by an orientation map $A\to k[-n]$ on $A$, one can define an orientation on $S$ such that the morphisms in the zigzag preserve the orientation.

This construction is not functorial in $A$.

%\begin{proof}[Sketch of proof] We give a sketch of the proof in \cite{lambrechts2008poincare}. Since $A$ is simply connected and has finite Betti numbers, by taking a minimal Sullivan model, one may assume that $A$ is of finite type, $A^0 = k, A^1 = 0$ and $A^2\subset \ker d$. One can show that there exists a chain map $\epsilon\colon A\to k[-n]$ which induces the orientation map of the Poincaré duality structure of $H^*(A)$. This orientation map may not induce nondegenerate pairings $A^k\otimes A^{n-k}\to A^n\to k$: there may be orphan elements $a$ with $\epsilon(ab) = 0$ for all $b$. Quotienting the orphans $\mathcal O$ yields a differential Poincaré algebra $A/\mathcal O$. The problem is that the quotient map might not be a quasi-isomorphism as $\mathcal O$ need not be acyclic. However \cite{lambrechts2008poincare} give a construction where $A$ is inductively replaced with quasi-isomorphic algebras such that the homology of the orphans is reduced to $0$. 
%\end{proof}

We show that if $A$ is a finite dimensional Poincaré duality CDGA, then it has the additional structure of a coproduct, which together with the product on $A$ forms a Frobenius algebra. 

\begin{construction} Assume that $A$ is a finite dimensional Poincaré duality CDGA. Thus the nondegeneracy of the pairing $A^k\otimes A^{n-k} \to k$ implies that it is perfect, hence $A$ is isomorphic to its degree shifted graded dual $A \iso A^\vee [-n]$, where $A^\vee = \Hom(A, k)$. Using this observation, we can construct the \emph{coproduct} of the Poincaré duality algebra as the following degree $n$ map:
\begin{align*}
    \Delta\colon A\to A^\vee[-n] \to (A\otimes A)^\vee[-n] \iso A^\vee\otimes A^\vee[-n] \iso A\otimes A[n]
\end{align*}
Here the second map is induced by the product on $A$ and the third map is an isomorphism since $A$ is finite dimensional. 
\end{construction}

\begin{definition}
    A \emphi{differential graded Frobenius algebra} is a unital CDGA $A$ together with a coproduct $\Delta\colon A\to A\otimes A$ of possibly nonzero degree, such that $\Delta$ is a coassociative cocommutative chain map, $\Delta$ is counital,  and such that the Frobenius relation holds:
    \begin{align*}
        a\Delta(a') = \Delta(aa') = \Delta(a) a'\in A\otimes A\\
    \end{align*}
\end{definition}
The Frobenius relation is equivalent to $\Delta$ being a map of $A$-modules and the multiplication being a map of $A$-comodules.

\begin{proposition}
    The coproduct constructed for a finite dimensional Poincaré duality CDGA makes $A$ into a Frobenius algebra with counit $\epsilon$ given by the orientation.
\end{proposition}

Since $\Delta(a) = a\Delta(1)$, the coproduct is completely determined by the "diagonal cocycle" $\Delta(1)=\Delta_A\in (A\otimes A)^{(n)}$. One can characterize this in terms of a basis of $A$: Given a homogeneous basis $\{a_i\}$ of $A$, there  exists a dual basis $\{a_i^*\}$ with respect to the pairing, i.e.\ such that $\epsilon(a_i a_j^*) = \delta_{ij}$ is given by the Kronecker symbol. Then $\Delta(1) = \sum_i (-1)^{\abs{a_i}} a_i \otimes a_i^*\in A\otimes A$ independent of the choice of basis. Denote $e_A = m(\Delta_A) = \sum_i (-1)^{\abs{a_i}} a_i a_i^*$ where $m$ is the multiplication in $A$. Since $\epsilon\colon A^n\to k$ is an isomorphism, denote $\vol_A\defeq \epsilon^{-1}(1)$. Then $e_A = \chi(A) \vol_A$ or equivalently $\epsilon(e_A) = \chi(A)$, where $\chi(A) = \sum (-1)^i\dim A_i$ is the Euler characteristic of $A$. 

\begin{proposition}
    The Euler characteristic of $A$ is
    \begin{align*}
        \chi(A) \defeq \sum (-1)^i\dim A_i = \epsilon(e_A) = \epsilon(m(\Delta(1)))
    \end{align*}
\end{proposition}

\subsubsection{Frobenius Algebra Models}\label{subsubsec:frobenius-algebra-models}

We begin by stating the main result of this subsection. 
\begin{theorem}\label{thm:frobenius-model}
    \begin{enumerate}
    \item If $M$ is a closed oriented simply connected manifold, there exists a finite dimensional Frobenius algebra $A$ which is quasi-isomorphic to $C^*(M)$ through a zigzag $A\from \dots\to \Omega^*(M)\from\dots\to C^*(M)$, such that this chain of quasi-isomorphisms takes the coproduct on $A$ to the intersection coproduct $\Delta^!$ on $C^*(M)$, seen as maps in $D(Ch(\R))$. 
    
    \item Moreover the graded dual $A^\vee$ is quasi-isomorphic to $C_*(M)$, and the coproduct on $A^\vee$ is identified with the Alexander-Whitney diagonal $C_*(M)\to C_*(M)\otimes C_*(M)$ and the product on $A^\vee$ is identified with the intersection product on $C_*(M)$ in $D(Ch(\R))$.
    \end{enumerate}
\end{theorem}

We will call such an $A$ a \emph{Frobenius algebra model} of $M$ in this work, but this terminology is not standard. Given such a model of $C^*(M)$, we can replace $C^*(M)$ in \cref{thm:loop-product-derived} with $A$ and obtain the following:

\begin{theorem}
    If $M$ is a closed oriented simply connected manifold and $A$ is a Frobenius algebra model of $M$, then in the derived category, the loop product is given under the isomorphism $C^*(LM)\quiso \BC(A, A, A)\otimes_{A^{\otimes 2}} A$ of \cref{thm:loop-product-derived} by the chain map
    \begin{align*}
        \BC(A, A, A)\otimes_{A^{\otimes 2}} A &\to \BC(A, A, A)\otimes_{A^{\otimes 2}} A \otimes \BC(A, A, A)\otimes_{A^{\otimes 2}} A \\
        a_0\otimes\dots \otimes a_{n+1}\otimes a &\mapsto \sum(-1)^{\deg a'(\deg a_{i+1}+\dots+\deg a_{n+1} - (n-i-1))}\\
        \qquad& (a_0 \otimes\dots\otimes a_i \otimes 1 \otimes a')\otimes (1\otimes a_{i+1}\otimes\dots\otimes a_{n+1}\otimes a'')
    \end{align*}
    where we are using Sweedler's notation for the coproduct $\Delta a = \sum a'\otimes a''$. This is the tensor product of the intersection coproduct on $A$ and the deconcatenation coproduct on $\BC(A, A, A)$.
\end{theorem}

\begin{proof}[Proof of \cref{thm:frobenius-model}]
    \begin{enumerate}
        \item 
    $\Omega^*(M)$ is a CDGA with orientation $\Omega^n(M)\to \R$ given by the integral $\int_M\omega$. By \cref{thm:lambrechts-stanley-model}, $\Omega^*(M)$ is quasi-isomorphic to a finite dimensional simply connected Poincaré duality algebra $A$ through a zigzag $A\from S\to \Omega^*(M)$. In particular $A$ is a Frobenius algebra. We need to show that the coproduct coincides with the coproduct on $\Omega^*(M)$. 


    Consider the zigzag 
    \begin{equation}A\xfrom{\quiso} S \xto{\quiso} \Omega^*(M)\xto{I_{DR}} C^*_\infty(M) \from C^*(M).\label{eqn:pf-frobenius-model-1}\end{equation} 
    We show that all the maps in zigzag \ref{eqn:pf-frobenius-model-1} preserve the product and pairing up to homotopy. The first two maps preserve the product and orientation map by the remarks after \cref{thm:lambrechts-stanley-model}. The de Rham map $I_{DR}$ preserves the product up to homotopy (in fact it is a map of $A_\infty$ algebras, cf.\ \cite{gugenheim1977chen}) and the map $C^*_\infty(M) \from C^*(M)$ preserves the cup product on the chain level. The orientation map on $C^*(M)$ is given by pairing with a representative of the fundamental class, different representatives yield homotopic orientations. $I_{dR}$ preserves the orientation map on the chain level and $C^*_\infty(M) \from C^*(M)$ preserves it on the chain level if one chooses the same (smooth) representative of the fundamental class in both instances. 

    The coproduct of $A$ by definition fits into the following diagram:
    \begin{equation}\label{diag:pf-frobenius-model-1}
        \begin{tikzcd}
            A \dar["\iso"]\rar["\Delta"] & A\otimes A[n] \dar["\iso"] \\
            A^\vee[-n] \rar & A^\vee\otimes A^\vee[-n]
        \end{tikzcd}
    \end{equation}

    The intersection coproduct is described by the following diagram
    \begin{equation}\label{diag:pf-frobenius-model-2}
    \begin{tikzcd}
    C^*(M) \dar["\capp {[M]}"] \rar["\Delta^!"] & C^{*}(M)\otimes C^*(M)[n] \dar["\capp{[M]}\otimes\capp{[M]}"] \\
    C_{-*}(M)[-n] \rar & C_{-*}(M)\otimes C_{-*}(M)[-n] &
    \end{tikzcd}
    \end{equation}

    We will show that in $D(Ch)$, one can connect the diagrams \ref{diag:pf-frobenius-model-1} and \ref{diag:pf-frobenius-model-2} using the zigzag \ref{eqn:pf-frobenius-model-1} and its graded dual.

    Using the map $A\from S$ and the graded dual $A^\vee\to S^\vee$, we obtain a cube-shaped diagram which commutes in $D(Ch)$
    \[
        \begin{tikzcd}
            & A\otimes A[n] \ar[dd, "\quiso" {yshift=18pt}]  &&  \ar[ll, swap, "\quiso"]  S\otimes S[n]\ar[dd, "\quiso"] \\
            A \ar[dd, "\quiso"] \ar[ur, "\Delta"]  && \ar[ll, crossing over, swap, "\quiso" {xshift=18pt}] S \ar[ur] \ar[dd, crossing over, "\quiso" {yshift=12pt}] & \\
            & A^\vee\otimes A^\vee[-n] \ar[rr, "\quiso" {xshift=18pt}] &&  S^\vee\otimes S^\vee \ar[ld] \\
            A^\vee[-n] \ar[ur] \ar[rr, "\quiso" ] &&  S^\vee[-n] 
        \end{tikzcd}
    \]
    This connects Diagram \ref{diag:pf-frobenius-model-1} to the Diagram 
    \begin{equation}
        \begin{tikzcd}
            S \dar\rar & S\otimes S[n] \dar \\
            S^\vee[-n] \rar & S^\vee\otimes S^\vee[-n]
        \end{tikzcd}
    \end{equation}
    Proceeding along the zigzag \ref{eqn:pf-frobenius-model-1}, we obtain a sequence of cubes with commutative faces, connecting Diagram \ref{diag:pf-frobenius-model-1} to the diagram 
    \begin{equation}\label{diag:pf-frobenius-model-3}
        \begin{tikzcd}
        C^*(M) \dar \arrow[r] & C^{*}(M)\otimes C^*(M)[n] \dar \\
        C^*(M)^\vee[-n] \rar & C^{*}(M)^\vee\otimes C^{*}(M)^\vee[-n] &
        \end{tikzcd}
    \end{equation}
    Thus the zigzag \ref{eqn:pf-frobenius-model-1} intertwines the coproduct on $A$ with the top map in this diagram in $D(Ch)$. It remains to show that this map is the intersection map $\Delta^!$. We can relate this to the defining Diagram \ref{diag:pf-frobenius-model-2} of $\Delta^!$ through the double dual inclusion $C_*(M)\to C_*(M)^{\vee\vee} = C^*(M)^{\vee}$. Since $C_*(M)$ has finite dimensional cohomology, the double dual inclusion is a quasi-isomorphism, hence an isomorphism in $D(Ch)$ \footnote{In field coefficients we can show this as follows: any complex with finite dimensional cohomology is isomorphic to a direct sum of a finite dimensional complex with zero differential and an acyclic complex. In both of these cases the double dual inclusion is clearly a quasi-isomorphism, hence also for the direct sum. }. Thus we can exhibit one last cube which connects Diagram \ref{diag:pf-frobenius-model-3} to Diagram \ref{diag:pf-frobenius-model-2}. This shows the claim on the coproducts. 

    \item We have already shown that $A^{\vee} \quiso C_*(M)$ and that this sequence of quasi-isomorphisms identifies the coproduct on $A^{\vee}$ with the diagonal on $C_*(M)$. The claim about the intersection product is proven with the same method as the claim on the intersection coproduct in (1). 
    \end{enumerate}
\end{proof}

% \begin{remark}
%     We could also formulate the theorem with Sullivan's polynomial forms $\APL$ in place of $\Omega^*$ and thus extend the theorem to more general coefficients.
% \end{remark}
% \begin{proposition}\label{prop:lambrechts-stanley-model-coproduct}
%     In the zigzag $A'\xfrom{\quiso} S \xto{\quiso} A$ in theorem \ref{thm:lambrechts-stanley-model}, the diagonal element $\Delta_{A'}\in A'\otimes A'$ has a preimage $\Delta_S\in S\otimes S$. 
% \end{proposition}
% This statement is proposition 15 in \cite{idrissi2019lambrechts}.
% It can be shown by a careful inspection of the proof of \ref{thm:lambrechts-stanley-model}.


\subsection{The co-BV Algebra Structure} \label{subsec:co-bv-alg}
We have seen that the loop coproduct on $H^*(LM)$ is modeled by the coproduct on $\BC(A, A, A)\otimes A$. To complete the discussion of the BV algebra structure on $H_*(LM)$, which corresponds to the co-BV structure on $H^*(LM)$, we consider the BV operator $\Delta$. The BV operator on $H_*(LM)$ is given by mapping $$\Delta\colon C_*(LM)\xto{[S^1]\times\blank} C_{*+1}(S^1\times LM)\xto{\rho_*} C_{*+1}(LM)$$
where $[S^1]$ represents the fundamental class of $S^1$ and $\rho\colon S^1\times LM\to LM$ is the translation action by $\rho(t, \alpha)(s) = \alpha(t+s)$. In cohomology, the co-BV operator is the degree $-1$ operator $$\Delta^{BV}\colon \Omega^*(LM) \xto{\rho^*} \Omega^*(S^1\times LM) \xto{\int_{S^1}} \Omega^{*-1}(LM)$$.

The co-BV operator on the Hochschild complex $CH_*(A, A) = B\otimes_{A\otimes A} A$ is given by $$\BC(a_0, \dots, a_n) = \sum_{j=0}^n \pm a_j\otimes  a_{j+1}\otimes  \dots\otimes  a_n\otimes  a_0\otimes  \dots \otimes a_{j-1} \otimes 1$$

\begin{theorem}\label{thm:bv-iso}
    If $M$ is simply connected and $A$ is a Frobenius algebra model of $M$, the operators $B$ and $\Delta^{BV}$, as maps of derived chain complexes, are intertwined by the iterated integral map $B\otimes_{A^{\otimes 2}} A \xto{\quiso}\Omega^*(LM)$. Similarly the operators $B$ and $\Delta^{BV}$ on $C^*(LM)$ are intertwined by the zigzag of quasi-isomorphisms $B\otimes_{A^{\otimes 2}} A \quiso C^*(LM)$. 
\end{theorem}

\begin{proof}
    We only show this for $\Omega^*$, for $C^*$ the proof is similar. 

Following \cite{naef2019string}, we represent the action $\rho$ on $LM$ using the splitting map $s\colon I \times LM\to\Map(\ocircle_2, M)$ from \cref{thm:model-splitting}. Translating a loop by $t$ is the same as composing its restriction to $[t, 1]$ with its restriction to $[0, t]$. This shows that in the following diagram, the right part commutes up to homotopy (since the paths are reparametrized).

\begin{center}
\begin{tikzcd}
    LM & \lar I\times LM\rar["s"]\dar &\Map(\ocircle_2, M) \rar["\tau"] &\Map(\ocircle_2, M)\rar["c"]& LM \\
    &\ar[ul] S^1\times LM\ar[rrru, bend right=10, "\rho"]
\end{tikzcd}
\end{center}
Here $\tau$ exchanges the two parts of the circle and $c$ is the concatenation map. The left part is the projection to $LM$. Using the models we have obtained so far, we can represent this on differential forms. Letting $\gamma\in B, a\in A$ and representing the coproduct as $\sum \gamma'\otimes\gamma''$, we obtain 

\begin{center}
\begin{tikzcd}
    \Omega^{*}(I\times LM) & \lar[swap, "s^*"] \Omega^*(\Map(\ocircle_2, M)) & \lar[swap, "\tau^*"] \Omega^*(\Map(\ocircle_2, M)) &\lar[swap, "c^*"] \Omega^*(LM) \\
    \mathcal I \otimes B\otimes_{A^{\otimes 2}} A \uar &\lar(B\otimes B) \otimes_{A^{\otimes 4}} A^{\otimes 2} \uar &\lar (B\otimes B) \otimes_{A^{\otimes 4}} A^{\otimes 2} \uar & \lar[swap, "\bar c"] B\otimes_{A^{\otimes 2}} A \uar \\
    \pm dt (\gamma''|a|\gamma') \otimes 1 +\dots  &\lar[mapsto] \pm \gamma''\otimes\gamma'\otimes \otimes 1\otimes a &\lar \pm \gamma'\otimes\gamma''\otimes a\otimes 1 &\lar \gamma\otimes a
\end{tikzcd}
\end{center}

We have used the model of $c$ from \cref{lem:model-concatenation}, $\tau$ from \cref{thm:graph-mapping-space} and $s$ from \cref{thm:model-splitting}. The image in $\mathcal I \otimes B\otimes_{A^{\otimes 2}} A$ contains two other summands, which contain $t$ or $(1-t)$ as factors in $\mathcal I$. 

To conclude, we have to show that the following diagram commutes in the derived category, where $p\colon I\times LM\to S^1 \times LM$
\begin{equation}\label{diag:pf-bv-iso}
\begin{tikzcd}
    \Omega^{*-1}(LM) &\lar[swap, "\int_I"]\Omega^*(I\times LM) \\
    & \ar[ul, "\int_{S^1}"] \Omega^*(S^1\times LM)\uar[swap, "p^*"]
\end{tikzcd}
\end{equation}
If it commutes, then we can compute $\Delta^{BV}$ by taking the fiber integral $\int_{I}\colon\Omega^*(I\times LM)\to \Omega^{*-1}(LM)$ after the chain above, and this corresponds to projecting to the $dt$ summand in $\mathcal I\otimes B\otimes_{A^{\otimes 2}} A$, which shows the claim.

To show that the diagram commutes, let $\mathcal S = k\langle 1\rangle\oplus k\langle dt\rangle$ be the two dimensional chain complex  with two generators $1$ and $dt$ of degree $0$ resp.\ $1$ and differential $0$. This is quasi-isomorphic to $\Omega^*(S^1)$ and we there is a quasi-isomorphism $\mathcal S\otimes \Omega^*(LM)\to\Omega^*(S^1\times LM)$. Recall also the interval complex $\mathcal I$ in \cref{thm:model-splitting}, which also has an isomorphism $\mathcal I\otimes\Omega^*(LM) \to \Omega^*(I\times LM) $. We can replace Diagram \ref{diag:pf-bv-iso} with the diagram
\begin{center}
    \begin{tikzcd}
        \Omega^{*-1}(LM) &\lar\mathcal I\otimes \Omega^*(LM) \\
        & \ar[ul] \mathcal S\otimes\Omega^*(LM) \uar
    \end{tikzcd}
\end{center}
where the maps into $\Omega^*(LM)$ are given by projecting $1\otimes \omega_1+dt\otimes\omega'$ resp.\ $1\otimes\omega_1+t\otimes \omega_2+dt\otimes \omega'$ to $\omega'$. The pullback $\Omega^*(S^1\times LM)\to \Omega^(\mathcal S\times LM)$ is modeled by the inclusion $\mathcal S\to\mathcal I$. This diagram commutes on the chain level. The quasi-isomorphisms from this into Diagram \ref{diag:pf-bv-iso} give rise to three squares which commute on the chain level. This shows that Diagram \ref{diag:pf-bv-iso} commutes in $D(Ch)$.
\end{proof}

\begin{corollary}
    If $M$ is a simply connected closed oriented manifold, the loop coproduct and $\Delta^{BV}$ form a co-BV algebra on $H^*(LM)$.
\end{corollary}
\begin{proof}
    For any Frobenius algebra $A$, one can show algebraically that the operations $\Delta$ and $B$ on the Hochschild complex $CH_*(A, A) = \BC(A, A, A)\otimes_{A^{\otimes 2}} A$ satisfy the co-BV relations in $D(Ch)$, see theorem 5.4 in \cite{abbaspour2015algebraic} or theorem 1 of \cite{tradler2008bvalg}.

    n particular if we take $A$ to be a Frobenius algebra model of $\Omega^*(M)$, then the homology of the Hochschild complex has the structure of a co-BV algebra. The zigzag $A\to\dots\from C^*(M)$ induces zigzags $B(A, A, A)\otimes_{A^{\otimes 2}} \to\dots\from B(C^*(M),C^*(M), C^*(M))\otimes_{C^*(M)^{\otimes 2}} C^*(M)$ and we have shown that the latter is quasi-isomorphic to $C^*(LM)$. All of these maps preserve the co-BV operations on cohomology. Thus the co-BV relations hold in the cohomology of $LM$. 
\end{proof}


\subsection[Example: The three-dimensional Sphere]{Example: $S^3$}

For $S^3$, the explicit Frobenius algebra model $A$ is as graded vector spaces generated by an element $1$ of degree $0$ and $e$ of degree $n=3$, with zero differential. The product is determined by noting that $1$ is the unit and the coproduct is given by $1\mapsto 1\otimes e + (-1)^n e\otimes 1$. 

To compute the Hochschild complex, we can replace $\BC(A, A, A)$ with the normalized bar construction $$\hat B = \nBC(A, A, A) = \bigoplus_{n\geq 0} A\otimes \bar A^{\otimes n} \otimes A$$
where $\bar A = A/\langle 1\rangle$. Thus to compute the cohomology of $LS^n$ for $n=2,3$ we can compute the cohomology of $\hat B\otimes_{A^{\otimes 2}} A$. This is generated as a graded vector space by the $(k+3)$-fold product $1 \otimes e\otimes\dots\otimes e\otimes 1 \otimes e \eqdef e^{k-1} e\in (A\otimes \bar A^{k}\otimes A)\otimes_{A^2} A$ of degree $k(n-1)+n$ and the $k+3$-fold product $1\otimes e\otimes\dots\otimes e\otimes 1 \otimes 1 \eqdef e^{k} 1$ of degree $k(n-1)$ for $k\geq 1$. The differential maps 
\begin{align*}
    e^k e &\mapsto 0 \\
    e^k 1 &\mapsto (-1)^{nk} e^{k} e + (-1)^{k} e^{k-1} e
\end{align*}
For odd $n$ this is $0$. Thus the cohomology of $LS^3$ has dimension $1$ in the dimensions $(k-1)(n-1)$ and $(k-1)(n-1)+n$ for $k\geq 1$ and $0$ in other degrees. The coproduct maps 
\begin{align*}
    e^{k} e &\mapsto \sum_{l=0}^k \pm e^{l} e \otimes e^{k-l} e \\
    e^{k} 1 &\mapsto \sum_{l=0}^k \pm e^{l} 1 \otimes e^{k-l} e \pm e^{l} e \otimes e^{k-l} 1
\end{align*}



\section{Further Developments}
\subsection{Loop Coproduct}
Naef and Willacher perform in \cite{naef2019string} a analysis similar as in \cref{subsec:loop-product-model} for the loop coproduct (cohomology product). Recall that this is a map $H^*(LM, M)\otimes H^*(LM, M)\to H^*(LM, M)$. If $A$ is quasi-isomorphic to $\Omega^*(M)$, one can show that $\Omega^*(LM, M) = \cone(\Omega^*(LM)\to \Omega^*(M))$ is quasi-isomorphic to the reduced Hochschild complex
\begin{align*}
\bar CH_*(A, A) \defeq \bigoplus_{k\geq 1} (A[1])^{\otimes  k} \otimes A = \BC(A, A, A)\otimes_{A^{\otimes 2}} A / A
\end{align*}
If $A$ is a Frobenius algebra model of $\Omega^*(M)$, one can define a degree $n-1$ product on $\bar CH_*(A, A)$ by mapping $\alpha\in A[1]^{\otimes k}, x\in A, \beta\in A[1]^{\otimes l}, y\in A$ to 
\begin{align*}
    (\alpha\otimes x)\otimes (\beta\otimes y)  \mapsto \sum \pm (\alpha \otimes (xy)_{(1)}\otimes\beta)\otimes (xy)_{(2)}
\end{align*}
where in Sweedler's notation, the coproduct $\Delta(xy) = \sum (xy)_{(1)} \otimes (xy)_{(2)}$.


\begin{theorem}{\cite[Thm. 1.3]{naef2019string}}
    If $A$ is a Frobenius algebra model of $\Omega^*(M)$, then there is a chain of quasi-isomorphisms $\bar CH_*(A, A)\quiso \Omega^*(LM, M)$ which intertwines the product on $H^*(LM, M)$ from \cref{subsec:loop-coproduct} with the product on $H^*(\bar CH_*(A, A))$.
\end{theorem}
The proof of this is very similar to the proof of \cref{thm:loop-product-derived}, using the models of the splitting, concatenation and intersection maps that we have shown. Since $H^*(LM, M)$ is modeled by mapping cones from the outset, the construction of the intersection map in \cref{subsec:loop-coproduct} involves taking mapping cones of mapping cones. For details of the proof we refer to \cite[Sec. 6]{naef2019string}.
% We only consider the $\chi=0$ case, where we have the following commutative diagram:
% \begin{center}
% \begin{tikzcd}
%     H^*(LM\times LM) \dar["\quiso"] \rar & H^*(LM\times_M LM) \rar& H^{*+n}(\Map(\ocircle_2, M)) \rar & H^{*+n}(LM\times I) \rar & H^{*+n+1}(LM)\\
%     (B\otimes B)\otimes_{A^4} A^2 & (B\otimes B)\otimes_{A^4} A & (B\otimes B)\otimes_{A^4} A^2 & B\otimes_{A^2} A\otimes \mathcal I & B\otimes_{A^2} A
% \end{tikzcd}
% \end{center}

\subsection{The Lambrechts-Stanley Model of the Configuration Spaces}\label{subsec:cfg-models}
Let $M$ be a smooth closed oriented simply connected manifold. Recall that in \cref{subsec:graph-models} we constructed a model of the mapping spaces $\Map(G, M)$ from $\Omega^*(M)$. In this subsection we sketch models of the compactified configuration spaces $\cConf_M(n)$ from \cref{subsec:compactificatified-configuration-space}. We begin with the model due to Lambrechts and Stanley \cite{lambrechts2008remarkable}. 

Let $A$ be a Frobenius algebra model of $M$. Given a set of generators $X$ with fixed degrees, by $S(X)$ the free graded commutative algebra generated by elements of $X$. Recall that $A^{\otimes r}$ has the structure of a differential graded commutative algebra and denote by $p_{i}^* \colon A \to A^{\otimes r}$ the map $$a\mapsto 1\otimes\dots\otimes a\otimes \dots\otimes 1$$ with $a$ in the $i$-th position and similarly $p_{ij}^*\colon A\otimes A\to A^{\otimes r}$.

\begin{definition}
    The graph complex of $A$ for the compactified configuration space of $r$ points is the quotient of differential graded commutative algebras
\begin{align*}
    G_A(r) \defeq A^{r\otimes} \otimes S(\omega_{ij} | {1 \leq i\neq j\leq r}) / I.
\end{align*}
where each $\omega_{ij}$ has degree $\dim M-1$ and $I$ the graded ideal generated by 
\begin{itemize}
    \item the relations $\omega_{ij}^2, \omega_{ji} = (-1)^{\dim M} \omega_{ij}$, and the Arnol'd relation $\omega_{ij}\omega_{jk} + \omega_{jk}\omega_{ki} + \omega_{ki}\omega_{ij} = 0$.
    \item $p_i^*(a)\omega_{ij} = p_j^*(a)\omega_{ij}$ for $a\in A$ and $1\leq i, j \leq r$. 
\end{itemize}
\end{definition}

Denote by $d$ the differential on $G_A(r)$ which is the induced by the tensor product differential on $A^{r\otimes} \otimes S(\omega_{ij})_{1 \leq i\neq j\leq r}$, which acts on each factor $A$ as the differential of $A$ and maps $\omega_{ij}$ to the diagonal class 
\begin{align*}
    d_{split}(\omega_{ij}) = p_{ij}^*(\Delta_A(1)).
\end{align*}

\begin{remark}\label{rmk:graph-complex}
    This is called a graph complex for the following reason: One can interpret a product of the generators $\omega_{ij}$ in $S(\omega_{ij} | {1 \leq i\neq j\leq r})$ as a graph with $r$ nodes and an edge between the nodes $i, j$ for each factor $\omega_{ij}$ in the product. An element of $A^{r\otimes} \otimes S(\omega_{ij} | {1 \leq i\neq j\leq r})$ is thus a graph which is decorated with an element of $A$ at each node. The differential of such a graph is given by (1) the differential of the decorations and (2) splitting up each edge and adding decorations given by the diagonal class $\Delta_A(1)$ to the corresponding nodes. 
\end{remark}

\begin{theorem}
    There is a quasi-isomorphism $G_A(r)\to \cConf_M(r)$.
\end{theorem}

There is a second construction which one can apply even if $M$ is not simply connected, due to Campos and Willacher \cite{campos2016model}. We only describe this informally, using the depiction via graphs as in \cref{rmk:graph-complex}. The space $TwGra_M(r)$ is spanned by graphs with $n$ vertices labeled from $1$ to $r$, called ``external'' vertices and an arbitrary number $k$ of indistinguishable ``internal'' vertices. Both types of vertices can be decorated by elements of $\bar H^*(M)$. Additionally we impose the condition that ever connected component of the graph contains an external vertex. The degree of internal vertices is $-\dim(M)$, the degree of edges is $\dim(M)-1$ and each decoration has its own degree as an element of $\bar H^*(M)$. The differential is given by two terms which correspond to (1) splitting up each edge and adding decorations given by the diagonal class $\Delta_{H^*(M)}(1)$ to the corresponding nodes and (2) contracting edges incident to at least on internal vertex. If in (1), a component without an external vertex is created, this is turned into a scalar according to a so called partition function. 

\begin{theorem}
    There is a zigzag of quasi-isomorphisms $TwGra_M(r)\xto{\quiso}\dots\xfrom{\quiso} C^*(\cConf_M(r))$.
\end{theorem}


% \paragraph{Intuition} The following is not meant to be precisely true, but it still gives good intuition. Let $\Gamma$ be an admissible diagram with $\ell$ interior vertices and fix an order on the interior vertices. Consider the intersection $\bigcap \pi_{ij}^{-1}(c_{ij})\subset \cConf_m(n+l)$, where $c_{ij}$ are constants. This is a space with expected codimension $\abs{(E_\Gamma)}\cdot (m-1)$, we interpret it as a homology class in $H_*(\cConf_m(n+\ell), \partial\cConf_m(n+\ell))$. Map this along the projection $p_{n,\ell}\colon \cConf_m(n+\ell)/\partial\cConf_m(n+\ell) \to \cConf_m(n)/\partial\cConf_m(n)$ which forgets the last $\ell$ points, denote the resulting class by $a_\Gamma\in H_*(\cConf_m(n), \partial\cConf_m(n))$, now of expected codimension $\abs{(E_\Gamma)}\cdot (m-1) - \ell\cdot m$. The boundary of the space is given by edge contraction of $\Gamma$. Under Poincare duality, it corresponds to the form $\bigwedge \alpha_{ij}$ of degree $\abs{E_\Gamma}\cdot (m-1)$. 

% For example, figure \ref{graph-complex-ex} shows how the Arnol'd identity $\alpha_{12}\alpha_{23} + \alpha_{23}\alpha_{31} + \alpha_{31}\alpha_{12} = 0$ in cohomology arises in this way: Interpret the diagram in (b) as the space of configurations of four points where the relative directions between the interior and the exterior point are fixed. The codimension one boundary of this is given by the configurations where the interior point is infinitesimally close to one of the three exterior points (and the relative directions are still fixed). Forgetting the interior point now yields three components as in (a).  

% \begin{figure}[ht]
%     \centering
%     \begin{subfigure}[b]{0.65\textwidth}
%         \centering
%         \includesvg[width=\textwidth]{img/graph-complex-jacobi-2}
%         \caption{The Arnol'd identity $\alpha_{12}\alpha_{23} + \alpha_{23}\alpha_{31} + \alpha_{31}\alpha_{12} = 0$}
%     \end{subfigure}
%     \hfill
%     \begin{subfigure}[b]{0.3\textwidth}
%         \centering
%         \includesvg[width=\textwidth]{img/graph-complex-jacobi-1}
%         \caption{A cochain whose boundary is the Arnol'd identity}
%     \end{subfigure} 
%     \caption{Arnol'd identity in the graph complex. }\label{graph-complex-ex}
% \end{figure}

% This intuition the definition of the boundary operator and the product structure. The operad structure is not immediately clear. 

% Note that the projection $\cConf_m(n+\ell) \to \cConf_m(n)$ becomes an umkehr map in cohomology due to Poincare duality. Thus one can use fiber integration to represent this. The construction ``configuration space integral'' quasi-isomorphism $Graphs_m \to \Omega_{PA}(\cConf_m)$ essentially works as described above. The construction of the umkehr map is difficult, as the fiber is not a manifold, hence one uses PA forms here. 



\subsection{Cyclic Homology}

The classifying space $BG$ of a topological group $G$ is the quotient of a weakly contractible space $EG$ by a free proper action of $G$. In the case of $G=S^1$, one can take $BG = \C P^\infty$ and $EG = S^\infty$. Recall that there is an $S^1$-action $\rho\colon LM\times S^1\to LM$ on $LM$. The homotopy orbit space of this action is $LM\times_{S^1} EG$, this is a version of the orbit space $LM/S^1$ which is better adapted to the study of homotopical properties. 
\begin{definition}
The equivariant cohomology $H_{S^1}^*(LM)$ is the cohomology of the homotopy quotient space $LM\times_{S^1} ES^1$.
\end{definition}

The cyclic group $\Z/n\Z$ acts on $A^{\otimes n}$ via the generator
\begin{align*}
    t=t_{n-1}\colon A^{\otimes n}\to A^{\otimes n} \\
    a_1, \dots, a_n \mapsto \pm a_n\otimes a_0\otimes\dots\otimes a_{n-1}
\end{align*}
Let $N = \id+t+\dots+t^{n-1}$. One checks that $t$ and thus $N$ induce chain maps on the Hochschild complex $\BC\otimes_{A^{\otimes 2}} A $.

\begin{definition}
The \emph{cyclic complex} $Cyc(A)$ of $A$ is the image of $N$ in $\hat C(A)$, which is a subcomplex.  Equivalently, it is the total complex of $A^{\otimes n} / (\id-t)$, with differential induced by the differential of the Hochschild complex. 
\end{definition}

The following is stated in \cite{naef2019string}.
\begin{theorem}
Let $M$ be a closed oriented simply connected smooth manifold and let $A$ be a Frobenius algebra model of $M$. Let $\bar A = A / (1)$. Then there is a quasi-isomorphism \begin{equation}HCyc(A) \iso \bar H^{-*}_{S^1}(LM).\label{eq:cyc-iso}\end{equation} 
\end{theorem}
A homological version of this is shown in \cite{Chen_2010}. 

One can construct operations on $H^{-*}_{S^1}(LM)$ as follows. There is a map $LM \quiso LM\times ES^1\to LM\times_{S^1} ES^1$ and one can construct an umkehr map $p^!\colon H_{*+1}(LM) \to H_*(LM\times_{S^1} ES^1)$. The string bracket (cohomology cobracket) is the operation 
\begin{align*}
    \bar H^*_{S^1}(LM)\xto{p^*} \bar H^*(LM)\to (\bar H^*(LM) \otimes \bar H^*(LM))[n] \xto{p^!\otimes p^!} (\bar H_{S^1}^*(LM)\otimes \bar H_{S^1}^*(LM))[n-2]
\end{align*}
Similarly one can define the string cobracket (cohomology bracket) on cohomology, using the loop coproduct (cohomology product), which is a map
\begin{align*}
    \bar H^*_{S^1}(LM)\otimes \bar H^*_{S^1}(LM) \to \bar H^*_{S^1}(LM)[n-2]
\end{align*}
This construction yields a Lie bialgebra, cf.~\cite{chas1999string}, \cite{chas2004closed}. 

Similarly one can construct operations on the cyclic complex, which yield the structure of a Lie bialgebra on homology. 
\begin{theorem} The isomorphism \ref{eq:cyc-iso} preserves the Lie bialgebra operations. 
\end{theorem}

Theorem 1.5 of \cite{naef2019string} is the following: 
\begin{theorem}
    If $M$ is a closed oriented, not necessarily simply connected manifold, one can construct an algebra $A$ over $\R$ which is quasi-isomorphic to $\Omega^*(M)$, such that there exists a map 
    \begin{equation}HCyc(\bar A) \to \bar H^{-*}_{S^1}(LM)\end{equation}
    which preserves the Lie bialgebra operations.
\end{theorem}
This is shown using the explicit models of the compactified configuration space due to \cite{campos2016model} outlined in \cref{subsec:cfg-models}. 





% \section{Configuration Spaces}

% \paragraph{Definition} For $X$ a topological space resp.\ a set, let
% \begin{align*}
%     \Conf_X(n) = \{(x_1,\dots, x_n)\in X^n \mid x_i \neq x_j\ \text{if}\ i\neq j\}
% \end{align*}
% We write $\Conf_m(n) \coloneqq \Conf_{\R^m(n)}$. Note for a natural number $n$, we write $\underline n \defeq \{1, \dots, n\}$; thus we can write $\Conf_{\underline m}(n)$, which is a finite set and not a space. 

% \paragraph{Homotopy Properties} The configuration spaces are homotopy equivalent to the little disks operad. For an overview of properties of the little disks operad see~\cite{fresse2017homotopy}. There is a recognition principle by Fiedorowicz, which gives sufficient conditions for an operad to be homotopy equivalent to the little 2-disks operad. There is no higher-dimensional analogue, because the recognition principle relies on the universal covering. 

% \paragraph{Fadell-Neuwirth Tower} There is a tower of fibrations $\Conf_m(n) \to \Conf_m(n-1) \to \dots \to \Conf_m(2) \simeq S^{m-1}$, which split (e.g. by adding a point at infinity or duplicating the $i$th point). The fiber sequence is $\bigvee_{n-1} S^{m-1} \to \Conf_m(n) \to \Conf_m(n-1)$. Check Lem 3.4 in~\cite{sinha2010homology}. 

% \subsection{Homology and Cohomology} 
% See the notes of the cacti operads talk for more detail on this, 

% It is well-known that $H^*(\Conf_m(n))$ is the free graded commutative algebra generated by $\alpha_{ij}$ with degree $1$ modulo the relations $\alpha_{ij} = \pm\alpha_{ji}$, $\alpha_{ii}=0$ and $\alpha_{ij}\alpha_{jk} + \alpha_{jk}\alpha_{ki} + \alpha_{ki}\alpha_{ij} = 0$. The generators are given by $\pi_{ij}^*\omega$ for $\omega\in C^{m-1}(\Conf_m(2))$ representing a fundamental cohomology class, (note the homotopy equivalence $\Conf_m(2)\simeq S^{m-1}$). This is a classical result by Arnol'd, proven via spectral sequences, through analysis of the fibration maps $\Conf_m(n) \to \Conf_m(n-1)$. 

% In homology, it is known that $H_*(\Conf_m(n))$ is the Gerstenhaber operad for $m=2$ and an analog for $m>2$. Explicitly, this is the universal operad generated by $\mu\in H_0(\Conf_m(2))$ and $b\in H_{m-1}(2)$, where $\mu$ is commutative and associative, $b$ is anticommutative and satisfies the Jacobi identity, and both are related via the Poisson identity. 

% \paragraph{Duality}
% Let $\Delta_m^{(r)} \defeq \{x\in M^r \mid \exists i\neq j \ \text{s.t.}\ x_i = x_j\} = M^r\setminus \Conf_M(r)$. By Poincaré-Lefschetz duality, there is an isomorphism 
% \begin{align*}
%     H_*(\Conf_M(r)) \iso H_c^{mr- *}(M^r, \Delta^{(r)}_M)
% \end{align*}




% \subsection{Graph Complex of Configuration Spaces}

% \subsubsection[The euclidean case]{The case $M=\R^m$}

% \paragraph{Homology} We first exhibit a homological complex construction; this is ad-hoc, not following any reference. Recall from earlier that the homology is given as an operad generated by a multiplication $\mu$ and a bracket operation $b$. To a rooted binary tree with labeled vertices one can assign an element of $H_*(\Conf_m(n))$ by putting $b$ at each of the inner vertices. To a collection of such rooted trees (a forest), one can assign an element of $H_*(\Conf_m(n))$ by multiplying the previous elements up. These elements generate the homology as a module. 

% We now create an operad of chain complexes related to rooted trees $\mathcal{RT}$, by using the same generators $\mu$ and $b=b_2$ as before, but we add generators $b_k\in\mathcal{RT}(k)$, which corresponds to a corolla with $k$ incoming vertices. Compositions of the generators $b_k$ can be graphically depicted as rooted trees, now no longer binary. $\mu$ is still commutative and associative. I haven't figured out how the Poisson relation translates to the higher terms, thus the operad structure is somewhat unclear for forest-like elements. The differential is given by the dual of edge contraction modulo some symmetries, so that the differential of $b_3$ is the Jacobi element of $b_2$. There is an exact sequence $H_{k(m-1)-1}(\Conf_m(k), \partial\Conf_m(k)) \to H_{k(m-1)-2}(\partial\Conf_m(k)) \to H_{k(m-1)-2}(\Conf_m(k))$. The generator $b_k$ represents the fundamental class of $H_{k(m-1)-1}(\Conf_m(k), \partial\Conf_m(k))$.

% \paragraph{Cohomology} We now outline the complex describing the cohomology of $\Conf_m(n)$. For a detailed construction, see \cite[Chapter 6]{lambrechts2014formality}. Consider diagrams (graphs) $\Gamma$ with $n$ labeled ``exterior'' points and an arbitrary finite number of indistinguishable ``interior'' points. Define a graded vector space freely generated by these graphs, where the degree of a graph is 
% \begin{align*}
%     \deg \Gamma = \abs{E_\Gamma} \cdot (m-1) - \abs{I_\Gamma} \cdot m.
% \end{align*} 
% We omit some details here: to choose appropriate signs in the differential later, one has to induce orders on most of the data of the graphs and talk about loops, parallel edges etc. The differential is given by edge contraction for edges with at least one internal vertex. Admissible diagrams contain no loops, no double edges, no internal vertices of valence $\leq 2$ and each internal vertex is connected to some external vertex. 

% The admissible diagrams form a graph complex $\coGraphs_m$ with differential given by edge contraction. They form a Hopf cooperad with multiplication given by union of graphs, identifying the external vertices by their labels, and cooperadic cocomposition is dual to the operad with operadic composition $\comp_i$ which inserts at the node $i$ a graph and sums over all choices of connecting the loose edges to $i$. 

% \begin{theorem}
%     The complex of admissible diagrams is quasi-isomorphic to the singular cochain complex of $\cConf$.
% \end{theorem}

% \subsubsection{The manifold case}

% Following \cite{campos2016model}. 

% %\paragraph{Decorated Graphs} Let $H$ be a vector space and $S$ be a collection of graphs with vertex sets $V_G$ for $G\in S$. The vector space of decorated graphs is the space

% %\begin{align*}
% %    \bigoplus {G\in S} \Lambda(H_v \mid v\in V_G)
% %\end{align*}

% %where $\Lambda$ is the commutative algebra generated freely by the vector spaces and the $H_v$ are distinct copies of $H$ for each vertex $v$. Thus each vertex may be decorated with multiple elements of $H$ at each vertex, which are related tensorially. 

% % \paragraph{Pre-dual graphs} Let $V$ be an $N$-dimensional graded vector space with a non-degenerate pairing of degree $-D$; $\langle\blank,\blank,\rangle\colon V\otimes V \to \R$ s.t. $\langle x, y\rangle = (-1)^{kl+d}\langle y, x\rangle$. The example to keep in mind is the cohomology of a connected $N$-manifold. We may require that the pairing is compatible with the multiplication or a differential. 

% % Let $e_1, \dots, e_N$ be a basis of $V$. Denote by $\coGra_V(n)$ the free graded commutative algebra generated by symbols $s^{ij}$ of degree $D-1$ for $i,j \leq n$ and $e_1^j\dots e_N^j, j=1,\dots,n$, quotiented by $e^j_1 - 1$. Define a differential via 
% % \begin{align*}
% %     &de^j_\alpha = 0 \\
% %     &ds^{ij} = \sum_{\alpha, \beta} g^{\alpha\beta}e^i_\alpha e^j_\beta
% % \end{align*}
% % where $g^{kl}$ is the inverse of the matrix describing the pairing on $V$ (so $\sum_{g^{\alpha, \beta}} e_\alpha e_\beta$ is the ``diagonal class'' i.e.\ the associated copairing). More abstractly, one can also present this without choosing a basis in $V$, by considering the graded commutative algebra generated by $n$ different copies of $V$ and the free symbols $s^{ij}$. A homogeneous element corresponds to a graph with $n$ vertices and decorations at each vertex with elements of $V$, see figure \ref{cw-graph-example}. 

% If $M$ is a compact orientable manifold, denote by $\coGra_M(n) = \coGra_{H^*(M)}(n)$. If $M = \R^D$ and hence $V=k$ concentrated in degree $0$, then the above construction, omitting differentials, yields a graded vector space, which we denote $\coGra_D(n)$; this corresponds to undecorated differentials. 

% $\coGra_D$ is a cooperad and $\coGra_M$ is a comodule of $\coGra_D$. 

% \begin{figure}[ht]
%     \centering
%     \includegraphics[width=0.8\textwidth]{img/campos-willacher-graph-dual-example.png}
%     \caption{An example of a graph describing an element in $\coGra_V(4)$}\label{cw-graph-example}
% \end{figure}

% \paragraph{The dual graph complex $\coGraphs_M(n)$} As a vector space, it is spanned by $n$ labeled external vertices and an arbitrary finite number of internal vertices, decorated by (possibly multiple) cohomology classes of deg $\geq 1$, under the condition that there are no connected components without external vertices. There is a graded commutative algebra structure given by superposition of external vertices (i.e. disjoint union of graphs followed by identifying the external vertices with the same label). The differential splits as $\delta_{contr} + \delta_{cut} = \delta_{contr} + \Delta^* + \delta_{Z_M}$, where $\delta_{contr}$ contracts edges with at least one internal vertex and $\delta_{cut}$ splits edges with the copairing. This may produce ``forbidden'' graphs containing connected components without external vertices. This is the $\delta_{Z_M}$ part, which maps these components to a scalar via the function $Z_M$.

% There is a similar construction for the $M=\R^D$ case for $\coGraphs_D(n)$, the difference is that all internal vertices of graphs are required to be at least trivalent (and no decorations are required). This has a cooperad structure which is induced by the dual of contracting a subgraph: for the coaction on a graph $\Gamma$ one sums over tuples $\Gamma', \Gamma_1, \dots, \Gamma_k)$ such that when each graph $\Gamma_i$ is inserted at the vertex $i$ of $\Gamma'$, one can reconnect the loose edges such that one obtains $\Gamma$.  

% %TODO: Image

% \begin{theorem}
% There is a quasi-isomorphism between $\coGraphs_D$ and $\Omega_{PA}(\cConf_D)$ (which is equivalent to $\APL(\cConf_D)$), which is compatible with the cooperad structures (in an appropriate sense).

% There is an equivalence between $\coGraphs_M$ and $\mathcal \APL(\cConf_M)$ which is compatible with the cooperadic comodule structure. 
% \end{theorem}

% \begin{figure}[ht]
%     \centering
%     \includegraphics[width=0.5\textwidth]{img/cw-graphs-ast-example.png}
%     \caption{An example element of $\coGraphs_V(4)$}\label{cw-graphs-ast-example.png}
% \end{figure}    
% \begin{figure}[ht]
%     \centering
%     \includegraphics[width=0.7\textwidth]{img/cw-graphs-mult.png}
%     \caption{An example element of $\coGraphs_V(4)$}\label{cw-graphs-mult}
% \end{figure}



\newpage
\appendix





\section{Elements of Singular Cohomology}

In this section, we state classical results of singular homology and cohomology for reference and comparison with the main part of the thesis. Specifically, we consider Poincaré duality, the intersection product, the Thom isomorphism and the slant product. All of these provide examples of umkehr maps and we are interested in them from this viewpoint. 


We define umkehr maps via Poincaré duality in the case of closed oriented manifolds in \cref{subsec:umkehr_maps_via_pd}. A more general definitions of umkehr maps is given in \cite{cohen2009umkehr}, but we do not use it in this work. A special role is taken by the intersection product, which is the umkehr map of the diagonal. In \cref{subsec:intersection-product-via-pd}, we construct the intersection product and show some of its algebraic properties. The Thom isomorphism is a classical construction of an oriented vector bundle $E\to B$, which induces an isomorphism on homology $H_{*+n}(E, E_0) \xto{\quiso} H^{*}(B)$, where $E_0$ is $E$ minus the zero section. In \cref{subsec:thom-iso} we show that it is the umkehr map of the zero section map $B\to (E, E_0)$, in the case where our definition of umkehr maps applies. There is another well known construction of the intersection product using the Thom isomorphism and tubular neighborhoods. In this construction, using tubular neighborhoods, the diagonal of a manifold is identified with the zero section of a bundle, so that the Thom isomorphism provides an umkehr map. In \cref{subsec:intersection-via-tubular} we show that this construction of the intersection product yields the same map. Finally, in \cref{subsec:slant_product} we review formal properties of the slant product. The slant product can be used to construct umkehr maps $Y\times X\to Y$ if $X$ has a fundamental class and it is a version of fiber integration in singular chains. 

We use singular chains and cochains with $\Z$-coefficients in this section, unless stated otherwise.


\subsection{Umkehr Maps via Poincaré Duality} \label{subsec:umkehr_maps_via_pd}

One can use Poincaré duality to construct umkehr maps as maps in the derived category of chain complexes. We first recall the statement of Poincaré duality. 

Let $M$ be a smooth manifold of dimension $n$, possibly with boundary $\partial M$. 

\begin{definition}
    A \emph{homological orientation} of $M$ is an assignment of a homology class $z_p\in H_n(M, M\setminus \{p\})$ for each $p\in M$, which is locally consistent in the sense that there exists a covering of $M$ with open sets $U$ diffeomorphic to $\R^n$, such that for all $p, q\in M$, the chain of isomorphisms $H^*n(M, M\setminus\{p\})\iso H^*(U, U\setminus\{p\})\iso H^*(U, U\setminus\{q\}) \iso H^*n(M, M\setminus\{q\})$ maps $z_p$ to $z_q$. 
\end{definition}

This is from \cite[Subsec. 3.3]{hatcher2002algebraic}. One can show that a homological orientation with coefficients in $\Z$ or $\Q$ is corresponds bijectively to an orientation of $M$ and the corresponding notions of orientability are equivalent. 

\begin{theorem} \label{thm:poincare_duality}
    Let $M$ be a smooth compact oriented manifold, possibly with boundary.
\begin{enumerate}[(a)]
    \item There exists a unique \emphi{fundamental class} $[M]\in H_n(M,\partial M)$, such that for any $p\in M\setminus \partial M$, we have $[M]|_{(M, M\setminus\{p\})} = z_p\in H_n(M, M\setminus \{p\})$.
    \item If $\partial M = A \union B$ is the union of two compact $(n-1)$-dimensional manifolds with common boundary $\partial A = \partial B = A\isect B$, then the cap product with $[M]$ gives an isomorphism
    \begin{align*}
        H^k(M, A) \to H_{n-k}(M, B).
    \end{align*}
    \item In particular, there are isomorphisms
    \begin{align*}
        H^k(M) \to H_{n-k}(M, \partial M) \\
        H^k(M,\partial M) \to H_{n-k}(M).
    \end{align*}
\end{enumerate}
\end{theorem}

Parts (b) and (c) are \cite[Thm 3.43]{hatcher2002algebraic}, part (a) is due to the remark just before the cited theorem, as a consequence of \cite[Thm 3.27]{hatcher2002algebraic}. 


\begin{definition}
Let $f\colon M\to  N$ be a map of smooth closed oriented manifolds with $m=\dim M$ and $n=\dim N$. Then there is a contravariant \emphi{umkehr map} on homology which we denote by $f_!\colon H_*(N)\to H_{*+m-n}(M)$ which is defined via Poincaré duality as the unique map that makes the following diagram commutative:
\begin{equation}
    \begin{tikzcd}
        H_*(N)  \rar["f_!"] & H_{*+m-n}(M)  \\
        H^{n-*}(N) \uar[swap, "\iso"]\rar["f^*"] & H^{n-*}(M) \uar[swap, "\iso"]
    \end{tikzcd}
\end{equation}
More generally, the analogous diagram in the derived category of chain complexes $D(Ch(\Z))$ yields a derived umkehr map $f_! \colon C_*(N) \to C_{*+m-n}(M)$.

Similarly, the covariant \emph{umkehr map} on cohomology $f^!\colon H^*(M)\to H^{*-m+n}(N)$ is defined via the diagram
\begin{equation}
    \begin{tikzcd}
        H^*(M)  \rar["f^!"] & H^{*-m+n}(N)  \\
        H_{m-*}(M) \uar[swap, "\iso"]\rar["f_*"] & H_{m-*}(N) \uar[swap, "\iso"]
    \end{tikzcd}
\end{equation}
\end{definition}

\begin{remark}
    We follow the convention from \cite{bredon2013topology} in using the lower shriek notation $f_!$ for the homological, contravariant umkehr map and $f^!$ for the cohomological, covariant umkehr map. 
\end{remark}

\begin{remark}
    There is the following intuition for umkehr maps: One can informally think of a homology class as represented by a subspace, and the map $f_*$ takes the image, while $f^!$ can be thought of as taking the preimage. For example, the umkehr map $\Delta^!$ of the diagonal $\Delta\colon X\to X\times X$ can be thought of as the intersection with the diagonal and $\Delta_!$ is called the intersection product. While the construction of $f_*$ on the singular chain complex $C_*(X)$ is easy, one cannot easily represent the preimage of a singular simplex in $Y$ using singular simplices in $X$ and in general there is some technical burden to the construction of $f^!$. Similarly in cohomology, if one thinks of a degree $k$ cohomology class as represented by a subspace of codimension $k$, then one may think of $f^*$ as taking the preimage, while the covariant $f_!$ takes the image along $f$. 
\end{remark}

\begin{definition}
If $(M, \partial M = A\union B)$ and $(N, \partial N = C \union D)$ are as required for Poincaré duality in \cref{thm:poincare_duality} then a map $f\colon M \to N$ with $f(A)\subset C$ and $f(B)\subset D)$ gives rise to a \emphi{relative umkehr map}
\begin{equation}
    \begin{tikzcd}
        H_*(N, C)  \rar["f_!"] & H_{*+m-n}(M, A)  \\
        H^{n-*}(N, D) \uar[swap, "\iso"]\rar["f^*"] & H^{n-*}(M, B) \uar[swap, "\iso"]
    \end{tikzcd}
\end{equation}
where $m=\dim M$ and $n=\dim N$.
\end{definition}

If $M$ is a closed oriented manifold, denote by $\mu_M$ its Poincaré duality pairing:
\begin{align*}
    \mu_M\colon & C^*(M)\otimes C^*(M)\to k \\
    &a\otimes b \mapsto \langle a\cupp b, [M]\rangle
\end{align*}

\begin{proposition}
    The umkehr map $f^!$ of a map $f\colon M\to N$ of closed oriented manifolds is adjoint to $f^*$ with respect to the Poincaré duality pairings in the sense that
    \begin{align*}
        \mu_N\comp (f^!\otimes\id) = \mu_M\comp(\id\otimes f^*)
    \end{align*}
\end{proposition}
\begin{proof}
    This follows from a routine computation using properties of the cap product. 
\end{proof}
There is a similar statement on homology, using the intersection pairing.

\subsection{Intersection Product} \label{subsec:intersection-product-via-pd}

We use field coefficients in this section, so that $H_*(C_*(M)\otimes C_*(M)) \iso H_*(M)\otimes H_*(M)$. %This is just to ease the notation, one may instead work in the derived category, using $C_*(M)\otimes C_*(M)$ in place of $H_*(M)\otimes H_*(M)$ etc.

\begin{definition}\label{def:loop-product-classical}
    Let $M$ be a closed oriented manifold of dimension $n$. 
The intersection product $\cdot\colon H_*(M)\otimes H_*(M)\to H_{*-n}(M)$ is the Poincaré dual of the cup product. This means it is the upper map in the following commutative square, where the vertical maps are given by Poincaré duality and the lower map is the cup product.
\begin{equation}
    \begin{tikzcd}
        H_*(M) \otimes H_*(M)  \rar["\cdot"] & H_{*-n}(M)  \\
        H^{m-*}(M)\otimes H^{m-*}(M) \uar[swap, "\quiso"] \rar["\cupp"] &  H^{2m-*}(M) \uar[swap, "\quiso"]
    \end{tikzcd}
\end{equation}
More abstractly, we can regard it as a map in the derived category $D(Ch(k))$ given as the top map in the diagram
\begin{equation}
    \begin{tikzcd}
        C_*(M) \otimes C_*(M)  \rar["\cdot"] & C_{*-n}(M)  \\
        C^{m-*}(M)\otimes C^{m-*}(M) \uar[swap, "\quiso"]\rar["\cupp"] &  C^{2m-*}(M) \uar[swap, "\quiso"]
    \end{tikzcd}
\end{equation}
\end{definition}
\begin{remark}
Since under the isomorphism $H_*(M\times M) \iso H_*(M)\otimes H_*(M)$, the cup product corresponds to the diagonal map, one can equivalently use the following diagram
\begin{equation}
    \begin{tikzcd}
        H_*(M\times M) \dar["\iso"] \rar["\Delta_!"] & H_{*-n}(M) \dar["\iso"] \\
        H^{2m-*}(M\times M) \rar["\Delta^*"] & H^{2m-*}(M)
    \end{tikzcd}
\end{equation}
where the left vertical morphism is the Poincaré Duality of $M\times M$. Thus up to the isomorphism $H_*(M\times M) \iso H_*(M)\otimes H_*(M)$, the intersection product $\cdot$ is the umkehr map $\Delta_!$.
\end{remark}

For some computation rules involving umkehr maps and the intersection product, we refer to \cite[Prop. 14.1]{bredon2013topology}.
% We state some computational rules for the intersection product, in relation to the cap product $\capp$.
% \begin{proposition}\label{prop:isect-naturality}
%     \begin{enumerate}
%         \item For any $b, c \in H_*(M), \alpha\in H^*(M)$, $(b\cdot c)\capp \alpha = b\cdot (c\capp \alpha)$.
%         \item If $a\in H_i(M)$ and $b\in H_j(M)$,
%         \begin{align*}
%             b\cdot a = b\capp PD^{-1}(a)
%         \end{align*}
%         where $PD^{-1}$ is the inverse of the Poincaré duality map $C^{m-i}(M)\xto{\capp [M]} C_{i}(M)$ on homology.
%         \item Let $f\colon M\to N$ be a smooth map of Poincaré spaces, then the intersection product is natural in the following sense: 
%         \begin{align*}
%             f_*(a) \cdot b = f_*(a \cdot f_!(b)).
%         \end{align*}
%         for $a\in H_*(M), b\in H_*(N)$.
%         \item The intersection product is associative and satisfies $a\cdot b = (-1)^{(n-i)(n-j)}b\cdot a$.
%     \end{enumerate}
%     More abstractly, one can interpret these maps as maps on derived chain complexes, such that similar identities hold. For example, the maps $\cdot$ and $\capp \comp (\id\otimes PD^{-1})\colon C_*(M) \otimes C^{-*}(M) \to C_{*}(M)$ agree. 
% \end{proposition}
% \begin{proof}
%     The first part follows from the identity $(\beta\cupp \gamma) \cupp \alpha = \beta \cupp (\gamma \cupp \alpha)$ on cohomology by mapping $\beta$ and $\gamma$ through the Poincaré duality map. The second part follows from the calculation $b\cdot a = b\cdot [M]\cdot a = b\cdot ([M]\capp \alpha) = (b\cdot [M]) \capp \alpha = b\capp \alpha$. The third part follows from the second part and the naturality property of the cap product. 
% \end{proof}


There is a dual construction on cohomology, which yields a degree $m$ coproduct map $H^{*-n}(M)\to H^*(M)\otimes H^*(M)$, given by 
\begin{equation}
    \begin{tikzcd}
        C^*(M) \dar["\quiso"]\rar["\Delta^!"] & C^*(M)\otimes C^*(M)[m] \dar["\quiso"]\\
        C_{m-*}(M)  \rar["\Delta"] & C_{-*}(M)\otimes C_{-*}(M)[m]
    \end{tikzcd}
\end{equation}


\subsection{Thom Isomorphism}\label{subsec:thom-iso}
We introduce the Thom isomorphism, following \cite{milnor1974characteristic}. 
Let $\xi$ be topological vector bundle $E\xrightarrow{\pi} B$ of rank $n$ and let $E_0$ be $E$ minus the zero section. Denote the fiber by $F = F_b =\pi^{-1}(b)$. %Let $UE\to DE$ be the inclusion of the unit sphere bundle of $E$ into its unit disk bundle, then the pairs of $(UE, DE)$ and $(E_0, E)$ are homotopy equivalent and the space $Th(\xi) = DE / UE$ is called the Thom space of $\xi$. 

\begin{definition}
    We will call a family $\{u_b\in H^n(F_b, F_b\setminus\{0\})\}_{b\in B}$ a \emph{cohomological orientation} of $\xi$ if for every trivialization $E|_U\to U\times \R^n$ and all $b, b'\in U$, the isomorphism $H^n(F_b, F_b\setminus 0) \from H^n(E|_U, E|_U\setminus 0) \to H^n(F_{b'}, F_{b'}\setminus 0)$ maps $u_b$ to $u_{b'}$.
\end{definition}
If coefficients in a ring $R$ are used, this is called a cohomological $R$-orientation. If $\xi$ is oriented, one can assign canonically to every fiber $F=\pi^{-1}(b)$ a cohomology class $u_b = u_F\in H^n(F, F_0)$, such that the assignments are locally compatible. Thus an orientation of $\xi$ induces a cohomological orientation with $\Z$-coefficients. Conversely a cohomological orientation with $\Z$-coefficients induces an orientation of $\xi$. 


\begin{theorem}
    Let $\xi$ be an orientable rank $n$ vector bundle with paracompact base space, with a selected cohomological orientation.
    \begin{enumerate}[(a)]
        \item There exists a unique cohomology class $u=u(\xi)\in H^n(E, E_0)$ such that $u|_F = u_F\in H^n(F, F_0)$. This is called the \emphi{Thom class},  fundamental class or orientation class of $\xi$. 
        \item The following map is an isomorphism
        \begin{align*}
            y \mapsto y\cupp u, \quad H^*(E) \to H^{n+*}(E, E_0)    
        \end{align*}
        \item The following map is an isomorphism
        \begin{align*}
            \eta \mapsto \eta\capp u, \quad H_{*+n}(E, E_0) \to H^{*}(E)
        \end{align*}
    \end{enumerate}
\end{theorem}

\begin{definition}
The \emphi{Thom isomorphism} is one of the following compositions of isomorphisms
\begin{align*}
    \Phi^*\colon H^*(B)\xrightarrow{\pi^*}H^*(E)\xrightarrow{\cupp u}H^{*+n}(E, E_0) \\
    \Phi_*\colon H_{*+n}(E, E_0) \xrightarrow{\capp u} H_*(E)\xrightarrow{\pi_*}H_*(B)
\end{align*}
\end{definition}

\begin{proof}
For a detailed proof of the theorem, see \cite{milnor1974characteristic}. We give a quick sketch of the proof there. One first verifies that the theorem holds for trivial vector bundles, i.e.\ cross products. Using a Mayer-Vietoris argument one then shows that it holds on finite unions of trivialization domains, in particular on compact base spaces. For the general cases, one uses that homology is a colimit indexed by compact spaces.
\end{proof}

We remark that the Thom isomorphism is the umkehr map of the zero section in the following sense. The pair $(E, E_0)$ is homotopy equivalent to the pair $(DE, UE)$, where $DE$ and $UE$ are the unit disk and unit sphere bundle of $E$ with respect to some bundle metric. The Thom isomorphism can thus be seen as a map $H_{*+n}(DE, UE) \to H_*(B)$. If $B$ is a smooth closed manifold and $E$ is an oriented bundle over $B$, then we have a definition of the umkehr map of the zero section $s\colon (B, \emptyset)\to (DE, UE)$ and one can show that this is in fact the Thom isomorphism. The Thom class is Poincaré dual to the zero section $s_*[B]\in H_n(DE, UE)$, cf.~\cite[Lemma 4.1]{hutchings2011cup}. As the Thom isomorphism can be constructed in a more general setting, without the requirement of Poincaré duality, it is widely used to construct umkehr maps. 

% \begin{theorem}\label{thm:thom_class_dual}
%     Let $E\to M$ be a smooth orientable rank $r$ vector bundle over a compact orientable manifold with boundary $\partial M$. Then the Thom class $u=u(E)\in H^r(E, E_0)$ is Poincare dual to the zero section of $E$: After choosing a metric, let $DE$ and $SE$ be the unit ball resp.\ sphere bundles of $E$ and $[DE, SE]\in H^{r+n}(DE, SE)$ the fundamental class, then
%     \begin{align*}
%         [DE, SE] \capp u = s_*[M]\in H_n(DE)
%     \end{align*}
%     where $s_*\colon M\to E$ is the zero section map.
% \end{theorem}
% \begin{proof}[Proof Sketch]
%     In a trivialization domain $U$, one has $E|_U = U \times \R^r$ and the orientation classes are given as follows. The restriction of $u$ to $(E|_U, E_0|_U)$ is the pullback of a class in the fiber direction: $u|_U = \pi_{D^r}^{*}\left(u_{(D^r, S^{r-1})}\right)\in H^*(E|_U, E_0|_U)$, for some $u_{(D^r, S^{r-1})}\in H^*(D^r, S^{r-1})$. The fundamental class $[DE, SE]$ is locally a cross product: at any $p\in U$, one has $[DE, SE]|_{(DE|_U, DE|_{U\setminus\{p\}})} = [M]|_{(U, U\setminus\{p\})} \times [D^r] \in H^*(E|_U, E|_{U\setminus\{p\}} \union E_0|_{U})$. Thus $[DE, SE]|_{(DE|_U, DE|_{U\setminus\{p\}})} \capp u|_U = [M]|_{(U, U\setminus\{p\})}$.
% \end{proof}
% For an alternative proof, this is lemma 4.1 in \cite{hutchings2011cup}. From this we easily conclude that the Thom isomorphism is the umkehr map of the zero section. 


% \begin{corollary} \label{thm:thom_iso_umkehr}
%         If $E\to M$ is as in \cref{thm:thom_class_dual}, then the Thom isomorphism $\Phi_*\colon H_{*+n}(E, E_0) \xrightarrow{\capp u} H_*(E)\xrightarrow{\pi_*}H_*(M)$ is up to sign the umkehr map of the zero section, seen as a map $s\colon (B, \emptyset) \to (DE, SE)$. 
        
%         The composition $H_*(M)\xto{\Phi_*^{-1}} H_{*+n}(DE, SE) \xto{\partial} H_{*+n-1}(SE)$ is up to sign the umkehr map of the projection $p\colon SE\to M$.
% \end{corollary}
% \begin{proof}
%     For the first claim, let $a\in H^*(DE, SE)$, we compute $\pi_*(([DE, SE]\capp a)\capp u) = \pm\pi_*(s_*[M] \capp a) = \pm \pi_*s_*([M]\capp s^*a) = \pm[M] \capp s^* a$. Hence the Thom isomorphism maps the Poincaré dual of $a$ to the Poincaré dual of $s^*(a)$. 

%     The second claim is equivalent to showing that $\partial$ is equal to the composition $p_!\comp s_!\colon H_*(DE, SE) \to H_{*-1}(SE)$. Let $a\in H^*(DE, SE)$, then $p_!s_!([DE, SE]\capp a) = p_!([M] \capp s^*a) = [SE]\capp p^*s^*a$. The composition $s\comp p$ is homotopic to inclusion $(SE, \emptyset)\to (DE, SE)$. On the other hand, a computation of the boundary operator shows $\partial([DE, SE]\capp a) = \partial[DE,SE] \capp a|_{SE}$. 
% \end{proof}


% We conclude the subsection with a quick diversion on the Euler class.

% \begin{definition}\label{def:euler_class}
%     Let $\xi$ be an oriented rank $r$ vector bundle. The \emphi{Euler class} $e(\xi)\in H^r(B)$ of $\xi$ is image of the Thom class $u\in H^r(E, E_0)$ under the composition of maps $H^r(E, E_0)\to H^r(E)\to H^r(B)$.
% \end{definition}
% Equivalently, the Euler class is the class that corresponds to $u\cupp u$ under the Thom isomorphism, since $\phi(e) = p^*(e) \cupp u = j^*(u)\cupp u = u\cupp u$, for $p\colon E\to B$ and $j^*\colon H^*(E, E_0) \to H^*(E)$. 
% \begin{theorem}\label{thm:euler_class}
%     If $M$ is a smooth closed orientable manifold of dimension $n$ and $\xi=TM$ is its tangent bundle, then its Euler characteristic is 
%     \begin{align*}
%         \chi(M) = \langle e(TM), [M]\rangle.
%     \end{align*}
%     if we use coefficients in any characteristic $0$ field.

%     More generally, under the hypotheses of \ref{thm:thom_class_dual}, letting $s\colon B\to E$ be a section, the Euler class is Poincaré dual to the intersection $\pi_*(s_*[B]\cdot s_*[B])\in H^{n-r}(B)$ of two sections in $E$.
% \end{theorem}
% As a consequence of the theorem, the Euler class vanishes if and only if the Euler characteristic vanishes, and this is equivalent to the Thom class $u$ having a preimage wrt.\ the map $H^{r-1}(TM_0) \to H^r(TM, TM_0)$.
% \begin{proof}[Sketch of proof]
% The second part is a computation using the fact that the Thom class is Poincaré dual to the zero section, see \cite[Thm 5.2]{hutchings2011cup}. 

% In \cite{milnor1974characteristic}, the first part is shown using Poincaré duality. We give a quick sketch here. As we recall in \cref{subsec:intersection-via-tubular}, the intersection product can be presented using tubular neighborhoods, and similarly the intersection coproduct $\Delta$ on cohomology. One shows that the Euler class is Poincaré dual to $\capp(\Delta([M]))\in H_n(M)$, i.e.\ the self-intersection of the diagonal in $H_*(M\times M)$. Thus $e(TM) = \cupp(\Delta(1))\in H^n(M)$ using the cup product and the intersection coproduct on cohomology. Since $H^*(M)$ is a Frobenius algebra, its Euler characteristic is $\chi_M = \epsilon(\cupp(\Delta(1))) = \langle e(TM), [M]\rangle$ (see \cref{subsec:poincare-algebra}).

% % Alternatively, in \cite{hutchings2011cup}, the first part is concluded from the second using the Lefschetz fixed point theorem and intersection theory using differential topology.
% \end{proof}


    
% \subsection{Gysin Sequence}\label{subsec:gysin_sequence}
% We follow \cite[pp. 438]{hatcher2002algebraic}. Consider fiber bundles with spherical fiber $S^{r-1}\to E\xrightarrow{p} B$. The Gysin sequence is an exact sequence relating $p_*$ and $p_!$. 

% \begin{theorem}
%     Let $S^{r-1} \to E \xrightarrow{p} B$ be a fiber bundle over a paracompact base space, such that the associated disk bundle is orientable, denote by $e\in H^r(B)$ the Euler class of this disk bundle. The \emphi{Gysin sequence} is the following exact sequence
%     \begin{align*}
%         \dots \to H_{i-r+1}(B) \xto{p_!} H_i(E) \xrightarrow{p_*} H_i(B) \xrightarrow{\capp e} H_{i-r}(B) \to \dots
%     \end{align*}
%     and in cohomology
%     \begin{align*}
%         \dots \to H^{i-r}(B) \xrightarrow{\cupp e} H^i(B) \xrightarrow{p^*} H^i(E) \xto{p^!} H^{i-r+1}(B)\to \dots
%     \end{align*}
%     Here $p^! = \Phi^{-1}\comp\delta$by definition and similarly for $p_!$; this is the umkehr map of $p$ if $E$ and $M$ are closed and oriented.
% \end{theorem}

% \begin{proof}
% We can construct the associated $r$-disk bundle of $E$ as the mapping cylinder $M_p = (([0, 1]\times E) \coprod B) / (0, x) \sim p(x)$. Through the mapping cylinder, the map $p$ is factored into a cofibration $\iota\colon E\to M_p$ and a surjective homotopy equivalence $\tilde p\colon E \injto M_p \surjto B$. We assume that $M_p$ is orientable, so a Thom class $u\in H^r(M_p, E)$ exists. 

% We have the following commutative diagram: 

% \begin{tikzcd}
%     \dots \rar & H^i(M_p, E) \rar["j^*"] & H^i(M_p) \rar["\iota^*"] & H^i(E) \rar["\delta"] & H^{i+1}(M_p, E) \rar  &\dots \\
%     \dots \rar & H^{i-r}(B) \uar[swap, "\Phi"][swap]{\iso}\rar["\cupp e"] & H^i(B)  \uar[swap, "\tilde p^*"][swap]{\iso} \rar["p^*"] & H^i(E) \uar[swap, "\id"]\rar & H^{i-r+1}(B) \uar[swap, "\Phi"][swap]{\iso} \rar  &\dots
% \end{tikzcd}

% Here $\Phi$ is the Thom isomorphism of the disk bundle $M_p\to B$, $e$ is the Euler class of $M_p$ and the vertical $p^*$ is an isomorphism as $M_p$ deformation retracts onto $B$. The square containing the map $\cupp e$ commutes due to the following: since $p^*(e) = j^*(c)$ by the definition of the Euler class, we can compute for $b\in H^{i-r}(B)$ that $j^*\Phi(b) = j^*(p^*(b)\cup u) = p^*(b) \cupp j^*(c) = p^*(b) \cupp p^*(e) = p^*(b\cupp e)$. 

% By \cref{thm:thom_iso_umkehr}, the map $H^i(E)\to H^{i-r+1}(B)$ is the umkehr map $p^!$ of the projection $p\colon E\to B$ if $E$ and $M$ are compact and oriented, and we shall denote it by $p^!$ in general.

% Since the upper sequence is exact, so is the lower sequence. We have shown the exactness of the sequence in cohomology, the sequence in homology is analogous. 
% \end{proof}


% Recall from the remarks after \cref{def:euler_class} that the Euler class is Poincaré dual a certain homology class, namely a class obtained by intersecting two sections in $M_p$, so the map $\capp e$ is the same as taking the intersection product with such a homology class. 



\subsection{Intersection product via Tubular neighborhoods} \label{subsec:intersection-via-tubular}
Recall that the Thom isomorphism can be interpreted as an intersection with the zero section of a vector bundle. The intersection product is equivalent to taking the intersection with the diagonal in $M\times M$. Using tubular neighborhoods, one can express the diagonal as the zero section of a bundle and hence express the intersection product via the Thom isomorphism.

\begin{construction}\label{constr:isect-via-tubular}
Let $N\subset M\times M$ be a tubular neighborhood of the diagonal, so that $N$ is isomorphic to the normal of the tangent bundle of the diagonal $\Delta(M)\subset M\times M$. Note that the normal bundle is isomorphic to the tangent bundle via $(X, Y)\mapsto (X, -Y)$. Denote by $DTM$ the disk bundle of the tangent bundle $TM$ and $DT_0M$ the disk bundle minus the zero section. Similarly, $N_0$ is $N$ minus $M$. Then we have the following sequence of maps
\begin{equation}
\begin{tikzcd}
    H_*(M\times M) \rar & H_*(M\times M, M\times M\setminus \Delta) & \lar[swap, "\iso"] H_*(N, N_0) \dar["\iso"] &\ \\
    & & H_*(DTM, DT_0M) \rar["\pi_*(\cdot \capp u)"] & H_{*-n}(M)
\end{tikzcd}
\end{equation}
The second map is an excision isomorphism and the last map is the Thom isomorphism of the tangent bundle of $M$, i.e.\ the cap product with the Thom class $u=u(TM)$. 
\end{construction}

\begin{theorem}\label{thm:intersection_product_tubular}
    The intersection product $\Delta_!$ as defined in \cref{def:loop-product-classical} is equal to the map defined above
\end{theorem}
\begin{proof}
    \begin{enumerate}
        \item We first show that the intersection product $\Delta_!$ is equal to the following map, which intersects at the diagonal of $M\times M$: 
        \begin{align*}
            H_*(M\times M) \xrightarrow{\capp [\Delta]} H_{*-n}(M\times M) \xrightarrow{p_{1*}} H_{*-n}(M)
        \end{align*}
        The first map intersects with the diagonal, that is the intersection with the diagonal homology class $\Delta_*[M]\in H_n(M\times M)$, where the intersection product is defined via Poincaré Duality. The second map is the projection to the first factor of the product (the following calculation also shows that one could just as well use the second instead).

        By the naturality property of the intersection product, one has for any $a\in H_*(M\times M)$ that
        \begin{align*}
            p_{1*}(a \capp \Delta_*([M])) &= p_{1*}\Delta_*(\Delta^!(a) \capp [M]) \\
            &= p_{1*}\Delta_*(\Delta^!(a)) = \Delta^!(a)
        \end{align*}
        Since $\Delta^!$ is the intersection product, this shows the first claim.

        \item Let $[\Delta] = \Delta_*[M]\in H_n(M\times M)$ be the fundamental class of the diagonal and $[\Delta]^*\in H^n(M\times M)$ its Poincaré dual. On the other hand, let $u\in H^n(DTM, DT_0M)$ be the Thom class of $DTM\to M$ and denote by $u_N\in H^n(N, N_0)$ and $u_{\Delta}\in H^n(M\times M, M\times M\setminus\Delta)$ be its images under the isomorphisms $H^*(DTM, DT_0M) \xto{\quiso} H^*(N, N_0) \xfrom{\quiso} H^*(M\times M, M\times M\setminus\Delta)$. In lemma 4.2 of \cite{hutchings2011cup} it is shown that the image of $u_\Delta$ in $H^n(M\times M)$ is $[\Delta]^*$.

        Hence the intersection product is equal to $p_{1*}(\cdot \capp [\Delta]^*$. 
        \begin{align*}
            H_*(M\times M) \xrightarrow{\capp u^{M\times M}_\Delta} H_{*-n}(M\times M) \xrightarrow{p_{1*}} H_{*-n}(M)
        \end{align*}
            

        \item We now consider the following diagram, which translates the map from part 2 into the map defined via tubular neighborhoods.  Denote by $u_N\in H_m(N, N_0)$ and $u_{\Delta M}\in H_m(M\times M, M\times M\setminus \Delta M)$ the image of $u$ under the chain of maps $H_m(DTM, DT_0M) \iso H_m(N, N_0) \iso H_m(M\times M, M\times M\setminus \Delta M)$.
        
        \begin{center}
        \begin{tikzcd}
            H_*(M\times M) \rar \dar["\capp {[\Delta]}^*"] & H_*(M\times M, M\times M\setminus \Delta) \dar["\capp u_\Delta"] &  \lar[swap, "\iso"] H_*(N, N_0) \dar["\capp u_N"] \rar["\iso"] & \dar["\capp u"] H_*(DTM, DT_0M) \\
            H_{*-n}(M\times M) \rar\dar["p_{1*}"] & H_{*-n}(M\times M) \dar["p_{1*}"] & \lar H_{*-n}(N) \rar \dar["\iso"]& H_{*-n}(DTM) \dar["\iso"]\\
            H_{*-n}(M) \rar["="]& H_{*-n}(M) & \lar[swap, "="] H_{*-n}(M) \rar["="] & H_{*-n}(M) 
        \end{tikzcd}
        \end{center}

        The top squares commute due to the naturality of the cap product. The maps in the bottom squares are all either versions of the diagonal map, identity maps or the projection $H_*(M\times M)\to H_*(M)$, hence commutativity is easy to see. The left vertical maps give the intersection product from step 2 and the composition of the top row and right column give the map defined in \ref{subsec:intersection-via-tubular}.
    \end{enumerate}

\end{proof}

\begin{remark}
    One can perform an analogous construction and argument for the degree $n$ coproduct $\Delta^!$ in cohomology.
\end{remark}
%\paragraph{Definition using Configuration Spaces} This definition is used in 


\subsection{Slant Product}\label{subsec:slant_product}

The slant product on cohomology is a map $$/\colon C^n(Y\times X)\otimes C_i(X)\to C^{n-i}(Y).$$ If $X$ is a space with Poincaré duality and with fundamental class $[X]$, then the map $\blank / [X], C^*(X\times Y)\to C^*(Y)$ is the umkehr map of the projection $X\times Y\to Y$. In a de Rham setting the slant product is given via fiber integration, as is shown in subsection \ref{subsec:fiber-integration}. 


We review formal properties of this operation, following \cite[chapter 6.1]{spanier1989algebraic}, see there for proofs and details. 

\begin{definition}
    The \emph{slant product} on cohomology\index{slant product} is the map
\begin{align*}
    \slant\colon C^n(Y\times X) \otimes C_i(X) \to C^{n-i}(Y)
\end{align*}
which is defined by the relation
$$\langle c^*/c', c\rangle = \langle c^*, c' \times c)\rangle$$
for $c^*\in C^n(Y\times X), c'\in C_i(X), c\in C_{n-i}(Y)$
% \begin{align*}
%     C^n(Y\times X) \otimes C_i(X) \xto{EZ_i\otimes \id} C^{n-i}(Y)\otimes C^{i}(X)\otimes C_i(X) \xto{\id\otimes\varepsilon} C^{n-i}(Y)
% \end{align*}
where $\times\colon C_*(Y)\otimes C_*(X)\to C_*(Y\times X)$ is the Eilenberg Zilber map.
\end{definition}

\begin{proposition}
    The slant product satisfies the following properties:
    \begin{enumerate}
    \item $(c\times c')\slant\alpha = c\langle c', \alpha \rangle$ for $c\in H^*(Y), c'\in H^*(X), \alpha\in H_*(Y)$.
    \item \emph{Boundary relation}: for $c^*\in C^n(Y\times X)$ and $c\in C_i(X)$,
            \begin{align*}
                \delta (c^* / c) = \delta c^* / c + (-1)^{n-i} c^* / \partial c
            \end{align*}

    % \item \emph{Duality Relation}: 
    %     For $z\in C^*(Y\times X), \xi\in C_*(X), \eta\in C_*(Y)$,  $$\langle z\slant\xi, \eta\rangle = \langle z, \xi\times \eta\rangle.$$ 
    \item \emph{Naturality}: 
        Let $f\colon X\to X', g\colon Y\to Y'$ be continuous and $u\in C^n(X'\times Y'), z\in C_q(Y)$, then in $C^{n-q}(X)$, one has $$((f\times g)^*u)/z = f^*(u/g_*(z)).$$
\end{enumerate}
\end{proposition}

There is a relative version 
\begin{align*}
    \slant\colon H^n((Y,B)\times (X, A))\otimes H_i(X, A) \to H^{n-i}(Y, B)
\end{align*}



\begin{remark}
    There is a related operation on homology, also called the slant product, which is a map $$\backslash \colon C^i(X) \otimes C_n(X\times Y) \to C_{n-i}(Y).$$ A reference is \cite[VII.11]{dold2012lectures}.
\end{remark}
% The \emph{slant product on homology}\index{slant product!on homology} is a product operation on homology and cohomology. The slant product relates to the cap product similarly to how the cross product relates to the cup product. Let $X$ and $Y$ be topological spaces. The (cohomological) slant product is an operation 
% \begin{align*}
%     \backslash \colon C^i(X) \otimes C_n(X\times Y) \to C_{n-i}(Y)
% \end{align*}
% Let $\varepsilon \colon C_*(X; R) \otimes C^*(X; R) \to R$ be the standard evaluation map. The slant product is given as 
% \begin{align*}
%     C^i(X) \otimes C_n(X\times Y) \to C^i(X) \otimes C_k(X)\otimes C_{n-k}(Y) \to C_{n-i}(Y)
% \end{align*}
% This yields a map in homology
% \begin{align*}
%     H^i(X)\otimes H_n(X\times Y) \to H_{n-i}(Y)
% \end{align*}

% \begin{remark}
% Equivalently, one can define the slant product using the cap product as the following map
% \begin{align*}
%     C^i(X)\otimes C_n(X\times Y) \xto{p_X^*} C^i(X\times Y) \otimes C_n(X\times Y) \xto{\capp} C_{n-i}(X\times Y) \xto{p_{Y*}} C_{n-i}(Y)
% \end{align*}
% which is analogous to the relation between the cup product and cross product on cohomology $a\times b = p_X^*a \cupp p_Y^* b$. The slant product satisfies analogous properties as the cap product, for example naturality, associativity wrt.\ the cross product, duality ($\langle x\times y, \eta\rangle = \langle x, y\backslash\eta \rangle$). See \cite[VII.11]{dold2012lectures}.
% \end{remark}

% There is a relative version for pairs $(X, A)$ and $(Y, B)$:
% \begin{align*}
%     H^i(X, A)\otimes H_n(X\times Y, A\times Y\union X\times B) \to H_{n-i}(Y, B)
% \end{align*}





\section{Elements of Homological Algebra}

\subsection{Two sided Bar Construction}\label{subsec:bar_construction}
Let $K$ be a field, $A$ be a unital differential graded algebra over $K$, $M$ a right dg $A$-module and $N$ a left dg $A$-module. The chain complex $M\otimes A^{\otimes k}\otimes N$ is a chain complex with the usual tensor product differential 
\begin{align*}
    d_0(m\otimes a_1\otimes \dots\otimes  a_k\otimes  n) = &dm\otimes a_1\otimes \dots\otimes a_k\otimes n+(-1)^{\epsilon_1}m\otimes da_1\otimes \dots\otimes a_k\otimes n\\&+(-1)^{\epsilon_2}m\otimes a_1\otimes da_2\otimes \dots\otimes a_k\otimes n + \dots \\&+ (-1)^{\epsilon_{k+1}}m\otimes a_1\otimes \dots\otimes a_k\otimes dn
\end{align*}
where $\epsilon_l = \abs{m}+\abs{a_1}+\dots+\abs{a_{l-1}}$. The collection of chain complexes $M\otimes A^{\otimes k}\otimes N$ forms a simplicial chain complex, i.e.\ a simplicial object in the category of chain complexes. This means it is an $\N$-indexed collection of chain complexes with so called face maps and degeneracy maps satisfying certain relations, cf.~\cite[VII.5]{mac2013categories}. The face maps are chain maps $d^i_k\colon M\otimes A^{\otimes k}\otimes N\to M\otimes A^{\otimes {k-1}}\otimes N$ 
\begin{align*}
    d^i_k(m, a_1, \dots, a_k, n) = \begin{cases}ma_1\otimes\dots\otimes a_k\otimes n & \text{if}\ i=0\\
    m\otimes \dots\otimes a_ia_{i+1}\otimes \dots\otimes n\\
    m\otimes a_1\otimes\dots\otimes a_k n & \text{if}\ i=k
\end{cases}
\end{align*}
for $i=0,\dots, k$ and the degeneracy maps are chain maps $s^i_k\colon M\otimes A^{\otimes k}\otimes N\to M\otimes A^{\otimes {k+1}}\otimes N$ for $i=0, \dots, k$
\begin{align*}
    s^i_k(m, a_1,\dots, a_k, n) = m\otimes a_1\otimes\dots\otimes a_i\otimes 1\otimes a_{i+1}\otimes\dots\otimes n.
\end{align*}
The face maps combine to a degree $0$ map
\begin{align*}
    d_1&\colon M\otimes A^{\otimes k}\otimes N\to M\otimes A^{\otimes (k-1)}\otimes N, \\
    d_1& = \sum_{i=0}^k (-1)^i d_k^i.
\end{align*} 
Since this is induced by a simplicial object, it follows that $d_1\comp d_1 = 0$ and since the face maps $d_k^i$ are chain maps with respect to $d_0$, the two differentials commute: $d_1 \comp d_0 = d_0\comp d_1$. 
% Equivalently, $d_1$ is the degree $1$ chain map
% \begin{align*}
%     d_1&\colon M\otimes A^{\otimes k}[k]\otimes N\to M\otimes A^{\otimes (k-1)}[k-1]\otimes N, \\
%     d_1& = -\sum_{i=0}^k (-1)^i d_k^i
% \end{align*}
% Here, for any cochain complex $X$, the shifted complex $X[k]$ is the complex with $X[k]^n = X^{n+k}$ and $d^n_{X[k]} = (-1)^k d_X^{n+k}$.

Denote by $\BC(M, A, N)$ the two-sided bar construction, namely 
\begin{align*}
    \BC(M, A, N) = \bigoplus_{n\geq 0} M\otimes A[1]^{\otimes n} \otimes N
\end{align*}
and let $\nBC(M, A, N) = \bigoplus_{n\geq 0} M\otimes \overline {A}[1]^{\otimes n}\otimes N$ be its (simplicial) normalization, where $\overline A = A/\langle 1\rangle$ as a quotient of vector spaces. The normalization is the quotient by the image of the degeneracy maps. 

The bar construction $\BC(M, A, N)$ is the totalization of a double complex and its differential is 
\begin{align*}
    d(m\otimes a_1\otimes \dots\otimes a_k\otimes n) = d_0(m\otimes a_1\otimes \dots\otimes a_k\otimes n) + (-1)^\epsilon d_1(m\otimes a_1\otimes \dots\otimes a_k\otimes n)
\end{align*}
with $\epsilon = \abs{m}+\abs{a_1}+\dots+\abs{a_{k}} + \abs{n} - k$.

% \begin{lemma}\label{lem:bar-normalization}
%     The normalization map $\BC(M, A, N)\to \nBC(M, A, N)$ induces a quasi-isomorphism of chain complexes.
% \end{lemma}
% \begin{proof}
% The normalization map is surjective and it suffices to show that the kernel is acyclic. The kernel is generated by elements of the form $s_i(x)$ where $s_i = s^i_k$ is the degeneracy map as above. By direct computation, $d(s_i(s_i(x))) = s_i d(s_i(x)) + \pm s_i(x)$, thus if $ds_i(x) = 0$, then $s_i(x)$ is a boundary.
% \end{proof}

\begin{theorem}\label{thm:bar_resolution}
    \begin{enumerate}[(a)]
        \item The following sequence 
    \begin{align*}
        M \xfrom{d_1} M\otimes A\xfrom{d_1} M\otimes A^{\otimes 2} \xfrom{d_1} \dots
    \end{align*}
    is split exact, hence a resolution of $M$ by free $A$-modules. 

    \item The canonical map $\BC(M, A, A)\to M$ given by the product map $M\otimes A\to M$ for $n=0$ and $0$ otherwise, is a quasi-isomorphism of chain complexes. 
\end{enumerate}
\end{theorem}
\begin{proof}
    (a): Consider the map $b=s^i_{p-1}\colon M\otimes A^{\otimes p}\to M\otimes A^{\otimes (p+1)}$ which maps $m\otimes a_1\otimes\dots\otimes a_p\mapsto m\otimes a_1\otimes\dots\otimes a_n\otimes 1$. Then $d_1 b + b d_1 = \id_{M\otimes A^{\otimes p}}$. Hence the sequence above is indeed exact. 

    \item We denote by $\Tot$ the total complex of a double complex. The total complex $\Tot(M\from M\otimes A\from M\otimes A^{\otimes 2}\from \dots)$ is acyclic: Let $a\in M\otimes A^{\otimes n}$ such that $da = 0$, then $dba = dba + bda = a + d_0 ba + bd_0 a$ hence in homology $[a]=-[(bd_0+d_0b)a] = \pm[(bd_0+d_0b)^n a]\in H^*(\Tot(M\from M\otimes A\from M\otimes A^{\otimes 2}\from \dots))$. But $b$ commutes with $d_0$, hence for $n\geq 2$ this vanishes. 
  
    There exists a short exact sequence of chain complexes
    \begin{align*}
        0\to A\to \Tot(M\from M\otimes A\from \dots) \to \Tot(0 \from M\otimes A \from\dots) \to 0
    \end{align*}
    Since the middle complex is acyclic, in the associated long exact sequence there is an isomorphism $H^{*-1}(\Tot(0\from M\otimes A \from \dots))\iso H^*(M)$, and this is induced by the map $M\otimes A\to M$ on chains.
\end{proof}

% \begin{definition}\label{def:shuffle-product}
% If $A$ is graded commutative, then $\BC(A, A, A)$ is a graded commutative dg algebra with the \emphi{shuffle product}. This is defined as

% \begin{align*}
%     a(a_1|\dots|a_n)a' \shuffle b(a_{n+1}|\dots|a_{n+m})b' = \sum_{\sigma\in\mathrm{Sh}(n, m)} (-1)^{\epsilon}ab(a_{\sigma(1)}|\dots |a_{\sigma(n+m)})a'b'
% \end{align*}
% where $\epsilon$ is the Koszul sign arising by permuting the factors on the left hand side into the order on the right hand side, we stress that the middle factors $a_i\in A[1]$ have their degree shifted. 
% \end{definition}

% For example,
% \begin{align*}
%     a(a_1)a' \shuffle b(a_2)b' = (-1)^{\abs{a'}\abs{b}+\abs{a'}(\abs{a_2}-1) + \abs{b}(\abs{a_1}-1)}\left(ab(a_1|a_2)a'b' + (-1)^{(\abs{a_1}-1)(\abs{a_2}-1)}ab(a_2|a_1)a'b'\right)
% \end{align*}

% There is also a deconcatenation coproduct on $\BC(A, A, A)$, this is a map $\BC(A, A, A)\to \BC(A, A, A)\otimes_A \BC(A, A, A)$. This can be defined as 
% $$\alpha = \alpha(\alpha_1|\dots|\alpha_n)\alpha' \mapsto \sum_i\alpha(\alpha_1|\dots|\alpha_i) 1 (\alpha_{i+1}|\dots|\alpha_n)\alpha'$$
% This comultiplication has a counit given by the multiplication map $\varepsilon \colon \BC(A, A, A)\to A$. 

% This equips $\BC(A, A, A)$ with the structure of a Hopf algebra over $A$ if $A$ is commutative and unital.

% \begin{theorem}
%     Let $f\colon A\to A'$ be a morphism in $CDGA_K^{\geq 0}$ (K a field). If $f$ is a quasi-isomorphism, then the induced morphism $f_*\colon \BC(A, A, A)\to \BC(A', A', A')$ is a quasi-isomorphism.
% \end{theorem}
% \begin{proof}
%     We first show that $f$ induces a quasi-isomorphism $A^{\otimes p} \to A'^{\otimes p}$. This follows from the following lemma: 
%     \begin{lemma} If $f\colon A\to A'$ is a quasi-isomorphism of chain complexes of $K$-vector spaces, then for any chain complex $B$, the map $f\otimes \id\colon A\otimes B\to A'\otimes B$ is a quasi-isomorphism. 
%     \end{lemma}
%     \begin{proof}
%         Since we are working with field coefficients, $B$ is a direct sum of complexes of the form $\dots\to0\to K\to 0\to\dots$ and $\dots\to 0\to K\xto{\sim} K\to 0\to\dots$. For any such complex the claim is easy to check. Since homology and direct sum commute, a direct sum of quasi-isomorphisms is again a quasi-isomorphism.
%     \end{proof}
%     Define a filtration on the bar construction via $F^p\BC(A, A, A) = \bigoplus_{n\leq p} A\otimes A^n\otimes A$. Each $F^p\BC(A, A, A)$ is a chain complex and there is an exact sequence of chain complexes
%     \begin{align*}
%         0\to F^p\BC(A, A, A)\to F^{p+1}(A, A, A) \to A^{\otimes(p+3)} \to 0
%     \end{align*}
%     Using induction and the five lemma, we can show that for all $p$, the map $F^p\BC(A, A, A)\to F^p\BC(A', A', A')$ is a quasi-isomorphism. Finally, $\BC(A, A, A)=\colim_{p\in \N} F^p\BC(A, A, A)$ as a colimit of chain complexes, and the map $\BC(A, A, A)\to \BC(A', A', A')$ is a filtered colimit of quasi-isomorphisms. Any filtered colimit of quasi-isomorphisms is again a quasi-isomorphism, as one can check using the explicit construction of filtered colimits. 
    
%     For a more explicit argument, we show injectivity explicitly. Let $a\in \BC(A, A, A)$ such that $d(a) = 0$ and $f_*(a)=d(b')\in \BC(A', A', A')$ is a boundary. Then $b'\in F^p\BC(A', A', A')$ for some $p$, so $a$ is a boundary in $F^p\BC(A', A', A')$ and since $f_*\colon F^p\BC(A, A, A)\to F^p\BC(A', A', A')$ is a quasi-isomorphism, there exists $b\in F^p\BC(A, A, A)$ such that $db = a$ (even though not necessarily $f_*b = b'$). Thus $f_*$ induces an injective map on homology. Surjectivity is similar. 
% \end{proof}


Let $M, N, M', N'$ be $A$-modules and consider morphisms of $A$-modules $M\to M'$ and $N\to N'$, then there is a morphism of chain complexes $\BC(M, A, N)\to \BC(M', A, N')$. Recall that we use coefficients in a field.

Similarly we may change the differential graded algebra $A$. Let $A'\to A$ be a morphism of differential graded algebras. This makes the $A$-modules $M$ and $N$ into left resp.\ right $A'$-modules and we can take the bar construction $\BC(M, A', N)$, moreover there is a natural chain map $\BC(M, A', N)\to \BC(M, A, N)$.

\begin{theorem} \label{thm:bar-quiso} Assume that $A$, $A'$, $M$, $M'$, $N$, $N'$ are bounded below chain complexes.
    \begin{enumerate}
    \item If the maps $M\to M'$ and $N\to N'$ are quasi-isomorphisms, then the induced map $\BC(M, A, N)\to \BC(M', A, N')$ is a quasi-isomorphism.
    \item If the map $A'\to A$ is a quasi-isomorphism, then so is the map $\BC(M, A', N)\to \BC(M, A, N)$. 
    \end{enumerate}
\end{theorem}
The proof relies on the following lemma:
\begin{lemma} If $f\colon C\to C'$ is a quasi-isomorphism of chain complexes of $K$-vector spaces, then for any bounded below chain complex $B$, the map $f\otimes \id\colon C\otimes B\to C'\otimes B$ is a quasi-isomorphism. 
\end{lemma}
\begin{proof}
    Since we are working with field coefficients, $B$ is a direct sum of complexes of the form $\dots\to0\to K\to 0\to\dots$ and $\dots\to 0\to K\xto{\sim} K\to 0\to\dots$. For any such complex the claim is easy to check. Since homology and direct sum commute, a direct sum of quasi-isomorphisms is again a quasi-isomorphism.
\end{proof}
\begin{proof}[Proof of \cref{thm:bar-quiso}]
    \begin{enumerate}
        \item By the lemma, the induced maps $$M\otimes A^{\otimes p}\otimes N \to M'\otimes A'^{\otimes p}\otimes N'$$ are quasi-isomorphisms. 

Define a filtration on the bar construction via $F^p\BC(M, A, N) = \bigoplus_{n\leq p} M\otimes A^n\otimes N$. Each $F^p\BC(M, A, N)$ is a chain complex and there is an exact sequence of chain complexes
\begin{align*}
    0\to F^p\BC(M, A, N)\to F^{p+1}(M, A, N) \to M\otimes A^{\otimes(p+1)}\otimes N \to 0
\end{align*}
Using induction and the five lemma, we can show that for all $p$, the map $F^p\BC(M, A, N)\to F^p\BC(M', A, N')$ is a quasi-isomorphism. Finally, $$\BC(M, A, N)=\colim_{p\in \N} F^p\BC(M, A, N)$$ as a colimit of chain complexes, and the map $\BC(M, A, N)\to \BC(M', A, N')$ is a filtered colimit of quasi-isomorphisms. Any filtered colimit of quasi-isomorphisms is again a quasi-isomorphism, as one can check using the explicit construction of filtered colimits. 

% For a more explicit argument, we show injectivity explicitly. Let $f\colon \BC(M, A, N)\to \BC(M', A, N')$. Let $a\in \BC(M, A, N)$ such that $d(a) = 0$ and $f(a)=d(b')\in \BC(M', A', N')$ is a boundary. Then $b'\in F^p\BC(M', A', N')$ for some $p$, so $a$ is a boundary in $F^p\BC(M', A', N')$ and since the map $f\colon F^p\BC(M, A, N)\to F^p\BC(M', A', N')$ is a quasi-isomorphism, there exists $b\in F^p\BC(M, A, N)$ such that $db = a$ (even though not necessarily $f(b) = b'$). Thus $f$ induces an injective map on homology. Surjectivity is similar. 
\item As in (1), the maps $M\otimes A'^{\otimes p}\otimes N\to M\otimes A^{\otimes p}\otimes N$ are quasi-isomorphisms and we proceed as in the proof of (1). 
\end{enumerate}
\end{proof}


% \begin{theorem}
%     Given a degreewise surjective map $p \colon C\to D$ and a map $ f\colon \BC(A, A, A)\to D$ of $A^{\otimes 2} = A\otimes A^{op}$-modules, there exists a lift $\tilde f\colon \BC(A, A, A) \to C$ such that $\tilde f\comp p = f$. That is, $\BC(A, A, A)$ is cofibrant in the projective model category of dg $A^{\otimes 2}$-modules.
% \end{theorem}
% \begin{proof}
%     The complex $A\otimes A\from A^{\otimes 3}\from \dots$ is split exact (as seen above) and a complex of projective (free) $A\otimes A^{op}$ modules 
% \end{proof}


\subsection{The Model Category of DG-$A$-modules} \label{subsec:model-dg-mod}
Before discussing the bar construction as a derived tensor product, we recall the model structure on the category of DG $A$-modules. See \cite{barthel2013six} for details. References for general model categories are \cite{hovey2007model} and \cite{hirschhorn2003model}. A reader who is unfamiliar with model categories may choose to skip this section and only skim the theorems of \cref{subsec:bar-constr-derived}, taking the notion of cofibrant $A$-module as a black box. 

First recall the model structure on the category of chain complexes over a field: 
\begin{theorem}
    There is a model structure on the category $Ch(K)$ of chain complexes of modules over a field, such that
    \begin{itemize}
        \item the weak equivalences are quasi-isomorphisms
        \item the cofibrations are degreewise monomorphisms
        \item the fibrations are degreewise epimorphisms.
    \end{itemize}
\end{theorem}
See e.g.~\cite{barthel2013six}. We warn that if $K$ is not a field, the situation is more complicated. 

Let $A$ be a unital not necessarily commutative dg-algebra over a field $K$ and $\Mod(A)$ the category of dg-modules over $A$. 

There is an adjunction between the category $Ch_R$ of chain complexes over a ring $R$ and the category $\Mod(A)$ of differential graded modules over a differential graded algebra $A$ over $R$:
\begin{align}
    F\colon Ch_R\rightleftarrows \Mod(A) \colon U \label{eq:adj-ch-mod-A}
\end{align}
where the left adjoint $F$ is the extension of scalars functor $X\to A\otimes_R X$ and the right adjoint is the forgetful functor, forgetting the action of $A$. One can transfer the model category structure of $Ch_R$ to $\Mod(A)$ by taking weak equivalences and fibrations those maps whose images under $U$ have the same property.

% \begin{definition}
%     An adjunction between model categories is called a Quillen adjunction, if the left adjoint preserves cofibrations and acyclic cofibrations and the right adjoint preserves fibrations and acyclic cofibrations. 
% \end{definition}

The following is part of theorem 3.3 in \cite{barthel2013six}.
\begin{theorem}
    The category $\Mod(A)$ is a model category, where
    \begin{itemize}
        \item the fibrations are the degreewise surjective maps
        \item the weak equivalences are the quasi-isomorphisms
    \end{itemize}
    In the adjunction \ref{eq:adj-ch-mod-A}, the functor $F$ preserves cofibrations and acyclic cofibrations and the functor $U$ preserves fibrations and acyclic fibrations.
\end{theorem} 

Recall that an object $X$ in a model category is cofibrant if the map $0\to X$ is a cofibration. 
\begin{theorem}[\cite{barthel2013six}, 9.12]\label{thm:dg-module-cofibrant-cokernel}
    A map $W\to Y$ of DG $A$-modules is a cofibration if and only if it is a monomorphism with cofibrant cokernel. 
\end{theorem}


\subsection{The Bar Construction and the Derived Tensor Product}\label{subsec:bar-constr-derived}
Let $A$ be a unital, not necessarily commutative DG algebra over a field $k$.
\begin{definition}
The \emph{tensor product} $M\otimes_A N$ of a left $A$-module $M$ and a right $A$-module $N$ over $A$ is the chain complex defined as the colimit of diagram $$M\otimes A\otimes N\rightrightarrows M\otimes N$$
where the arrows take $m\otimes a\otimes n$ to $ma\otimes n$ and to $m\otimes an$ respectively. Thus it is the quotient of $M\otimes N$ by the image of the difference map. 
\end{definition}
This yields a functor 
$$\otimes_A \colon \Mod(A)^{op}\times \Mod(A)\to Ch(K).$$

This functor does not preserve quasi-isomorphisms in general, but it does preserve quasi-isomorphisms between cofibrant objects by \cref{thm:tensor-product-quasi-iso}. On the other hand, the bar construction $\BC(M, A, N)$ preserves quasi-isomorphisms by \cref{thm:bar-quiso} and we will show that in \cref{cor:bar-construction-is-derived-tensor-product} that it is quasi-isomorphic to $M \otimes_A N$ if $M$ or $N$ are cofibrant. In the language of derived functors, by \cref{thm:tensor-product-quasi-iso} there exists a derived functor $D(\Mod(A)^{op})\times D(\Mod(A))\to D(Ch(K))$ of $\otimes_A$ and by \cref{cor:bar-construction-is-derived-tensor-product} this is constructed by the bar construction, thus we write $M\otimes_A^L N\defeq \BC(M, A, N)$. 

\begin{theorem}\label{thm:tensor-product-quasi-iso}
    If $P\to P'$ is a quasi-isomorphism between cofibrant left $A$-modules, then the induced map
    $$M\otimes_A P\to M\otimes_A P'$$
    is a quasi-isomorphism of chain complexes. Similarly if $P\to P'$ is a quasi-isomorphism between right right $A$-modules, then the induced map $P'\otimes_A M\to P\otimes_A M$ is a cofibration. 
\end{theorem}
We refer for instance to \cite[3.2]{hinich1997homological}. 

\begin{lemma}\label{lem:bar-cofibrant}
    The bar construction $\BC(A, A, A)$ is cofibrant as a dg $A^e$-module. The bar construction $\BC(A, A, M)$ is a cofibrant dg $A$-module.
\end{lemma}
\begin{proof}
    Consider again the resolution
    \begin{align*}
        A \xfrom{d_1} A^{\otimes 2} \xfrom{d_1} A^{\otimes 3} \xfrom{d_1} \dots
    \end{align*}
    Each $A^{\otimes n}$ for $n\geq 2$ is cofibrant: recall that the functor $\blank\otimes A^e\colon Ch(K)\to \Mod(A^e)$ preserves cofibrations since the model structure on $\Mod(A^e)$ is transferred from $Ch(K)$. $A^{\otimes n}$ is isomorphic to $A^e \otimes A^{n-2}$ and in $Ch(K)$ every complex is cofibrant since $K$ is a field. Similarly, each $A^{\otimes n}\otimes M$ is a cofibrant dg $A$-module.

    We conclude with \cref{prop:cofibrant-resolution-dga-mod}. 
\end{proof}

\begin{theorem}\label{prop:cofibrant-resolution-dga-mod}
    Let $A$ be a differential graded algebra over a field, and let $$M_1\xfrom{d_1} M_2\xfrom{d_1}\dots$$ be an exact sequence of cofibrant DG $A$-modules. Then the total complex $$\mathrm{Tot}(M)=\Tot(M_1\xfrom{d_1} M_2\xfrom{d_1} \dots)$$ is cofibrant.
    % \begin{center}
    %     \begin{tikzcd}
    %         M_1 \rar["f"]\dar & D\dar[twoheadrightarrow] \\
    %         T \rar \ar[ur, dotted,"\tilde f"] & E 
    %     \end{tikzcd}
    % \end{center}
\end{theorem}

\begin{proof}
    Let $F^p\mathrm{Tot}(M) = \Tot(M_1\from\dots\from M_p)$. Since each $M_p$ is cofibrant, the inclusions $F^{p-1}\mathrm{Tot}(M) \to F^p\mathrm{Tot}(M)$ are cofibrations (\ref{thm:dg-module-cofibrant-cokernel}). Hence by induction each $F^p\mathrm{Tot}(M)$ is cofibrant. Thus the colimit $\mathrm{Tot}(M)$ is also cofibrant. 
\end{proof}


\begin{corollary}\label{cor:bar-construction-is-derived-tensor-product}
    If $P$ is cofibrant, then the map $$\BC(M, A, P)\to M\otimes_A P$$
    is a quasi-isomorphism. 
\end{corollary}
\begin{proof}
    $\BC(M, A, P) = M\otimes_A \BC(A, A, P)$ and the map $\BC(A, A, P)\to P$ is a quasi-isomorphism between cofibrant left $A$-modules. We conclude with \cref{thm:tensor-product-quasi-iso}. 
\end{proof}


% \begin{theorem}\label{thm:bar-resolution-sullivan}
%     If $A\to P = A\otimes \Lambda V$ is a relative Sullivan algebra, then the map $\BC(M, A, P) \to M\otimes_A P$ is a quasi-isomorphism.
% \end{theorem}
% \begin{proof}
%     We begin by defining a map $b$ as in \ref{thm:bar_resolution}. The map $$\bar b \colon M\otimes (A\otimes \Lambda V) \to M\otimes (A\otimes \Lambda V),\quad m\otimes (a\otimes v)\mapsto (ma)\otimes (1\otimes v)$$ lifts to a map $b\colon M\otimes_A P\to M\otimes P$. It commutes with $d_0$ and $\id_{M\otimes_A P} = d_1 b$. Similarly, let 
%     \begin{align*}
%         b\colon M\otimes A^{\otimes k} \otimes (A\otimes \Lambda V)&\to M\otimes A^{\otimes (k+1)} \to (A\otimes \Lambda V), \\
%         m\otimes a \otimes (a'\otimes v) &\mapsto m\otimes a \otimes a' \otimes (1\otimes v)
%     \end{align*}
%     Then $b d_1 + d_1 b = \id$ and $b$ commutes with $d_0$. We then proceed as in the proof of part (a) of \ref{thm:bar_resolution}. 
% \end{proof}
% \begin{remark}
%     The same proof applies more generally, for any left dg-$A$-module $P$ which admits a map $P\to A\otimes P$ which is a right inverse of the multiplication map and a map of left dg-$A$-modules.
% \end{remark}

% There is a canonical map $\BC(M, A, P)\to M\otimes_A P$ which is induced by the mapping the summand $M\otimes P$ of the bar construction to $M\otimes_A P$ and the remaining summands to $0$. 
% \begin{theorem}\label{thm:bar-resolution-sullivan-1}
%     If $P$ is a cofibrant dg-$A$-module, then the map $\BC(M, A, P)\to M\otimes_A P$ is a quasi-isomorphism. 
% \end{theorem}
% We conclude this from a more general statement. For this, given a commutative square of chain complexes
% \[
%     \begin{tikzcd}
%         M \dar["g"] \rar["f"] & N\dar["g'"] \\
%         M' \rar["f'"] & N'
%     \end{tikzcd}
% \]
% the totalization $\Tot(M, N, M', N')$ of this diagram is the chain complex which is given as a graded module by 
% $$\Tot(M, N, M', N') = M[-2]\oplus N[-1]\oplus M'[-1]\oplus N'$$ with differential given by 
% $$(m, n, m', n') \mapsto (d_M m, -d_N n + f(m), -d_{M'} m' + g(m), d_{N'} n' + f'(m') + g'(n')))$$
% This is a double mapping cone in the following sense: the diagram induces a map between the mapping cones $\cone(f)\to \cone(f')$ and by construction, $\Tot(M, N, M', N') = \cone(\cone(f)\to \cone(f'))$ and similarly for the vertical maps. 

% In our context, a map $p\colon P'\to P$ of $A$-modules induces a diagram 
% \[\begin{tikzcd}\label{diag:bar-relative-tensor-comparison}
%     \BC(M, A, P') \dar \rar & \BC(M, A, P)\dar \\
%     M\otimes_A P' \rar & M\otimes_A P
% \end{tikzcd}\]
% We denote the total complex by $T(p) = \Tot(\BC(M, A, P'), \BC(M, A, P), M\otimes_A P',  M\otimes_A P)$.

% \begin{theorem}\label{thm:bar-construction-totalization}
%     If the map $P'\to P$ is a cofibration in the projective model category of $A$-modules, then the total complex of the above diagram is acyclic.
% \end{theorem}
% \begin{proof}[Proof of \cref{thm:bar-resolution-sullivan-1}]
% $P$ is cofibrant if $0\to P$ is a cofibration. The total complex in this case is $\cone(\BC(M, A, P) \to M\otimes_A P)$. This being acyclic means that the map $\BC(M, A, P)\to M\otimes_A P$ is a cofibration as claimed.
% \end{proof}

% \begin{proof}[Proof of \cref{thm:bar-construction-totalization}]
%         Let $J$ be the collection of maps $P'\to P$ such that the totalization of Diagram \ref{diag:bar-relative-tensor-comparison} is acyclic.
%         \begin{enumerate}
%             \item We begin by showing that $J$ contains the generating cofibrations. Define the map of chain complexes $i_n\colon S^{n-1}\to D^n$ as the following map: 
        
%     \begin{center}
%         \begin{tikzcd}[sep=10pt]
%             S^{n-1} \ar[d, "{ i_n }"] \ar[r, phantom, ":"] &\big[\; \cdots & \ar[l] 0  \ar[d] & \ar[l] 0  \ar[d] & \ar[l] 0  \ar[d] & \ar[l] K  \ar[d, "{\mathrm{id}}"] & \ar[l] 0  \ar[d] & \ar[l] \cdots \;\big] \\
%             D^n \ar[r, phantom, ":"] & \big[\; \cdots & \ar[l] 0  & \ar[l] 0 & \ar[l] \underset{ \mathclap{ \raisebox{-3pt}{ \scalebox{.7}{ $\mathrm{deg} = n$ } } } }{ K } &  \ar[l, "{ \mathrm{id} }"]K & 0 \ar[l] & \cdots \ar[l] \;\big] 
%         \end{tikzcd}
%     \end{center}
%     The generating cofibrations of the projective model category of dg $A$-modules are the images of this under the functor $A\otimes \blank$ by \cref{thm:proj}.  Reference here. 
%     There are isomorphisms of chain complexes $M\otimes_A A\otimes S^{n-1} = M\otimes S^{n-1}$, $M\otimes_A A\otimes D^n = M\otimes D^n$ and also $\BC(M, A, A\otimes S^{n-1}) = \BC(M, A, A)\otimes S^{n-1}$ and $\BC(M, A, A\otimes D^n) = \BC(M, A, A)\otimes D^n$. Under these isomorphisms, the left vertical map in Diagram \ref{diag:bar-relative-tensor-comparison} is the map $\BC(M, A, A)\otimes S^{n-1}\to M\otimes S^{n-1}$. The map $\BC(M, A, A)\to M$ is a quasi-isomorphism, hence the vertical mapping cone is acyclic. Similarly the right mapping cone is acyclic and hence the double mapping cone $T(p)$ is acyclic. 
%     \item We show that $J$ is closed with respect to retracts. Recall that $p\colon P'\to P$ is a retract of $s\colon S'\to S$ if there is a commutative diagram as follows: 
%     \[\begin{tikzcd}
%         P'\dar \rar["i"] & S'\dar \rar["r"] & P'\dar \\
%         P\rar["j"] & S \rar["t"] & P
%     \end{tikzcd}\]
%     such that $ri = \id_{P'}$ and $tj = \id_P$. We are to show that if $p$ is a retract of $s$ then $s\in J$ implies $p\in J$. There is a commutative diagram of mapping cones
%     \[\begin{tikzcd}
%         \cone(\BC(M, A, P') \to M\otimes_A P')\dar["i_*"] \rar["p_*"] & \cone(\BC(M, A, P)\to M\otimes_A P)\dar["j_*"] \\
%         \cone(\BC(M, A, S')\dar["r_*"] \to M\otimes_A S') \rar["s_*"] & \cone(\BC(M, A, S)\to M\otimes_A S)\dar["t_*"] \\
%         \cone(\BC(M, A, P') \to M\otimes_A P') \rar["p_*"] & \cone(\BC(M, A, P)\to M\otimes_A P) \\
%     \end{tikzcd}\]
%     where e.g.\ $p_*$ is the map between mapping cones that is induced by $p$ as in Diagram \ref{diag:bar-relative-tensor-comparison} and similar for $i_*, j_*$ etc.
%     Thus the maps $i$ and $j$ induce a map $T(p)\to T(s)$ and similarly $r$ and $t$ induce a map $T(s)\to T(p)$. These maps compose to the identity since $ri=\id$ and $tj=\id$. Thus since $T(s)$ is acyclic, so is $T(p)$.
%     \item We show that $J$ is closed with respect to pushouts. Thus consider a pushout  diagram of $A$-modules
%     \[\begin{tikzcd}
%         S'\dar["f"] \rar["p"] & S\dar \\
%         P' \rar & P=P'\oplus_{S'} S
%     \end{tikzcd}\]
%     $P=P'\oplus_{S'} S$ is the quotient of $P'\oplus S$ by $p(s') = f(s')$. Assume that the map $s\colon S'\to S$ is in $J$, we need to show that the map $p\colon P'\to P$ is in $J$. 
% \end{enumerate}
% \end{proof}






\section{Homotopy Pushouts of Topological Spaces}\label{sec:homotopy-pushouts-spaces}

Consider the diagram of topological spaces $X \xfrom{f} A \xto{g} Y$. The pushout $X\coprod_A Y$ of such a diagram is in general poorly behaved with respect to homotopy: in a diagram as follows, where the vertical maps are homotopy equivalences

\begin{center}
    \begin{tikzcd}
    X \dar& \lar[swap, "f"] \dar A \rar["g"] & Y\dar \\
    X' & \lar[swap, "f'"] A' \rar["g'"] & Y'
    \end{tikzcd}
\end{center}
the map of pushouts $X\coprod_A Y \to X'\coprod_{A'} Y'$ is not neccessarily a homotopy equivalence. 

\begin{example} 
    Let $*$ be the one point space, $S^n$ the $n$-dimensional sphere and $D^n$ the $n$-dimensional disk. Compare the diagram $*\from S^{n-1}\to D^n$, with pushout $S^n$ and the homotopy equivalent diagram $*\from S^{n-1}\to *$, whose pushout is $*$, thus the pushouts are not homotopy equivalent. 
\end{example}

The homotopy pushout is a version of the pushout which is homotopy invariant. In contrast to the pushout of topological spaces, a universal property for the homotopy pushout is difficult to formulate, at least in the language of categories. We present two approaches, following \cite[1.2]{may2011more}. The first is via a direct construction, called the double mapping cylinder, which is a standard construction of the homotopy pushout. One may then define when a diagram is a homotopy pushout diagram by comparing to the double mapping cylinder. 

A second approach is to identify certain diagrams that are ``general enough'', so that the normal pushout is also a homotopy pushout. 

\subsection{The Standard Homotopy Pushout}
\begin{definition}
    Let $X\xleftarrow{f}W\xrightarrow{g}Y$ be given. The \emph{double mapping cylinder} of $f, g$ is the quotient space
    \begin{align*}
        M(f, g) = \frac{X\coprod(W\times I)\coprod Y}{f(w)\sim (w,0)\quad (w, 1)\sim g(w)}
    \end{align*}
    There are obvious inclusion maps $i_X\colon X\to M(f, g), i_Y\colon Y\to M(f, g)$. There is a canonical homotopy $\psi=\psi_{f, g}\colon i_Xf\simeq i_Yg$ given by $\psi_t(w) = (w, t)$ for $w\in W, t\in I$. 
    \begin{equation}
        \begin{tikzcd}[column sep=.2cm, row sep=.2cm]
            W \arrow[rr,"g"]\arrow[dd,"f"] && Y \arrow[dd, "i_Y"] \\
            & \xRightarrow{\psi} & \\
            X \arrow[rr, "i_X"] && M(f, g)
        \end{tikzcd}
    \end{equation}
    We will call this square the \emph{standard homotopy pushout} of $f$ and $g$.
\end{definition}

\begin{remark}
Suppose we are given another square with homotopy
\begin{equation}\label{diag:square_with_homotopy}
    \begin{tikzcd}[column sep=.2cm, row sep=.2cm]
        W \arrow[rr,"g"]\arrow[dd,"f"] && Y \arrow[dd, "k"] \\
        & \xRightarrow{F} & \\
        X \arrow[rr, "h"] && Z
    \end{tikzcd}
\end{equation}
then we get a comparison map 
\begin{align*}
    &\theta_F\colon M(f,g)\to Z \\
    &\theta_F(x) \defeq h(x), \quad \theta_F(y) \defeq k(y), \quad \theta_F(w, t) \defeq F(w, t)
\end{align*}
for $x\in X, Y\in Y, (w, t)\in W\times I$. This fits into a diagram
\begin{equation}
    \begin{tikzcd}
    W \ar[r, "g"] \ar[d, "f"]  &  Y \ar[d, "i_Y"] \ar[ddr, bend left, "k"]  & \\
    X \ar[r, "i_X"] \ar[drr, bend right, "h"]  &  M(f, g) \ar[dr, "\theta_F"]  &  \\
    &  &  Z
\end{tikzcd}
\end{equation}
and we have the following equations
\begin{align*}
    \theta_F \psi = F, \quad \theta_F i_X = h, \quad \theta_F i_Y = k
\end{align*}
Note that the first equation is an equation of homotopies and is not pictured in the diagram. 
\end{remark}

\begin{definition}
    The Diagram \ref{diag:square_with_homotopy} is called a \emph{homotopy pushout diagram} if the natural map $\theta_F$ is a homotopy equivalence. In this case we will call $Z$ a homotopy pushout of the diagram $X\xfrom f W \xto g Y$.
\end{definition}

% \begin{definition}
%     A \emphi{homotopy pushout} of topological spaces $X\xleftarrow{f}W\xrightarrow{g}Y$ is a square with homotopy 
%     \begin{equation}
%         \begin{tikzcd}[column sep=.2cm, row sep=.2cm]
%             W \arrow[rr,"g"]\arrow[dd,"f"] && Y \arrow[dd, "k'"] \\
%             & \xRightarrow{F'} & \\
%             X \arrow[rr, "h'"] && Z'
%         \end{tikzcd}
%     \end{equation}
%     such that for any other square with homotopy as in \ref{diag:square_with_homotopy}, there exists is a map $\theta_F\colon Z'\to Z$ such that $ \theta_F F' = F, \quad \theta_F h' = h, \quad \theta_F k' = k$, moreover the subspace of $\theta_F$ satisfying these equations in $\Hom(W\times I, Z)$ is contractible.
% \end{definition}

% \begin{remark}
% If one unwraps the standard definition of pushouts of $(\infty, 1)$-categories in the $(\infty, 1)$-category of topological spaces, one obtains a slightly different universal property, notably the equations are required to hold only up to homotopy. The version of the definition given above is slightly friendlier for explicit computation. In the following we show that our definition is computed by the standard homotopy pushout and that it is homotopy invariant, which shows that it is the right notion. 
% \end{remark}

% \begin{theorem}
%     \begin{enumerate}
%     \item 
%     \item Any two homotopy pushouts over $X\xleftarrow{f}W\xrightarrow{g}Y$ are canonically homotopy equivalent.
%     \item In particular, a square with homotopy as in \ref{diag:square_with_homotopy} is a homotopy pushout if and only if the natural map $\theta_F\colon F\to Z$ is a homotopy equivalence. 
%     \end{enumerate}
% \end{theorem}


\subsection{Cofibrations of Topological Spaces}
We quickly recall cofibrations here. For a more in-depth introduction we refer to \cite[Ch. 6]{may2011more}. 

Let $I=[0,1]$ and $Y^I$ be the space of continuous maps $I\to Y$. Let  $ev_0\colon Y^I\to Y$ be the evaluation map $\gamma\mapsto \gamma(0)$.
\begin{definition}
    A map $i\colon A\to X$ is a \emphi{cofibration} if for all commutative squares of the form 
    \begin{equation}
        \begin{tikzcd}
            A \dar["i"] \rar["h"] & Y^I\dar["ev_0"] \\
            X \rar["f"] \ar[ur, dashed, "\tilde h"] & Y 
        \end{tikzcd}
    \end{equation}
    there exists an $\tilde h$ which makes the two triangles commute.
\end{definition}
Cofibrations of topological spaces are the quintessential example of cofibrations in the framework of model categories and as such satisfy all the formal properties known from model categories, which we will not recall here. References for general model categories are \cite{hovey2007model} and \cite{hirschhorn2003model}. 

We give a criterion for recognizing cofibrations of topological spaces, taken from \cite[Ch. 6.4]{may2011more}.
\begin{definition}
    Let $A\subset X$ be a subspace of a space $X$. 
        The pair $(X, A)$ is called a \emphi{neighborhood deformation retract pair} (NDR pair) if there is a map $u\colon X\to I$ such that $u^{-1}(0) = A$ and a homotopy $h\colon X\times I\to X$ such that $h_0 =\id, h(a, t) = a$ for $a\in A, t\in I$ and $h(x, 1)\in A$ if $u(x)<1$.
        % \item The pair $(X, A)$ is called a \emphi{deformation retract pair} (DR pair) if it is an NDR pair such that additionally $u(x) < 1$ for all $x\in X$.
        % \item The pair $(X, A)$ is called a deformation retract if the inclusion $A\to X$ has a left inverse.
\end{definition}
\begin{theorem}\label{thm:cofibration-criterion}
    Let $A\subset X$ be a closed subspace of $X$. The inclusion $i\colon A\injto X$ is a cofibration if and only if $(X, A)$ is an NDR-pair.
\end{theorem}
For example, using tubular neighborhoods and the above theorem one can show that any embedding of a smooth submanifold is a cofibration. 

\subsection{Homotopy Pushouts and Cofibrations}

The following theorem shows that homotopy pushouts can be computed using cofibrations. 
\begin{theorem}\label{thm:homotopy-pushout-properties}
    Consider a diagram as follows, where all the vertical maps are homotopy-equivalences.
    \begin{center}
        \begin{tikzcd}
        X \dar& \lar[swap, "f"] \dar W \rar["g"] & Y\dar \\
        X' & \lar[swap, "f'"] W' \rar["g'"] & Y'
        \end{tikzcd}
    \end{center}
    \begin{enumerate}
    \item Assume that in the diagram 
    both $f$ and $f'$ are cofibrations. Then the induced map of their pushouts (as topological spaces) $X\coprod_A Y \to X'\coprod_{W'} Y'$ is a homotopy equivalence.
    \item If $f$ is a cofibration, then the natural map $M(f,g)\to X\coprod_W Y$ is a homotopy equivalence. 
    \item The double mapping cones $M(f, g)$ and $M(f', g')$ are homotopy equivalent through the induced map.
    \end{enumerate}
\end{theorem}
Part (2) shows that the homotopy pushout can be computed by the homotopy pushout if one of the maps is a cofibration. Part (3) shows that the homotopy pushout is homotopy invariant.
\begin{proof}
This is 2.1.3 and 2.1.4 in \cite{may2011more}. For the first part, see there. In the more general context of model categories, a model category is called proper if (1) holds. 

For (2), factor $f\colon W\to X$ into $W\to M(f)\to X$, where $M(f)$ is the mapping cylinder: $M(f) = (([0,1]\times W)\coprod X) / (0, w)\sim f(w)$. The map $W\to M(f)$ is a cofibration and the map $M(f)\to X$ is a homotopy equivalence. Now $M(f, g)$ is the pushout of the cofibration $W\to M(f)$ and the map $W\to Y$ and we conclude the second part. 

For (3), as before, $M(f, g)$ is the pushout of the cofibration $W\to M(f)$ and the map $W\to Y$. Similarly $M(f', g')$ is the pushout of the cofibration $W'\to M(f')$ and the map $W'\to Y'$. Hence by (1), the induced map $M(f, g)\to M(f', g')$ is a homotopy equivalence. 
\end{proof}
A dual version of the theorem holds for homotopy pullbacks with fibrations instead of cofibrations.



\begin{definition}
    The homotopy pushout of a map $f\colon A\to B$ together with the canonical map $A\to *$ where $*$ is the one point space is called the \emph{homotopy cofiber} of $f$ and denoted $\cofib(f)$. 
\end{definition}
By the preceding theorem, if $f$ is a cofibration, then the cofiber is homotopy equivalent to the quotient $B/A$.

By the construction of the standard homotopy pushout, the homotopy cofiber of $f\colon A\to B$ is constructed by the \emph{mapping cone} $\cone(f) = B\coprod (A\times I) / \sim$, where the equivalence relation $\sim$ is generated by $f(a) \sim (a, 0)$ and $(a, 1)\sim (a', 1)$. 



\begin{theorem}[Pasting Lemma]\label{thm:pasting-lemma}
    \begin{enumerate}
    \item Given a diagram of two commutative squares, if the right square is a (homotopy) pullback, then the total square is a (homotopy) pullback if and only if the left square is a (homotopy) pullback. Similarly if the left square is a (homotopy) pushout, then the total square is a (homotopy) pushout if and only if the right square is a (homotopy) pushout.
\begin{equation}\label{diag:pushout-morphism}
    \begin{tikzcd}
        A \dar\rar & B \dar\rar &\dar C \\
        D \rar & E \rar & F
    \end{tikzcd}
\end{equation}
    \item For any homotopy pushout diagram, there is a homotopy equivalence between the homotopy cofibers of the vertical maps (and similarly of the horizontal maps).
\end{enumerate}
\end{theorem}
\begin{proof}
    \begin{enumerate}
        \item The statement on regular (non-homotopy) pullbacks and pushouts holds in any category, see e.g.\ \cite[p. 72, ex. 8]{mac2013categories}.
            
            In case all the vertical maps are cofibrations, the homotopy pushout is just the normal pushout by \cref{thm:homotopy-pushout-properties}. In the general case, one may factor any map as a cofibration followed by a homotopy equivalence, using the mapping cylinder, hence one may replace Diagram \ref{diag:pushout-morphism} by a homotopy equivalent diagram in which the vertical maps are cofibrations. 
        \item For the homotopy equivalence of cofibers, consider the diagram
        \begin{equation}
            \begin{tikzcd}
                A \dar\rar & B \dar\rar &\dar * \\
                D \rar & E \rar & F
            \end{tikzcd}
        \end{equation}
        Assume that the left square is a homotopy pushout, then by (1), the right square is a homotopy pushout if and only if the total square is a homotopy pushout. By definition, this means that $F$ is a homotopy cofiber of the map $B\to E$ if and only if it is a homotopy cofiber of the map $A\to D$. 
    \end{enumerate}
\end{proof}

We recall the relation between cofibers of spaces and cofibers (mapping cones) of chain complexes. 
\begin{definition}
The \emph{mapping cone} $\cone(\phi)$ of a chain map $\phi\colon C\to D$ is the complex which, as a graded module is given by $C[-1]\oplus D$ with differential $$(c, d)\mapsto (-\partial_C c, \phi(c) + \partial_D d).$$ 
\end{definition}
The reduced homology $H_*(X)$ of a space $X$ is the homology of the augmented complex $\tilde C_*(X)$, which is the complex $\dots\to C_2(X)\xto{\partial} C_1(X)\xto{\partial} C_0(X)\xto{\epsilon} \Z$ where the augmentation $\epsilon$ is given by mapping every point to $1$. 


\begin{proposition}\label{prop:relative-homology-cofiber}
    For any continuous map $f\colon A\to B$, the chain complexes $\tilde C_*(\cofib(f))$ and the mapping cone $\cone(C_*(A)\xto{f_*} C_*(B))$ are quasi-isomorphic. More precisely, there is a sequence of quasi-isomorphisms 
    \[
        \cone(C_*(A)\xto{f} C_*(B)) \xto{\quiso} C_*(\cofib(f), \{\omega\}) \xfrom{\quiso} \tilde C_*(\cofib(f))
        \]
    where $\omega\in \cone(f)$ is the point represented by any $(a, 1)$ for $a\in A$.
    
    In particular, for an inclusion $\iota \colon A\subset B$, the complexes $\tilde C_*(\cofib(\iota))$ and $C_*(B, A)$ are quasi-isomorphic. 
\end{proposition}
\begin{proof}
    It is easy to see that the map $\tilde C_*(\cone(f)) \xto{\quiso} C_*(\cone(f), \{\omega\}) $ is a quasi-isomorphism. 

    Let $E, F\subset \cone(f)$ be the open subsets corresponding to $A\times [0, \frac 23)$ resp.\ $A\times (\frac 13, 1]$. Then $F$ is homotopy equivalent to the end point $\omega\in \cone(f)$ which is represented by any element of $A\times\{1\}\subset A\times I$. The space $E$ is homotopy equivalent to $B$ and $E\isect F$ is homotopy equivalent to $A$. Taking the Mayer-Vietoris of $\cone(f) = E\cup F$ relative to $\{\omega\}\subset \cone(f)$ yields an exact sequence
    \begin{align*}
        \dots\to H_{*+1}(\cone(f), \{\omega\}) \to H_*(A)\to H_*(B) \to H_*(\cone(f), \{\omega\})\to\dots
    \end{align*}
    
    On the other hand for the mapping cone of chain complexes $\cone(f_*) = \cone(C_*(A)\to C_*(B))$ there is a long exact sequence 
    \begin{align*}
        \dots\to H_{*+1}(\cone(f_*)) \to H_*(A)\to H_*(B) \to H_*(\cone(f_*))\to\dots
    \end{align*}
    We define a map of chain complexes $\cone(f_*)\to C_*(\cone(f), \{\omega\})$ as follows. Recall that as graded modules, $\cone(f_*) = C_*(B)\oplus C_*(A)[-1]$. On the $C_*(B)$ summand we use the map $B\to \cone(f)$. On the $C_*(A)[-1]$ summand we use the map $C_{*-1}(A)\to C_{*}(A\times I), \alpha\mapsto\alpha\times[I]$. This yields a chain map and by the five lemma it is a quasi-isomorphism. 

    Finally, for an inclusion $A\subset B$ there is a chain map $\cone(C_*(A)\to C_*(B))\to C_*(B, A)$, given by mapping $(a, b)\mapsto b$. Using the long exact sequences for both, one concludes that this is a quasi-isomorphism. 
\end{proof}
\begin{remark}
    An analogue of the theorem holds for cohomology. The analogue of the mapping cone in cohomology is the mapping cocone: Given a map of cochain complexes $\phi\colon C\to D$ this is $\cocone(\phi) = \cone(\phi) = C\times D[1]$ with differential $(c, d)\mapsto (\delta_C c, \phi(c) + \delta_D d)$. For an inclusion $A\subset X$, the natural map $C^*(X, A)\to\cone(C^*(X)\to C^*(A))$ is given by $c\mapsto (c|_X, 0)$, where $c|_X$ is the image of $c\in C^*(X, A)$ under the map $C^*(X, A)\to C^*(X)$.
\end{remark}

We will require two more results on homotopy pushouts. We caution that the following two theorems do not hold in general model categories, even though they appear like formal results. 
The following theorem states essentially that the homotopy pullback of a homotopy pushout diagram is still a homotopy pushout diagram. 
\begin{theorem}[Mather's Cube Theorem]\label{thm:mather-cube}
    Given a cube shaped commutative diagram, such that the bottom face is a homotopy pushout and the side faces are homotopy pullbacks, then the top face is a homotopy pushout.
\end{theorem}
This is a theorem from \cite{mather1976pull}. See also \cite{Strom2011ModernCH}

The following theorem states that the pullback of a cofibration along a fibration is again a cofibration.
\begin{theorem}
    Given a pullback diagram of topological spaces 
    \begin{equation}
        \begin{tikzcd}
            E_A \dar["q"] \rar["j"] & E \dar["p"] \\
            A \rar["i"] & B
        \end{tikzcd}
    \end{equation}
    where $i$ is a cofibration and $p$ is a fibration, then $j$ is a cofibration. 
\end{theorem}
This is \cite[14.1]{Strom2011ModernCH}.


% \subsection{Homotopy Pushouts in Model Categories}
% We follow \cite[A.2.4]{lurie2009higher}. 
% Let $\cat M$ be a model category.

% Consider diagrams in $\cat M$ of the form $X \xfrom{f} A \xto{g} Y$. The pushout $X\coprod_A Y$ of such a diagram is in general poorly behaved in the sense that a map of such diagrams 

% \begin{center}
%     \begin{tikzcd}
%     X \dar& \lar[swap, "f"] \dar A \rar["g"] & Y\dar \\
%     X' & \lar[swap, "f'"] A' \rar["g'"] & Y'
%     \end{tikzcd}
% \end{center}

% need not induce a weak equivalence $X\coprod_A Y \to X'\coprod_{A'} Y'$ even if the vertical maps individually are weak equivalences. To correct this, it is convenient to introduce the left derived functor of the pushout. 
% \begin{definition}
%     \begin{enumerate}[(1)]
%     \item A diagram 
%     $$X \xfrom{f} A \xto{g} Y$$
%     is called cofibrant if $A$ is cofibrant and $f$ and $g$ are cofibrations (and hence $X$ and $Y$ are also cofibrant). 
%     \item A \emphi{cofibrant replacement} of $X \xfrom{f} A \xto{g} Y$ is a diagram of the form 
%     \begin{center}
%         \begin{tikzcd}
%         X' \dar& \lar[swap, "f'"] \dar A' \rar["g'"] & Y'\dar \\
%         X & \lar[swap, "f"] A \rar["g"] & Y
%         \end{tikzcd}
%     \end{center}
%     where the upper row is cofibrant and the vertical arrows are weak equivalences.

%     \item The \emphi{homotopy pushout} of the diagram 
%     $$X \xfrom{f} A \xto{g} Y$$
%     is defined to be the pushout $X'\coprod_{A'} Y'$ where we have chosen a cofibrant replacement of $X \xfrom{f} A \xto{g} Y$.
%     \item More generally, a diagram
%     \begin{center}
%         \begin{tikzcd}
%             A \dar \rar & X \dar \\
%             Y \rar & M
%         \end{tikzcd}
%     \end{center}
%     is called a homotopy pushout square if the composite $X'\coprod_{A'} Y' \to X\coprod_A Y\to M$ is a weak equivalence for some cofibrant replacement.
% \end{enumerate}
% \end{definition}

% We write $X\coprod^h_A Y$ for a homotopy pushout $M$ as in (4).
% One can show that a cofibrant replacement as required in (2) always exists and that the pushout depends on the choice of diagram only up to weak equivalence. Similarly one can show that the condition in (3) is independent of the choice of cofibrant replacement.

% In practice, one can use weaker conditions than in the definition of the cofibrant replacement:

% \begin{theorem}\label{thm:homotopy_pushout_sufficient}
%     Consider a pushout diagram in $\cat M$
    
%     \begin{center}
%         \begin{tikzcd}
%             A \dar["i"] \rar["j"] & X \dar \\
%             Y \rar & M
%         \end{tikzcd}
%     \end{center}

%     This diagram is also a homotopy pushout if either of the following conditions is satisfied:
%     \begin{enumerate}
%         \item The objects $Y$ and $A$ are cofibrant and $j$ is a cofibration.
%         \item The map $j$ is a cofibration and $\cat M$ is left proper.
%     \end{enumerate}
% \end{theorem}

% We recall basic facts of left and right proper model categories in the following subsection. Most of the model categories we work with are proper. 

% \begin{remark}
% The theory of homotopy pullbacks is completely analogous, where one uses fibrant replacements instead of cofibrant replacements. 
% \end{remark}

% \begin{remark}
%     There is a more general theory for homotopy limits and colimits of diagrams indexed by a more general category $I$. For this, one attempts to equip the functor category $\cat M^I$ with the structure of a model category and define derived functors between model categories. The homotopy colimit functor is then the derived functor of the functor $\colim \cat M^I\to \cat M$ and it can again be computed via cofibrant replacement in the model category $\cat M^I$. 
%     In the presentation above, the definitions have been unwrapped for the special case $I=*\from *\to *$.
% \end{remark}

% \subsection{Left and right proper model categories}
% We are interested in left and right proper model categories due to \ref{thm:homotopy_pushout_sufficient}. We state results from \cite[15.4]{may2011more}.

% \begin{definition}
%     A model category $\cat M$ is left proper if the pushout of a weak equivalence along a cofibration is a weak equivalence. $\cat M$ is right proper if the pullback of a weak equivalence along a fibration is again a weak equivalence. $\cat M$ is proper if it is both left and right proper.
% \end{definition}

% \begin{proposition}
%     If every object of $\cat M$ is cofibrant then $\cat M$ is left proper. If every object of $\cat M$ is fibrant then $\cat M$ is right proper.
% \end{proposition}

% \begin{theorem}
%     $\cat M$ is left proper if and only if the left gluing lemma holds: For any diagram as below, if $f$ and $f'$ are cofibrations and the vertical maps are weak equivalences, then the induced map of pushouts $X\coprod_A Y\to X'\coprod_{A'} Y'$ is a weak equivalence.

%     \begin{center}
%         \begin{tikzcd}
%         X \dar& \lar[swap, "f"] \dar A \rar["g"] & Y\dar \\
%         X' & \lar[swap, "f'"] A' \rar["g'"] & Y
%         \end{tikzcd}
%     \end{center}


%     $\cat M$ is right proper if and only if the right gluing lemma holds, which is stated dually.
% \end{theorem}

% \subsection{Derived Functors}
% Let $\cat M$ be a model category, $\cat C$ a category and $\phi\colon\cat M\to\cat C$ a functor. 
% \begin{definition}\label{def:left_derived}
%     A \emph{left derived} functor of $\phi$ is a functor $\mathds L\phi \colon \Ho\cat M\to \cat C$ together with a natural transformation $\varepsilon\colon\mathds L \phi  \comp \gamma\nto \phi \colon \cat M\to \cat C$ such that the pair $(\mathds L, \phi)$ is universal wrt.\ such pairs, in the sense that for any other pair $(G, \zeta)$ where $G\colon \Ho\cat M\to\cat C$ is a functor and $\zeta\colon G\gamma \to \phi$ is a natural transformation, there exists a unique natural transformation $\theta\colon G\nto \mathds L \phi\colon \cat M\to \cat C$ such that $\zeta = \varepsilon(\theta\comp\gamma)$. 
    
%     A \emph{right derived} functor $\mathds R\phi$ of $\phi$ is defined dually in the sense that now $\varepsilon$ is a natural transformation $\phi\nto\mathds \phi\comp\gamma\colon \cat M\to \cat C$.
% \end{definition}

% \begin{definition}
%     Let $\cat M$ be a model category. A cofibrant approximation of an object $X$ in $\cat M$ is a weak equivalence $\tilde X\to X$ such that $\tilde X$ is cofibrant.
%     A cofibrant approximation of a morphism $f\colon X\to Y$ in $\cat M$ is a morphism $\tilde g\colon \tilde X\to\tilde Y$ where $i_X\colon \tilde X\to X$ is a cofibrant approximation of $X$, $i_Y\colon \tilde Y\to Y$ is a cofibrant approximation of $Y$ and $i_Y\tilde g = gi_X$.
% \end{definition}

% \begin{theorem}
%     If $\phi$ takes trivial cofibrations between cofibrant objects in $\cat M$ to isomorphisms in $\cat C$ then the left derived functor $\mathds L\phi$ exists. Moreover, for any cofibrant object of $\cat M$, the natural map $\mathds L \phi X \to FX$ is an isomorphism.
% \end{theorem}

% Consider the situation where $\cat M$ and $\cat N$ are model categories and $\phi\colon \cat M \to \cat N$ is a functor.
% \begin{definition}\label{def:total_left_derived}
%     A \emph{total left derived functor} of $\phi$ is a left derived functor of the composition $\cat M\to\cat N\to\Ho\cat N$. Thus a total left derived functor is a functor $\cat L\phi\colon \Ho\cat M\to\Ho\cat N$ together with a natural transformation $\varepsilon\colon\mathds L \phi\comp \gamma_{\cat M}\nto \gamma_{\cat N} \comp \phi\colon \Ho \cat M\to \cat N$, such that the pair $(\mathds L, \varepsilon)$ is universal as in \ref{def:left_derived}.
% \end{definition}
% \begin{theorem}
%     If $\phi$ takes trivial cofibrations between cofibrant objects in $\cat M$ to weak equivalences in $\cat N$, then the total left derived functor $\mathds L\phi\colon\Ho \cat M\to\cat N$ exists. 
% \end{theorem}


% \subsection{Homotopical Categories}

% To define a homotopy colimit functor, one would like to equip the category $\cat M^I$ with a model structure, for any model category $\cat M$ and an arbitrary category $I$. This is not possible in general, though it is possible for example by adding the requirement that $\cat M$ is a combinatorial model category or that $I$ is a Reedy category. The notion of homotopical category is weaker than model categories, but it allows a theory of derived functors. We follow \cite[2.1 and 2.2]{riehl_2014}.

% \begin{definition}
%     A homotopical category $\cat M$ is a category with a distinguished set $\cat W$ of maps (called \emph{weak equivalences}) such that 
%     \begin{enumerate}
%         \item $\cat W$ contains all the identity maps in $\cat M$
%         \item $\cat W$ has the two out of six property that, for any three composable maps $r, s, t$ in $\cat M$, for which the compositions $sr$ and $ts$ exist and are in $\cat W$, the four maps $r, s, t$ and $tsr$ are also in $\cat W$
%     \end{enumerate}
% \end{definition}
% \begin{remark}
% The definition implies that \begin{enumerate}\item $\cat W$ contains all isomorphisms in $\cat M$ and that \item $\cat W$ has the two out of three property: for any composable maps $r$ and $s$ in $\cat M$, if any of the two morphisms $r$, $s$ and $sr$ is in $\cat W$, then so is the third.
% \end{enumerate}
% \end{remark}
% \begin{remark}
% Any model category gives rise to a homotopical category with the same weak equivalences. Any category has the structure of a homotopical category by taking only the isomorphisms as the weak equivalences. If no other homotopical category structure is canonically available, we use this. 
% \end{remark}

% \begin{definition}
% Given two homotopical categories $\cat M, \cat N$:
% \begin{enumerate}
%     \item A functor $\cat M\to\cat N$ is called \emph{homotopical} if it preserves weak equivalences
%     \item A natural transformation between two functors $\cat M\to \cat N$ is called a \emph{natural weak equivalence} if each morphism is a weak equivalence in $\cat N$
%     \item Two functors $\cat M\to \cat N$ are called \emph{naturally weakly equivalent} if they can be connected by a zigzag of natural weak equivalences.
%     \item A homotopical functor $f\colon\cat M\to \cat N$ is called a homotopical equivalence of homotopical categories if there exists a homotopical functor $f'\colon\cat N\to\cat M$ such that the compositions $ff'$ and $f'f$ are naturally weakly equivalent to the identity functors $\id_{\cat M}$ resp.\ $\id_{\cat N}$.
% \end{enumerate}
% \end{definition}

% \begin{definition}
%     The homotopy category $\Ho\cat M$ is the formal localization of $\cat M$ at the weak equivalences $\cat W$. Hence it is a category $\Ho\cat M$ together with a functor $\gamma_{\cat M}\colon \cat M\to \Ho \cat M$ which maps the weak equivalences to isomorphisms, such that for any other functor $F\colon\cat M\to \cat D$ which maps weak equivalences to isomorphisms, there exists a unique functor $\bar F\colon \Ho\cat M\to \cat D$ such that $ \bar F \gamma_{\cat M} = F$. 
% \end{definition}
% \begin{theorem}
%     The homotopy category of a homotopical category can be constructed as follows: The objects are the same as the objects of $\cat M$, the hom-set $\Ho\cat M(X, Y)$ consists of equivalence classes of zigzags in $\cat M$ from $X$ to $Y$ in which backwards maps are weak equivalences, by the weakest equivalence relation which makes the following identifications
%     \begin{enumerate}[(i)]
%         \item identity maps can be omitted
%         \item adjacent maps can be replaced by their composition
%         \item two adjacent maps which are identical but going in opposite directions may be omitted.
%     \end{enumerate}
% \end{theorem}

% \begin{remark}
%     One can often find a description of the localization where the zigzags of arbitrary length can be replaced by zigzags of fixed length. For a commutative square 

%     \begin{center}
%         \begin{tikzcd}
%             X \dar\rar &Y \dar\\
%             Z \rar & W
%         \end{tikzcd}
%     \end{center}

%     where the vertical maps are weak equivalences, one can replace $Z \to Y\from Y$ with $Z\from W\to X$ inside a zigzag. Thus if one can always find such squares then one can iteratively shorten any zigzag. An example of this is 3-arrow calculus \cite[Section 36]{dwyer2004homotopy}. 
% \end{remark}

% \subsection{Derived Functors of homotopical categories}

% \begin{definition}
%     A \emph{total left derived functor} $\mathbf LF$ of a functor $F\colon\cat M\to\cat N$ between homotopical categories $\cat M$ and $\cat N$ is a right Kan extension $\Ran_{\gamma_{\cat M}}\gamma_{\cat N} F$
    
%     \begin{center}
%         \begin{tikzcd}
%             \cat M\dar["\gamma_{\cat M}"] \rar["F"] \drar[phantom, "\nto"] &\cat N \dar["\gamma_{\cat N}"]\\
%             \Ho\cat M\rar["\mathbf LF"] & \Ho\cat N
%         \end{tikzcd}
%     \end{center}

%     This means the left derived functor is a pair $(\mathbf LF, \epsilon)$ of a functor $\mathbf LF \colon\Ho \cat M\to \Ho\cat N$ and a natural transformation $\epsilon\colon \mathbf LF\gamma_{\cat M}\nto \gamma_{\cat N} F\colon \cat M\to \Ho\cat N$, such for any other pair $(G, \phi)$ of a functor $G\colon \cat M\to\Ho\cat N$ and $\phi\colon G\gamma_{\cat M} \nto \gamma_{\cat N} F \colon \cat M\to \Ho\cat N$, there exists a unique natural transformation $\theta\colon G\nto\mathbf LF$ such that $\phi = \epsilon(\theta\comp\gamma_{\cat M})$.
% \end{definition}

% By the universal property of $\Ho\cat M$, the left derived functor $\mathbf LF$ is equivalently a homotopical functor $\cat M\to \Ho \cat N$, which is often called the left derived functor of $F$. Here this terminology is reserved for a lift of $\mathbf LF$ along $\gamma_{\cat N}$.

% \begin{definition}
%     A \emph{left derived functor} of $F\colon\cat M\to\cat N$ is a homotopical functor $\mathds LF\colon \cat M\to\cat N$ equipped with a natural transformation $\lambda\colon \mathds LF\nto F$ such that $(\gamma_{\cat N} \mathbf LM, \gamma_{\cat N} \lambda)$ is a total left derived functor of $F$ (where $\gamma_{\cat N}\lambda\colon\gamma_{\cat N}\mathds LF\nto \gamma_{\cat N} F$). 
% \end{definition}

% \subsection{Derived Functors via Deformations}

% \begin{definition} A \emph{left deformation} of a homotopical category $\cat M$ is a pair $(Q, q)$ of a homotopical functor $Q\colon \cat M\to \cat M$ and a natural weak equivalence $q\colon Q\to \id_{\cat M}$. 
    
% A \emph{left deformation} of a functor $\cat M\to \cat N$ of homotopical categories consists of a left deformation $(Q, q)$ for $\cat M$ together with a category $\cat M_Q$ which is a full subcategory of $\cat M$ containing the image of $Q$, such that $F$ is homotopical on $M_Q$. $M_Q$ is called the category of cofibrant objects. If $F$ admits a left deformation, we say that $F$ is \emph{left deformable}.
% \end{definition}

% \begin{lemma}[Ken Brown's Lemma]
%     Let $\cat M$ and $\cat N$ be model categories. Then any left Quillen functor $F\colon \cat M\to \cat N$ (i.e.\ a left adjoint functor that preserves cofibrations and trivial cofibrations) preserves weak equivalences between cofibrant objects.
% \end{lemma}
% This means that if $\cat M$ admits a functorial cofibrant replacement, then $F$ is left deformable with respect to the subcategory of cofibrant objects of $\cat M$.

% \begin{theorem}
%     If $F\colon \cat M\to\cat N$ has a left deformation $q\colon Q\nto \id$, then $\mathds LF = FQ$ is a left derived functor of $F$.
% \end{theorem}


% \begin{theorem}
%     Let $F\colon \cat M\to\cat N$ and $G\colon \cat N\to\cat P$ be functors of homotopical categories with specified left deformations $(Q, q)$ and $(Q', q')$ and subcategories of cofibrant objects $\cat M_{Q}$, $\cat N_{Q'}$, such that $F$ restricts to a homotopical functor $\cat M_F\to\cat N_G$. Then there are natural weak equivalences
% \begin{align*}
%     \mathds LG \mathds LF = GQ' FQ \xnto{Gq'} GFQ = \mathds L(GF)\qquad \mathds L\id_{\cat M} = Q \xnto{q} \id_{\cat M}
% \end{align*}
% that descend to natural isomorphisms $\mathbf LG \mathbf LF\iso\mathbf L(GF)$ and $\mathbf L \id_{\cat M} \iso \id_{\Ho\cat M}$. 
% \end{theorem}

% \subsection{Cofibrantly generated model categories and the projective model structure}
% We follow \cite[Chapter 11]{hirschhorn2003model}.
% A cofibrantly generated model category is a category that has two sets of cofibrations and trivial cofibrations that satisfy two conditions: they are in some sense small, and they generate all cofibrations resp. trivial cofibrations via lifting properties. 

% Cofibrantly generated model categories allow the construction of the projective model structure on the functor category $\cat M^{\cat C}$. We require a model structure on this functor category to consider homotopy colimits. 

% Recall that the fibrations in a model category $\cat M$ are the maps with the right lifting property with respect to all trivial cofibrations. Similarly the trivial fibrations are the maps with the right lifting property with respect to all cofibrations. The weak equivalences are the maps that can be written as compositions of a trivial cofibration and a trivial fibration. Hence for example the cofibrations and trivial cofibrations entirely determine the model category. 

% \begin{definition}
%      If $\cat M$ is a category and $I$ is a set of maps in $\cat C$, then we say that \emph{$I$ permits the small object argument} if the domains of the elements of $I$ are small relative\footnote{We do not define this notion of smallness here, see \cite[Def. 10.4.1 and 10.5.8]{hirschhorn2003model}.} to $I$. 
% \end{definition}
% \begin{definition}
%     Let $\cat C$ be a category and $I$ a set of maps in $\cat C$.
%     \begin{enumerate}
%         \item The category of \emph{$I$-injectives} is the subcategory of maps that have the right lifting property with respect to every element of $I$.
%         \item The subcategory of \emph{$I$-cofibrations} is the subcategory of maps that have the left lifting property with respect to every $I$-injective. 
%         \item If $\cat C$ is closed under small colimits and $I$ is a set of maps in $\cat C$, then a \emph{relative $I$-cell complex} is a map in $\cat C$ that can be constructed as a transfinite composition \footnote{We do not define transfinite composition here, see \cite[10.2.1]{hirschhorn2003model}.} of pushouts of elements of $I$.
%     \end{enumerate}
% \end{definition}
% Every relative $I$-cell complex is an $I$-cofibration. 
% \begin{theorem}
%     If $\cat C$ is a cocomplete category and $I$ is a set of maps in $\cat C$ that permits the small object argument, then there is a functorial factorization of every map in $\cat C$ into a relative $I$-cell complex followed by an $I$-injective map.
% \end{theorem}
% \begin{definition}[{\cite[11.1.2]{hirschhorn2003model}}]
%     A \emph{cofibrantly generated model category} is a model category $\cat M$ such that 
%     \begin{enumerate}
%         \item there exists a set $I$ of maps (called a set of \emph{generating cofibrations}) that permits the small object argument and such that a map is a trivial fibration if and only if it has the right lifting property with respect to every element of $I$ and
%         \item there exists a set $J$ of maps (called a set of \emph{generating trivial cofibrations}) that permits the small object argument and such that a map is a fibration if and only if it has the right lifting property with respect to every element of $J$.
%     \end{enumerate}
% \end{definition}

% \begin{theorem}[{\cite[11.2.1]{hirschhorn2003model}}]
%     Let $\cat M$ be a cofibrantly generated model category with generating cofibrations $I$ and generating trivial cofibrations $J$.
%     \begin{enumerate}
%         \item The class of cofibrations of $\cat M$ equals the class of retracts of relative $I$-cell complexes which equals the class of $I$-cofibrations.
%         \item The class of trivial fibrations equals the class of $I$-injectives.
%         \item The class of trivial cofibrations equals the class of retracts of relative $J$-cell complexes, which equals the class of $J$-cofibrations
%     \end{enumerate}
% \end{theorem}

% \begin{theorem}[{\cite[11.3.1]{hirschhorn2003model}}]
%     Let $\cat M$ be a category that is closed under small limits and colimits and let $W$ be a class of maps in $\cat M$ that is closed under retracts and satisfied the two out of three axiom. If $I$ and $J$ are sets of maps in $\cat M$ such that 
%     \begin{enumerate}
%         \item both $I$ and $J$ permit the small object argument
%         \item every $J$-cofibration is both an $I$-cofibration and an element of $W$,
%         \item every $I$-injective is both a $J$-injective and an element of $W$
%         \item one of the following two conditions holds:
%         \begin{enumerate}[(a)]
%             \item a map that is both an $I$-cofibration and na element of $W$ is a $J$-cofibration, or
%             \item a map that is both a $J$-injective and an element of $W$ is an $I$-injective,
%         \end{enumerate}
%     \end{enumerate}
%     then there is a cofibrantly generated model category structure on $\cat M$ in which $W$ is the class of weak equivalences, $I$ is a set of generating cofibrations and $J$ is a set of generating trivial cofibrations. 
% \end{theorem}

% \begin{theorem}[{\cite[11.6.1]{hirschhorn2003model}}]
%     If $\cat C$ is a small category and $\cat M$ is a cofibrantly generated model category with generating cofibrations $I$ and generating trivial cofibrations $J$, then the category $\cat M^{\cat C}$ is a cofibrantly generated model category. In this model category structure, a map $X\to Y$ is 
%     \begin{itemize}
%         \item a weak equivalence if $X_\alpha \to Y\alpha$ is a weak equivalence in $\cat M$ for every object $\alpha\in\cat C$,
%         \item a fibration if $X_\alpha\to Y_\alpha$ is a fibration in $\cat M$ for every object $\alpha$ of $\cat C$.
%     \end{itemize}
% \end{theorem}
% A model structure on $\cat M^{\cat C}$ with weak equivalences and fibrations as above is called the projective model structure on $\cat M^{\cat C}$. Thus the theorem states that if $\cat M$ is cofibrantly generated, the projective model structure on $\cat M^{\cat C}$ exists. 

% % We have natural transformations \begin{align*}
% %     \epsilon_F\colon \mathds L F \gamma_M \nto \gamma_N F, \quad \epsilon_G\colon \mathds L G \gamma_N \nto \gamma_P G\quad \text{and}\quad \epsilon_{GF}\colon\mathds L (GF) \gamma_{M} \nto \gamma_{P} GF
% % \end{align*} 
% % The transformations $\epsilon_F$ and $\epsilon_G$ can be composed as $$\mathds L G\mathds L F \gamma_M \xnto{\mathds L G \epsilon_F} \mathds L G \gamma_N F \xnto{\epsilon_G F} \gamma_P GF.$$ By the universal property of $\mathds L(G\comp F)$, there is a natural transformation $\theta\colon\mathds L G\comp\mathds L F \nto \mathds L(G\comp F) \colon \Ho\cat M\to\Ho\cat P$, such that $\epsilon_{GF}(\theta\comp\gamma_M) = \mathds L G \epsilon_F\comp\epsilon_G F$.

% \subsection{Homotopy Colimits}
% We follow \cite[Chapter 5-6]{riehl_2014} and \cite[Section 19-21]{dwyer2004homotopy}
% \begin{definition}
%     Let $\cat D$ be a category and $\cat M$ a category with all $\cat D$-colimits. A homotopy $\cat D$-colimit functor is a a left derived functor of a fixed left adjoint 
%     $$\colim^{\cat D}\colon \cat M^{\cat D}\to \cat M$$
%     of the constant diagram functor $\cat M\to\cat M^{\cat D}$.
% \end{definition}
% This makes the homotopy $\cat D$-colimit homotopically unique in the sense that the category of such objects is equivalent through a homotopical equivalence to the single-object category $*$.

% % \begin{definition} Combinatorial Model Category
% % \end{definition}

% % \begin{theorem}
% %     Let $\cat M$ be a model category that admits a functorial cofibrant replacement and $\cat D$ a category. Then a homotopy $\cat D$-colimit functor exists. 
% % \end{theorem}
% % \begin{proof}
% %     Let $Q\colon \cat M\to \cat M_c$ and $q\colon Q\to\id_{\cat M}$ be a functorial cofibrant replacement and hence a left deformation of $\cat M$. Then $Q^{\cat D}\colon \cat M^D\to\cat M_c^{\cat D}$ and $q\colon Q^{\cat D}\to\id_{\cat M^{\cat D}}$ is a left deformation of $\cat M^{\cat D}$. We need to show that this is a left deformation of $\colim\colon\cat M^{\cat D}\to\cat M$. Hence we need to show that $\colim$ maps homotopy equivalent functors in $\cat M_c^{\cat D}$ to homotopy equivalent colimits. 

% %     Let $X, Y\colon \cat D\to\cat M_c$ and $f\colon X\nto Y$ an objectwise weak equivalence. For each $i\in \cat C$ consider the map $f_i\colon X_i\to Y_i$. We can factor the coproduct map $f\coprod\id_{Y_i} \colon X_i\coprod Y_i\to Y_i$ as a composite $X_i\coprod Y_i\xto{q_i} C_i \xto{p_i} Y_i$ such that $q_i$ is a cofibration and $p_i$ is an acyclic fibration. Since $X_i$ and $Y_i$ are cofibrant, the inclusions $i_X\colon X_i\to X_i\coprod Y_i$ and $i_Y\colon Y_i\to X_i\coprod Y_i$ are cofibrations, hence the composite maps $q_i i_X\colon X_i\to C_i$ and $q_i i_Y Y_i\to C_i$ are cofibrations. 
% % \end{proof}

% \subsection{Quillen Adjunctions}
% The following is from \cite[16.2]{may2011more}.

% \begin{definition}
% Let $F\colon \cat M\to \cat N$ and $U\colon \cat N\to\cat M$ be left and right adjoint functors between model categories. The pair $(F, U)$ is a \emph{Quillen adjunction} if the following equivalent conditions are satisfied:
% \begin{enumerate}
%     \item $F$ preserves cofibrations and $U$ preserves fibrations.
%     \item $F$ preserves cofibrations and acyclic cofibrations.
%     \item $U$ preserves fibrations and acyclic fibrations.
%     \item $F$ preserves acyclic cofibrations and $U$ preserves acyclic cofibrations.
% \end{enumerate}
% The Quillen adjunction is a \emph{Quillen equivalence} if for any map $f\colon FX\to Y$ with adjoint $g\colon X\to UY$, where $X$ is cofibrant and $Y$ is fibrant, $f$ is a weak equivalence in $\cat N$ if and only if $g$ is a weak equivalence in $\cat M$. 
% \end{definition}

% \begin{theorem}
%     If $(F, U)$ is a Quillen adjunction, then the total derived functors $\mathds LF\colon \Ho \cat M\to \Ho\cat N$ and $\mathds R U$ exist and form an adjoint pair. If $(F, U)$ is a Quillen equivalence, then $(\mathds LF,\mathds RU)$ is an adjoint equivalence between $\Ho\cat M$ and $\Ho\cat N$.
% \end{theorem}

% \begin{lemma}
%     If $F\colon \cat M\to \cat N$ is a left Quillen functor and $g\colon X\to Y$ is a map in $\cat M$, then the total left derived functor $\mathds F\colon\Ho\cat M\to\Ho\cat N$ takes the image of $g$ in $\Ho\cat M$ to the image in $\Ho\cat N$ of $F(\tilde g)$ for some cofibrant approximation $\tilde g\colon\tilde X\to\tilde Y$ of $g$.
% \end{lemma}

% % \begin{example}

% % \end{example}

% \begin{theorem}
%     If $(F, U)$ is a Quillen adjunction, then $F$ preserves homotopy pushouts: for any diagram $X\xfrom{f} A \xto{g} Y$, the natural map $F(X)\coprod^h_{F(A)} F(Y) \to F(X\coprod^h_A Y)$ is a weak equivalence. Dually, $U$ preserves homotopy pullbacks.
% \end{theorem}





% \section{Examples of Model Categories}
% \subsection{Spaces}\label{subsec:spaces_modelcat}
% TODO: Criterion for cofibrations


% Let $\cat I$ be the set of inclusions $S^{n-1}\to D^n$ for $n\geq 0$, where $S^{-1}=\emptyset$. Let $\cat J$ be the set of inclusions $i_0\colon D^n\to D^n\times I$.
% \begin{theorem}
% There is a model structure, called the classical model or Quillen model structure structure on spaces, on the category of compactly generated topological spaces, in which
% \begin{itemize}
%     \item the weak equivalences are weak homotopy equivalences
%     \item the fibrations are the Serre fibrations, i.e. maps which have the right lifting property with respect to $\cat J$
%     \item cofibrations are the retracts of relative cell complexes
% \end{itemize}
% The acyclic fibrations are the maps which have the right lifting property with respect to $\cat I\union\cat J$. 

% The classical model structure on topological spaces is proper, cofibrantly generated and a monoidal model category. 
% \end{theorem}
% See \cite[17.2.2]{may2011more}.

% Every space is fibrant with respect to this model structure, the cofibrant spaces are retracts of generalized cell complexes.


% \begin{theorem}
%     There exists a model structure, called the Strøm model structure, on the category of compactly generated spaces, in which
%     \begin{itemize}
%         \item the weak equivalences are the homotopy equivalences
%         \item fibrations are the Hurewicz fibrations, which are defined to be the maps that have the right lifting property with respect to all inclusions $A\injto A\times I$
%         \item cofibrations are determined by these classes and are called the closed Hurewicz cofibrations.
%     \end{itemize} 
%     The Strøm model is proper and a monoidal model category. 
% \end{theorem}
% See \cite[17.1.1 and 17.1.3]{may2011more}.
% The cofibrations of this model are the classical cofibrations, i.e.\ the maps that satisfy the left lifting property with respect to maps $B^I\xto{ev_0} B$ for all $B$. Similarly the fibrations satisfy the right lifting property with respect to the inclusions $A\xto{i_0} A\times I$ for all $A$. The Strøm model is not cofibrantly generated, see for example remark 4.7 in \cite{raptis2010homotopy}.

% \subsection{Chain Complexes}

% Let $R$ be a ring, $R-mod$ its category of modules and $\Ch_{\geq 0}(R-mod)$ the category of connective chain complexes (i.e.\ $0$ in negative degree).
% \begin{theorem}[{\cite[II.4]{quillen2006homotopical}}, \cite{strickland2020model}]
%     There is a model category structure called the \emphi{projective model structure} on the category of chain complexes $\Ch_{\geq 0}(R-mod)$ whose
%     \begin{itemize}
%         \item weak equivalences are the quasi-isomorphisms
%         \item fibrations are the morphisms that are underlying epimorphisms in $R-mod$ in each positive degree
%         \item cofibrations are degreewise monomorphisms with degreewise projective cokernel. 
%     \end{itemize}
% \end{theorem}

% In particular, if $R$ is a field, any degreewise monomorphism is a cofibration.

% \begin{theorem}
%     The projective model structure on $\Ch_{\geq 0}$ on connective chain complexes is proper. It is a monoidal model category with respect to the tensor product of chain complexes. It is cofibrantly generated with the generating cofibrations

%     \begin{center}
%     \begin{tikzcd}[sep=10pt]
%         S^{n-1} \ar[d, "{ i_n }"] \ar[r, phantom, ":"] &\big[\; \cdots & \ar[l] 0  \ar[d] & \ar[l] 0  \ar[d] & \ar[l] 0  \ar[d] & \ar[l] R  \ar[d, "{\mathrm{id}}"] & \ar[l] 0  \ar[d] & \ar[l] \cdots \;\big] \\
%         D^n \ar[r, phantom, ":"] & \big[\; \cdots & \ar[l] 0  & \ar[l] 0 & \ar[l] \underset{ \mathclap{ \raisebox{-3pt}{ \scalebox{.7}{ $\mathrm{deg} = n$ } } } }{ R } &  \ar[l, "{ \mathrm{id} }"]R & 0 \ar[l] & \cdots \ar[l] \;\big] 
%     \end{tikzcd}
%     \end{center}

%   and generating acyclic cofibrations
%     \begin{center}
%     \begin{tikzcd}[sep=10pt]
%         0 \ar[d, "{ j_n }"] \ar[r, phantom, ":"] & \big[\; \cdots & 0 \ar[l] \ar[d] & 0 \ar[l] \ar[d] & 0 \ar[l] \ar[d] & 0 \ar[l] \ar[d] & 0 \ar[l] \ar[d] & \ar[l]\cdots \;\big] \\
%         D^n \ar[r, phantom, ":"] & \big[\; \cdots & 0 \ar[l] & 0 \ar[l] & \underset{ \mathclap{ \raisebox{-3pt}{ \scalebox{.7}{ $\mathrm{deg} = n$ } } } }{ R } \ar[l] & \ar[l, "{\mathrm{id}}"] R  & 0 \ar[l] & \ar[l] \cdots \;\big] 
%     \end{tikzcd}
%     \end{center}
%     \end{theorem}
% For a proof of the properness and the cofibrant generation, see theorems 23, 24 \cite{strickland2020model}. 

% \begin{theorem}
%     For $R$ a commutative ring, the category of unbounded chain complexes $Ch_* = Ch_*(R-Mod)$ of $R$-modules admits the structure of a proper, cofibrantly generated, combinatorial model category with 
%     \begin{itemize}
%         \item weak equivalences the quasi-isomorphisms
%         \item fibrations the degreewise epimorphisms
%         \item cofibrations the degreewise split monomorphisms with degreewise cofibrant cokernel
%     \end{itemize}
%     where the generating cofibrations and acyclic cofibrations are $i_n$, $j_n$ defined as above, for $n\in\Z$.
% \end{theorem}

% See \cite[Subsection 2.3]{hovey2007model} for a proof that this is a cofibrantly generated model category. 
% If $R=K$ is a field, any complex of $K$-vector spaces is a possibly infinite direct sum of complexes of the form $0\to K\xto{\sim} K\to 0$ and $0\to K \to 0$. For these complexes one can verify directly the left lifting property with respect to fibrations, hence they are cofibrant. Thus any complex is cofibrant and hence any monomorphism is a cofibration. 
% % \begin{proof}
% %     Properness means that the pushout of any weak equivalence along any cofibration is still a weak equivalence and that the pullback of any weak equivalence along any fibration is again a weak equivalence. We show the first part only, consider a pushout square
% %     \begin{tikzcd}
% %         A_* \dar\rar & B_*\dar \\
% %         C_* \rar D_*
% %     \end{tikzcd}

% %     The claim that $\Ch_{\geq 0}$ is cofibrantly generated amounts to checking that a map of chain complexes is a an epimorphism if and only if it has the right lifting property with respect to the maps $0\to D^n$ for all $n\geq 1$ and that it is an epimorphism and quasi-isomorphism if and only if it has the right lifting property with respect to the maps $S^{n-1}\to D^n$. This is an easy diagram chase.
% % \end{proof}

% \subsection{Differential Graded Algebras}
% See \cite{jf1997closed}

% \subsection{Differential Graded Commutative Algebras}
% Let $K$ be a field of characteristic zero and write $dgcAlg_K^{\geq 0}$ for the category of unital differential graded commutative algebras over $K$ in non negative degrees. This is a complete and cocomplete category. The coproduct is defined on the tensor product of chain complexes. The coequalizer of a map $f\colon A\to B$ is given by the quotient of $B$ by the differential ideal generated by $f(A)$. Limits are given by a differential graded algebra structure on the corresponding limit sets, i.e. the functors that map each algebra to its set at level $n$ preserve limits. 

% \paragraph{Transfer Principle for Model Categories} The following is taken from \cite[2.5 and 2.6]{berger2003axiomatic}. The structure of a model category can sometimes be transferred along adjoint functors. We will apply this in the case of the adjunction $$\Lambda\colon Ch_K \rightleftarrows dgcAlg_K\colon U$$ between chain complexes and differential graded commutative algebras, where the right adjoint $U$ forgets the algebra structure and the left adjoint is the free commutative cochain algebra functor, i.e.\ mapping a cochain complex $C$ to the graded abelianization of its tensor algebra, with a differential that extends the differential of $C$. 

% Consider the general setting of an adjunction $F\colon \cat D\rightleftarrows \cat E \colon G$ with left adjoint $F$, with $\cat D$ a model category. Define a map $f$ in $\cat D$ to be a weak equivalence resp.\ a fibration if $G(f)$ is a weak equivalence resp.\ a fibration. Assume that $\cat E$ has small colimits and finite limits. Then if the model structure on $\cat D$ is cofibrantly generated, this defines the \emphi{transferred mode structure} on $\cat E$, which is a cofibrantly generated model structure, provided that
% \begin{enumerate}[(i)]
%     \item the functor $G$ preserves filtered colimits
%     \item any sequential colimit of pushouts of images under $F$ of the generating trivial cofibrations of $\cat D$ yields a weak equivalence in $\cat E$
% \end{enumerate}

% Property (ii) can be difficult to verify in practice, but there is an argument by Quillen which yields a simpler criterion. Recall that a \emph{path object} of an object $X$ in a model category is a factorization of the diagonal $X\to X\times X$ into a weak equivalence followed by a fibration $X\xto{\sim} \mathrm{Path}(X)\surjto X\times X$. If the following conditions hold, then the condition (ii) is satisfied. 
% \begin{enumerate}[(a)]
%     \item $\cat E$ has a fibrant replacement functor
%     \item $\cat E$ has functorial path-objects for fibrant objects.
% \end{enumerate}

% \paragraph{Model Structure on differential graded commutative algebras} To apply the above in the setting of chain complexes and their commutative algebras, note that all chain complexes are fibrant in the projective model structure. To construct a path object of a chain complex $X$, define a complex $P$ by $P_n = X_n\oplus X_{n-1}\oplus X_n$ with differential $d(x, y, z) = (dx, -dy + x - z)$. If one considers bounded below or bounded above chain complexes, one can apply the truncation functors $\tau_{\leq 0}$ resp.\ $\tau_{\geq 0}$ to $P$.

% \begin{theorem}
%     There is are cofibrantly generated model structures on the categories $dgcAlg_K^{\geq 0}$ and on $dgcAlg_K$, where 
%     \begin{itemize}
%         \item the weak equivalences are quasi-isomorphisms of chain complexes
%         \item the fibrations are level-wise surjective maps of modules.
%     \end{itemize}
% \end{theorem}
% Note that the cofibrations in these two categories will generally be different.
% % Consider the category of differential graded 

% % \begin{definition}\label{def:sullivan-algebra}
% %     A \emphi{relative Sullivan algebra} is a homomorphism of differential graded commutative algebras $(A, d)\to (A\otimes \Lambda V, D)$ for a graded vector space $V$ such that $V$ has a basis $\{v_\alpha\mid\alpha\in J\}$ where $J$ is well-ordered, such that $Dv_{\beta}\in A\otimes \Lambda V_{<\beta}$ for all $\beta\in J$, where $V_{<\beta}$ is spanned by the $v_\alpha$ with $\alpha<\beta$. 

% %     If $A=K$ then an algebra $(\Lambda V, D)$ satisfying the above property is called a \emphi{Sullivan Algebra}.

% %     It is called \emph{minimal}\index{minimal Sullivan Algebra} if in addition the condition $\alpha<\beta\implies\deg v_\alpha \leq \deg v_\beta$ holds.
% % \end{definition}


% \begin{theorem}[{\cite[1.13]{hess2007rational}}]
%     Let $K$ be a field of characteristic $0$. Any relative Sullivan algebra is a cofibration in the model structure of CDGAs, i.e.\ it satisfies the left lifting property with respect to all degreewise surjective quasi-isomorphisms of CDGAs.
% \end{theorem}
% More generally one can show that the cofibrations are the retracts of relative Sullivan algebras. 

% \begin{theorem}\label{thm:sullivan-is-cofibrant}
%     If $A\to A\otimes \Lambda V=P$ is a relative Sullivan algebra, then $P$ is cofibrant in the projective model category of dg $A$-modules. 
% \end{theorem}
% \begin{proof}
%     We show the lifting property, hence consider a diagram of dg $A$-modules
%     \begin{center}
%         \begin{tikzcd}
%              & C\dar["p", "\sim"', twoheadrightarrow]\\
%             P \rar["f"]\ar[ru, dotted, "\tilde f"] & D
%         \end{tikzcd}
%     \end{center}
%     To start, consider 
%     \begin{center}
%         \begin{tikzcd}
%              & C\dar["p", "\sim"', twoheadrightarrow]\\
%             A \rar["f|_{A\otimes 1}"]\ar[ru, dotted, "\tilde f_0"] & D
%         \end{tikzcd}
%     \end{center}
%     We want to find a lift $\tilde f_0$ of $A$-algebras. Since $p$ is a surjective quasi-isomorphism, there exists an element $c\in C$ such that $p(c) = f(1)$ and $d(c) = 0$. Setting $\tilde f_(a) = ac$, we obtain a map of $A$-modules and a chain map since $df(a) = d(ac) = da c \pm a dc = da f(1) = f(da)$. 

%     As an $A$-module, $A\otimes \Lambda(V)$ is free with generators the products of the $v_j$, $j\in J$. Fixing $\beta\in J$, for any product $v_\beta v_{\alpha_1}\dots v_{\alpha_p}$, with $\alpha_1< \dots< \alpha_p < \beta$, we can find an element $c\in C$ such that $p(c) = f(v_\beta v_{\alpha_1}\dots v_{\alpha_p})$ and $d(c) = \tilde f(D(v_\beta v_{\alpha_1}\dots v_{\alpha_p})$ since $p$ is a surjective quasi-isomorphism. We then set $\tilde f(v_\beta v_{\alpha_1}\dots v_{\alpha_p}) = c$, so $$d\tilde f(v_\beta v_{\alpha_1}\dots v_{\alpha_p}) = dc = \tilde f(D(v_\beta v_{\alpha_1}\dots v_{\alpha_p})$$ and extend as a map of $A$-modules. Via transfinite induction, this way we can define $\tilde f$ on the whole of $A\otimes \Lambda(V)$, which is a chain map and a map of $A$-modules.
% \end{proof}


\newpage
% \nocite{*}
\bibliography{bibliography}

% \newpage
% \printindex

\cleardoublepage
\thispagestyle{empty}

\section*{Selbstständigkeitserklärung}

Ich erkläre, dass ich die vorliegende Arbeit selbstständig und noch nicht für andere Prüfungen eingereicht habe. Sämtliche Quellen, einschließlich Internetquellen, die unverändert oder abgewandelt wiedergegeben werden, insbesondere Quellen für Texte, Grafiken, Tabellen und Bilder, sind als solche kenntlich gemacht. Mir ist bekannt, dass bei Verstößen gegen diese Grundsätze ein Verfahren wegen Täuschungsversuchs bzw. Täuschung eingeleitet wird.

% Ich erkläre hiermit, dass ich die vorliegende Arbeit selbstständig verfasst und noch nicht für andere Prüfungen eingereicht habe. Sämtliche Quellen einschließlich Internetquellen, die unverändert oder abgewandelt wiedergegeben werden, insbesondere Quellen für Texte, Grafiken, Tabellen und Bilder, sind als solche kenntlich gemacht. Mir ist bekannt, dass bei Verstößen gegen diese Grundsätze ein Verfahren wegen Täuschungsversuchs bzw. Täuschung eingeleitet wird.

% Taken from Computer Science template.
\vspace{2\baselineskip}
{\raggedright Berlin, den 06.03.2024 \hfill \TitelPunktLinie{8cm}\\}






\end{document}






























\section{Loop Space}

Presentations of $S^1$ as a homotopy colimit usually induce presentations of the free loop space as as homotopy limit. 
\begin{align*}
S^1 &= \hocolim \{* \rightrightarrows *\} \\
\Lambda X &= \holim \{ X \rightrightarrows X\}
\end{align*}
Here the arrows are two copies of the identity map.

\begin{align*}
S^1 &= \hocolim \{* \coprod * \rightrightarrows * \} \\
\Lambda X &= \holim \{ X \rightrightarrows X \times X \} = X \times_{X\times X} X
\end{align*}
Here the arrows are two copies of the unique map resp.\ the diagonal map.

A computation of the first homotopy limit via the Bousfield-Kan approach / Reedy models leads to the following cosimplicial space

\begin{tikzcd}
    X \arrow[r, shift left=1]\arrow[r, shift right=1] & X \times X \rar[shift left = 2]\rar\rar[shift right=2] & X \times X \times X \rar[shift left=3]\rar[shift left=1]\rar[shift right=1]\rar[shift right=3] & X \times X \times X \times X \dots
\end{tikzcd}

The $i$-th boundary map $X^n\to X^{n+1}$ duplicates the $i$-th element into the $i$-th and ($i+1$)-th position modulo $n+1$. The degeneracy maps erase any except the first element.

The totalization $\Tot(X_*)$ of a cosimplicial space $X_*$ is the space of natural transformations $Map(\Delta^*, X_*)$, where $\Delta^*$ is the standard cosimplicial space. Its topology is the subspace topology from the inclusion into $\Prod_n X_n^{\Delta^n}$.

If $X_*$ is the cosimplicial space associated to the loop space as above, then its totalization is indeed the loop space: one checks that the higher simplices are uniquely determined by the $1$-simplex through the degeneracy maps. 

Composing the cosimplicial object $X_*$ with the singular chain complex functor yields a cosimplicial chain complex whose totalization is quasi-isomorphic to the coHochschild chain complex. Dually, applying the singular cochain functor yields a simplicial chain complex whose realization is quasi-isomorphic to the Hochschild chain complex. Hence we are interested in how totalization and the chain complex functors commute. 

The result that we are looking for is that taking homotopy limits/colimits of topological spaces resp.\ chain complexes commutes with the chain complex functors. The classical way to do this is via Quillen adjunction, but we would like to see this done via $\infty$-categories. Afterwards we just have to check how the homotopy limit of chain complexes is computed. 

Patras-Thomas give a morphism 
\begin{align*} 
    \phi\colon \realization{NC(X^K)}^* \to C^*(\totalization{X^K}),
\end{align*}
where $NC$ is the normalized complex and bars are realization of a simplicial chain complex resp.\ totalization of a cosimplicial space. They show that under certain assumptions on connectedness this yields an isomorphism of cohomology algebras. The map $\phi$ is defined as follows: let $\underline{Z}$ be a cosimplicial space, then 
\begin{align*}
    \phi_{p,s}\colon C^{p+s}(\underline Z[p]) \xrightarrow{e_p^*} C^{p+s}(\Delta^p \times \totalization{\underline Z}) \xrightarrow{\int_{\Delta^p}} C^s(\totalization{\underline{Z}})
\end{align*}
Note that $e_p$ composes to a morphism of cosimplicial spaces $\underline{\Delta} \times \totalization{\underline{Z}} \to \underline Z$. The dual map is
\begin{align*}
    C_{p+s}(\underline Z[p]) \xleftarrow{e_p} C_{p+s}(\Delta^p \times \totalization{\underline Z}) \xleftarrow{\times \Delta^p} C_s(\totalization{\underline{Z}})
\end{align*}
This can also be seen as a map
\begin{align*}
    \phi_p\colon C_*(\totalization{\underline{Z}}) \xrightarrow{[\Delta^p] \times} C_{*+p}(\Delta^p \times \totalization{\underline Z}) \to C_{*+p}(\underline{Z}[p])
\end{align*}
This gives a total map 
\begin{align*}
    \phi &\colon C_{*}(\totalization{\underline{Z}}) \to \Prod_{p} C_{*+p}(\Delta^p \times \totalization{\underline Z}) \to \Prod_{p} C_{*+p}(\underline Z[p]) \\
    \phi &\colon C_{*}(\totalization{\underline{Z}}) \to \totalization{ C_{*}(\underline{\Delta} \times \totalization{\underline Z})} \to \totalization{C_{*}(\underline Z)} \\
\end{align*}
Setting $\underline Z = X^{S^1_*}$:
\begin{align*}
    C_*(\Lambda X) \to C_{*+p}(\Delta^p \times \Lambda X) \to C_{*+p}(X^{p+1})
\end{align*}
and one can check that the right map is indeed given by evaluation. 


\section{CoHochschild Construction and Base Points}

The usual cobar and coHochschild constructions are applied to $C \coloneqq C_*(X, x)$, the complex generated by singular simplicial maps with vertices mapped to a fixed $x\in X$. This seems sensible for the cobar construction, which models the based loop space, but for the free loop space, we would like to omit the choice of base point. 

Recall that the singular complex $C_*(X)$ is a coalgebra with two $C_0 \coloneqq C_0(X)$-coactions $\lambda \colon C\to C_0 \otimes C$ resp. $\rho\colon C\to C\otimes C_0$ from the left and the right, which extract the first resp. last last vertex of a singular simplex. Let $\tau\colon C_1 \otimes \dots \otimes C_k\to C_2 \otimes C_k \otimes C_1$ be the cyclic permutation map with the usual Koszul sign. There are $k$ pairs of parallel maps $C^{\otimes k} \to C \otimes C_0 \otimes C^{k-1}$ given by $(\rho \otimes id^{k-1})\tau^i$ resp. $(id\otimes \lambda\otimes id^{k-2}) \tau^i$. 
\begin{definition}
    The cyclic cotimes product $C^{\square k} \subset C^{\otimes k}$ is the collection of those elements such that each pair of coaction maps as defined above agrees. More generally, one can define a cyclic cotimes product of a tuple of bicoalgebras.
\end{definition}
This means that the sum of first vertices in the $i+1$-th factor agrees with the sum of last vertices in the $i$-th factor. 
Note that even in for $k=1$ this is generally a nontrivial condition and we have in particular defined $C^{\square 1} = C^\square\subset C$. 

This is not a complex using the differential on $C^{\otimes k}$, because the outer face maps $\partial_0$ and $\partial_k$ do not respect the imposed condition. One can obtain a complex by defining a differential which omits the outer face maps. 


\section{Spectra}
Let $Sp$ be the category of spectra. $Sp$ is closed monoidal with the smash product $\wedge$ and the sphere spectrum $\mathbb S$. There is a functor $\Sigma^\infty\colon Top_* \to Sp$ resp.  $\Sigma_+^\infty\colon Top \to Sp$ with an adjunction $\Sigma^\infty_+ \dashv \Omega^\infty$. The homology wrt a homology theory associated to a spectrum $E$ can be computed via 
\begin{align*}
    H_*(X, E) &= X \wedge E  &&H_n(X, E) = \pi_n(X \wedge E) = [\Sigma^n \mathbb S, X\wedge E] \\
    H^*(X, E) &= [X, E]  &&H^n(X, E) = \pi_n([X, E]) = [\Sigma^n \mathbb S\wedge X, E]
\end{align*}

\paragraph{Umkehr maps} Given an embedding of closed manifolds $P\subset N$ and a vector bundle $\xi$ on $N$, one can give an umkehr map $f_\xi^! \colon N^\xi \to P^{\nu + \xi}$ of Thom spectra, where $\nu$ is the normal bundle of $P$.
\end{document}
